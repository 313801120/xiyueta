/*! xiyueta v1.2.9 | Author xiyueta Adream | MIT License By http://xiyueta.com/  */
String.prototype.trim=function(){return(this+"").replace(/(^\s*)|(\s*$)/g,"")};var _CONSOLE=function(){this.log=function(t){if("object"==typeof t){var e,l;for(e in t)-1==(t[e]+"").indexOf("function")&&(l=(l=t[e]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(l="object"==typeof t[e]?this.log(t[e]):l)?response.write(e+"<br>"):response.write(e+":  "+l+"<br>"))}else response.write(t+"<br>")}},console=new _CONSOLE;function XiyuetaCommon(){this.copyStr=function(t,e){for(var l="",r=1;r<=e;r++)l+=t;return l},this.bystesLength=function(t){for(var e=0,l=0;l<t.length;l++)255<t.charCodeAt(l)?e+=2:e++;return e},this.getFileSize=function(t){return t<1048576?(t/1024).toFixed(2)+"KB":1048576==t?"1MB":1048576<t&&t<1073741824?(t/1048576).toFixed(2)+"MB":1048576<t&&1073741824==t?"1GB":1073741824<t&&t<1099511627776?(t/1073741824).toFixed(2)+"GB":"文件超过1TB"}}var _XIYUETA=function(t){"use strict";this.htmlSource=t=null==t?"":t,this.htmlArr=[],this.lv=0,this.common=new XiyuetaCommon,this.config={version:"1.2.9-1",httpurl:"",serverurl:"/api/downWeb/default.asp",jsdir:"js/",cssdir:"css/",imagesdir:"images/"},this.tplConfig={type:"xiyuetacms",item:4},this.parseHTML=function(t){null!=t&&(this.htmlSource=t,this.htmlArr=[]);for(var e="",l="",r="",s="",i=!1,n=!1,a=!1,h=!1,o=!1,u=0,f=0;f<=this.htmlSource.length-1;f++){var p,c,e=this.htmlSource.substr(f,1);i?(r+=e,h?">"==e&&"--\x3e"==r.substr(-3,3)&&(a=i=h=!1,this.htmlArr.push({lv:u+1,label:"!--",upHtml:s,downHtml:"",html:r,tagpair:1}),s=r=""):n&&"\x3c!--"==r?h=!0:o?">"==e&&"%>"==r.substr(-2,2)&&(a=i=o=!1,this.htmlArr.push({lv:u+1,label:"<%",upHtml:s,downHtml:"",html:r,tagpair:1}),s=r=""):n&&"<%"==r?o=!0:" "==e&&n?n=!1:">"==e&&(i=n=!1,c=2,"/"==l.substr(0,1)?a=!0:(u++,"/"!=l.substr(-1,1)&&-1=="|br|hr|img|link|meta|param|input|!doctype|rect|line|col|".indexOf("|"+l.toLowerCase()+"|")||(a=!0,c=1,l=l.replace(/\//g,"").trim())),this.htmlArr.push({lv:u,label:l.toLowerCase(),upHtml:s,downHtml:"",html:r,tagpair:c}),s=r="",a&&(u--,a=!1),"script"==l.toLowerCase()?(p=this.htmlSource.substr(f+1).toLowerCase().indexOf("<\/script>"),r=this.htmlSource.substr(f+1,p),f+=p):"textarea"==l.toLowerCase()&&(p=this.htmlSource.substr(f+1).toLowerCase().indexOf("</textarea>"),r=this.htmlSource.substr(f+1,p),f+=p)),n&&(l+=e)):"<"==e?(c=this.htmlSource.substr(f+1,1).toLowerCase(),-1!="abcdefghijklmnopqrstuvwxyz!/%?".indexOf(c)?(s=r,r=e,a=!(n=i=!0),l=""):r+=e):r+=e}""!=r&&this.htmlArr.push({lv:u,label:"",upHtml:"",downHtml:"",html:r}),this.lv=u},this.handleLabelParam=function(t,e,l,r){if(null==r&&(r=!1),null==l){if(null!=t[e])return t[e]}else l=l.toString();for(var s=!1,i="",n="",a=!1,h="",o=!1,u=!0,f=0,p=0,c=!1,m=t.label.length+1;m<=t.html.length-1;m++){var b,d=t.html.substr(m,1);if(a)if(o)if(c)">"==d&&(c=!1),n+=d;else if(d==h||">"==d){var x,i=i.toLowerCase();if(t[i]=n,o=a=!1,h="",e==i)return null==l?n:(""==l?(g=t.html.substr(0,p-1),y=t.html.substr(m+1),t.html=g+y):(v=(x=f)+n.length,u&&(x++,v++),g=t.html.substr(0,x),y=t.html.substr(v),t.html=g+l+y),t[i]=l,t);else if(">"==d&&null!=l)return""!=l&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+l+'">'),t[e]=l,!0}else"<"==d&&(c=!0),n+=d;else'"'==d||"'"==d?(h=d,f=m,u=o=!0):" "!=d&&(h=" ",f=m,n=d,u=!(o=!0));else if(">"==d){if(null!=l)return""!=l&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+l+'">'),t[e]=l,!0;if(e==(i=i.trim()))return null!=l&&(b=p+i.length,g=t.html.substr(0,b),y=t.html.substr(b),t.html=g+'="'+l+'"'+y),""}else if(s)if("="==d){if(-1!=(i=i.trim()).indexOf(" ")){var g,y,v=i.split(" ");if(e==(i=v[0]))return null!=l&&(g=t.html.substr(0,b),y=t.html.substr(b),t.html=g+'="'+l+'"'+y),""}a=!(s=!1),h=n=""}else i+=d;else" "!=d&&(s=!0,i=d,p=m)}},this.getDocument=function(t,e,l,r){if(null==t&&(t=""),null==r&&(r=!1),0==this.htmlArr.length)return console.log("%c 需要先解析一段html文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf(",")){for(var s="",i=t.split(","),n=0;n<=i.length-1;n++)s+=h=this.getDocument(i[n],e,l,r);for(var a="",i=s.split(","),n=0;n<=i.length-1;n++){var h=i[n];-1==(","+a+",").indexOf(","+h+",")&&(""!=a&&(a+=","),a+=h)}return a=""!=a?","+a:a}if(""==(t=t.trim()))return"";null==e&&(e=0),null==l&&(l=this.htmlArr.length-1);var o=-1.1,u="",f="",p="",c="",s="";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')){for(var m=!1,s="",n=0;n<=t.length;n++){h=t.substr(n,1);0!=m||"'"!=h&&'"'!=h?1==m&&(" "==h?h="-Space-":"'"!=h&&'"'!=h||(m=!1,h="")):(m=!0,h=""),s+=h}t=s}var b,d=t.indexOf(" ");if(-1!=d&&(u=t.substr(d+1).trim(),t=t.substr(0,d)),-1!=(d=t.indexOf(":eq("))&&(b=(h=t.substr(d+4)).indexOf(")"),""!=(o=h.substr(0,b))&&(o=parseInt(o)),t=t.substr(0,d)),-1!=(d=t.indexOf("["))&&(b=(h=t.substr(d+1)).indexOf("]"),f=(g=(h=h.substr(0,b)).split("="))[0],p=g[1].replace(/-Space-/g," "),-1!=f.indexOf("|")&&(f=(x=f.split("|"))[0],c=x[1]),t=t.substr(0,d)),"#"==t.substr(0,1)){if(0<o)return"";o=0}var x,g="";if(0<=(d=t.substr(1).lastIndexOf("."))&&(t=(x=t).substr(0,d+1),g=x.substr(d+2)),""!=(s=this.serchDocument(t,e,l,f,p,c,g))&&-1.1!=o&&(i=s.split(","),""!=(s=o<0?i[i.length+o]:i[o+1])&&(s=","+s)),""!=u&&""!=s){i=s.split(",");s="";for(var y,n=1;n<=i.length-1;n++)-1!=(h=i[n]).indexOf("|")&&(y=h.split("|"),e=parseInt(y[0])+1,l=parseInt(y[1])-1,s+=this.getDocument(u,e,l,!0))}if(0==r){i=s.split(",");s="";for(n=1;n<=i.length-1;n++){h=i[n];-1==(","+s+",").indexOf(","+h+",")&&(s+=","+h)}}return s},this.serchDocument=function(t,e,l,r,s,i,n){null==r&&(r=""),null==s&&(s=""),null==i&&(i=""),null==n&&(n="");for(var a=!1,h="",o=0,u=0,f=!1,p=e;p<=l;p++){var c,m,b=this.htmlArr[p];null!=b&&(a&&this.checkEndSelector(b,t)&&o==b.lv?(f&&(h+="|"+p),f=a=!1,h+=this.serchDocument(t,u+1,p,r,s,i)):this.checkStartSelector(b,t,n)&&0==a&&(2==b.tagpair&&(a=!0,o=b.lv),u=p,c=!0,""!=r&&(m=this.handleLabelParam(b,r),(m="NOUL"==i?m.toLowerCase():m)!=s&&(c=!1)),c&&(h+=","+p,2==b.tagpair&&(f=!0))))}return h},this.checkStartSelector=function(t,e,l){if(""==t.label)return!1;var r=e+" ",s=t.label.substr(0,1),i=e.substr(0,1);if("/"==s)return!1;{if("*"==i)return""==l||null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a+" ").indexOf(" "+l+" ");if("#"==i){var n=e.substr(1,r.indexOf(" ")-1),s=this.handleLabelParam(t,"id");if(s==n)return""==l||null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a+" ").indexOf(" "+l+" ")}else if("."==i){var n=e.substr(1,r.indexOf(" ")-1),a=" "+this.handleLabelParam(t,"class")+" ";if(-1!=a.indexOf(" "+n+" "))return""==l||null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a+" ").indexOf(" "+l+" ")}else if(t.label+" "==e.substr(0,t.label.length+1)+" ")return""==l||null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a+" ").indexOf(" "+l+" ")}return!1},this.checkEndSelector=function(t,e){t.label.substr(0,1);var l=e.substr(0,1);return"*"==l||("#"==l||"."==l||t.label=="/"+e.substr(0,t.label.length-1))},this.getText=function(t,e,l){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var r="",s=this.domList,i=(s=null==this.domList?this.getDocument(t,e,l):s).split(","),n=1;n<=i.length-1;n++)if(-1!=(s=i[n]).indexOf("|"))for(var a=s.split("|"),h=parseInt(a[0])+1;h<=a[1];h++)null!=this.htmlArr[h]&&(r+=this.htmlArr[h].upHtml);return r},this.getHtml=function(t,e,l,r){""!=(r=null==r?"":r)&&(r="|"+r+"|"),t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();var s="",i=this.domList,t=(i=null==this.domList?this.getDocument(t,e,l):i).split(",");if(!(t.length<2)){if(-1!=(i=t[1]).indexOf("|"))for(var t=i.split("|"),e=parseInt(t[0]),l=parseInt(t[1]),n=e;n<=l;n++){var a=this.htmlArr[n];a&&(e<n&&-1==r.indexOf("doc")&&(s+=a.upHtml),-1!=r.indexOf("all")?-1!=r.indexOf("label")?s+="<"+a.label+">":s+=a.html:e<n&&n<l&&(-1!=r.indexOf("doc")&&"!--"!=a.label?-1!=r.indexOf("label")?s+="<"+a.label+">":s+=a.html:""==r&&(s+=a.html)))}else""!=i&&-1!=r.indexOf("all")&&(-1!=r.indexOf("label")?s+="<"+a.label+">":s=this.htmlArr[i].html);return s}},this.setHtml=function(t,e,l,r,s){"object"==typeof t?i=","+t.x+"|"+t.y:(i=this.domList,null==this.domList&&(i=this.getDocument(t,e,l)));for(var i,n=i.split(","),a=1;a<=n.length-1;a++)if(-1!=(i=n[a]).indexOf("|"))for(var h=i.split("|"),e=parseInt(h[0]),l=parseInt(h[1]),o=e;o<=l;o++){var u=this.htmlArr[o];u&&(o==e?"all"==s&&(u.html=""):o<l?delete this.htmlArr[o]:o==l&&(u.upHtml=r,"all"==s&&(u.html="")))}return this},this.handleCssParam=function(t,e,l){var r,s;if(null==l){var i,n="a{"+(i=null==(i=this.attr(t,r,s,"style"))?"":i)+"}";return $xytcss("a").parse(n).css(e)}l=l.toString();n="a{"+(i=null==(i=this.attr(t,r,s,"style"))?"":i)+"}",$xytcss("a").parse(n).css(e,l),l=(l=$xytcss().print()).substr(2,l.length-3);this.attr(t,r,s,"style",l)},this.css=function(t,e,l,r,s){if("object"==typeof r){for(var i in r)this.css(t,e,l,i,r[i]);return this}if(""==(r=(r=null==r?"":r).trim()))return"";if("object"==typeof t)return null==s?this.handleCssParam(t,r):this.handleCssParam(t,r,s);var n=this.domList,a=(n=null==this.domList?this.getDocument(t,e,l):n).split(",");if(null==s){if(null==(n=a[1]))return;var h=n.split("|"),o=this.htmlArr[h[0]];return n=this.handleCssParam(o,r)}for(var u=1;u<=a.length-1;u++)o=-1!=(n=a[u]).indexOf("|")?(h=n.split("|"),this.htmlArr[h[0]]):this.htmlArr[n],this.handleCssParam(o,r,s)},this.attr=function(t,e,l,r,s){if("object"==typeof r){for(var i in r)this.attr(t,e,l,i,r[i]);return this}if(""==(r=(r=null==r?"":r).trim()))return"";if("object"==typeof t)return null==s?this.handleLabelParam(t,r):this.handleLabelParam(t,r,s);var n=this.domList,a=(n=null==this.domList?this.getDocument(t,e,l):n).split(",");if(null==s){if(null==(n=a[1]))return;var h=n.split("|"),o=this.htmlArr[h[0]];return n=this.handleLabelParam(o,r)}for(var u=1;u<=a.length-1;u++)o=-1!=(n=a[u]).indexOf("|")?(h=n.split("|"),this.htmlArr[h[0]]):this.htmlArr[n],this.handleLabelParam(o,r,s)},this.val=function(t,e,l,r){"object"==typeof t?h=","+t.x+"|"+t.y:(h=this.domList,null==this.domList&&(h=this.getDocument(t,e,l)));var s=h.split(",");if(null==r){if(null==(h=s[1]))return"";var i=h.split("|");if("textarea"==(m=this.htmlArr[i[0]]).label)return m.x=i[0],m.y=i[1],this.getHtml(m);if("select"!=m.label)return this.handleLabelParam(m,"value");if(""==(o=this.getDocument("option",m.x,m.y)))return;for(var n=o.split(","),a=1;a<=n.length-1;a++)-1!=(f=n[a]).indexOf("|")&&(p=f.split("|"),c=this.htmlArr[p[0]],null==this.handleLabelParam(c,"selected")&&null!=u||(u=this.handleLabelParam(c,"value")));return u}for(var h,a=1;a<=s.length-1;a++)if(-1!=(h=s[a]).indexOf("|")){var o,i=h.split("|");if("textarea"==(m=this.htmlArr[i[0]]).label)m.x=i[0],m.y=i[1],this.setHtml(m,void 0,void 0,r);else if("select"==m.label){if(""!=(o=this.getDocument("option",m.x,m.y)))for(var u,f,p,c,n=o.split(","),a=1;a<=n.length-1;a++)-1!=(f=n[a]).indexOf("|")&&(p=f.split("|"),c=this.htmlArr[p[0]],this.handleLabelParam(c,"value")==r?this.handleLabelParam(c,"selected","selected"):this.handleLabelParam(c,"selected",null))}else this.handleLabelParam(m,"value",r)}else{var m=this.htmlArr[h];this.handleLabelParam(m,"value",r)}return""},this.each=function(t,e,l,r){var s=[];t=t.trim();for(var i,n,a=this.domList,h=(a=null==this.domList?this.getDocument(t,e,l):a).split(","),o=1;o<=h.length-1;o++)-1!=(a=h[o]).indexOf("|")?(i=a.split("|"),(n=this.htmlArr[i[0]]).x=parseInt(i[0]),n.y=parseInt(i[1])):((n=this.htmlArr[a]).x=parseInt(a),n.y=parseInt(a)),s.push(n);if("object"==typeof s)for(var o=0,u=s.length;o<u&&0!=r.call(s[o],o,s[o]);o++);},this.remove=function(t,e,l){if("object"==typeof t?i=","+t.x+"|"+t.y:(i=this.domList,null==this.domList&&(i=this.getDocument(t,e,l))),""==i)return!1;for(var r=i.split(","),s=1;s<=r.length-1;s++){var i=r[s];if(-1!=i.indexOf("|"))for(var n,a=i.split("|"),e=parseInt(a[0]),l=parseInt(a[1]),h=e;h<=l;h++)(n=this.htmlArr[h])&&(h==e?(n.html="",n.label=""):delete this.htmlArr[h]);else(n=this.htmlArr[i])&&(n.html="",n.label="")}return!0},this.addClass=function(t,e,l,r){if(null==r)return!1;if(""==(r=r.trim()))return!1;var s=r.split(" ");"object"==typeof t?a=","+t.x+"|"+t.y:(a=this.domList,null==this.domList&&(a=this.getDocument(t,e,l)));for(var i=a.split(","),n=1;n<=i.length-1;n++){for(var a,h=(a=i[n]).split("|"),h=this.htmlArr[h[0]],o=null!=(o=this.attr(h,e,l,"class"))?o.trim():"",u=0;u<=s.length-1;u++)""!=s[u]&&(""!=o&&(o+=" "),o+=s[u]);this.attr(h,e,l,"class",o)}},this.removeClass=function(t,e,l,r){if(null==r)return!1;if(""==(r=r.trim()))return!1;var s=r.split(" ");"object"==typeof t?a=","+t.x+"|"+t.y:(a=this.domList,null==this.domList&&(a=this.getDocument(t,e,l)));for(var i=a.split(","),n=1;n<=i.length-1;n++){var a,h=(a=i[n]).split("|"),h=this.htmlArr[h[0]];if(null!=(o=this.attr(h,e,l,"class"))){for(var o=" "+(o=o.trim())+" ",u=0;u<=s.length-1;u++)""!=s[u]&&(o=o.replace(" "+s[u]+" "," "));this.attr(h,e,l,"class",o.trim())}}},this.wrap=function(t,e,l,r,s){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var i,n=this.domList,a=(n=null==this.domList?this.getDocument(t,e,l):n).split(","),h=1;h<=a.length-1;h++)-1!=(n=a[h]).indexOf("|")?(i=n.split("|"),this.htmlArr[i[0]].upHtml+=r,this.htmlArr[i[1]].downHtml+=s):(this.htmlArr[n].upHtml+=r,this.htmlArr[n].downHtml+=s);return this},this.unwrap=function(t,e,l){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var r=this.domList,s=(r=null==this.domList?this.getDocument(t,e,l):r).split(","),i=1;i<=s.length-1;i++){var n,a=.1,h=0,o=0;-1!=(r=s[i]).indexOf("|")?(n=r.split("|"),a=this.htmlArr[n[0]].lv-1,h=parseInt(n[0]),o=parseInt(n[1])):(a=(f=this.htmlArr[r]).lv-1,h=o=parseInt(r));for(var u=h;0<=u;u--){var f=this.htmlArr[u];if("object"==typeof f&&this.htmlArr[u].lv==a){f.html="";break}}for(u=o;u<=this.htmlArr.length-1;u++){f=this.htmlArr[u];if("object"==typeof f&&this.htmlArr[u].lv==a){f.html="";break}}}return this},this.append=function(t,e,l,r){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var s,i=this.domList,n=(i=null==this.domList?this.getDocument(t,e,l):i).split(","),a=1;a<=n.length-1;a++)-1!=(i=n[a]).indexOf("|")?(s=i.split("|"),this.htmlArr[s[1]].upHtml+=r):this.htmlArr[i].downHtml+=r;return this},this.prepend=function(t,e,l,r){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var s,i=this.domList,n=(i=null==this.domList?this.getDocument(t,e,l):i).split(","),a=1;a<=n.length-1;a++)-1!=(i=n[a]).indexOf("|")?(s=i.split("|"),this.htmlArr[s[0]].html+=r):this.htmlArr[i].html+=r;return this},this.after=function(t,e,l,r){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var s,i=this.domList,n=(i=null==this.domList?this.getDocument(t,e,l):i).split(","),a=1;a<=n.length-1;a++)-1!=(i=n[a]).indexOf("|")?(s=i.split("|"),this.htmlArr[s[1]].downHtml+=r):this.htmlArr[i].downHtml+=r;return this},this.before=function(t,e,l,r){t="object"==typeof t?(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),""):t.trim();for(var s,i=this.domList,n=(i=null==this.domList?this.getDocument(t,e,l):i).split(","),a=1;a<=n.length-1;a++)-1!=(i=n[a]).indexOf("|")?(s=i.split("|"),this.htmlArr[s[0]].upHtml+=r):this.htmlArr[i].upHtml+=r;return this},this.printHTML=function(t){for(var e="",l=0,r=0;r<=this.htmlArr.length-1;r++){var s,i,n,a,h=this.htmlArr[r];h&&(h.id=r,"format"==t?(s=h.upHtml.trim(),i=h.downHtml.trim(),n=h.html.trim(),"html"==h.label?l=-1:"head"!=h.label&&"body"!=h.label||(s+="\n"),""!=n&&(a=!0,2==h.tagpair?"/"==h.label.substr(0,1)&&(a=this.upCheckThisLabel(h)):-1!="|br|hr|rect|line|col|".indexOf("|"+h.label+"|")&&(a=!1),a&&(n="\n"+this.common.copyStr("    ",h.lv-1+l)+n)),e+=s+n+i):e+="zip"==t?h.upHtml.trim()+h.html.trim()+h.downHtml.trim():h.upHtml+h.html+h.downHtml)}return e="format"==t?e.trim():e},this.upCheckThisLabel=function(t){if("/head"==t.label||"/body"==t.label)return!0;for(var e=t.id-1;0<=e;e--){var l=this.htmlArr[e];if(l){if(l.lv==t.lv)return!1;if(2==l.tagpair||"img"==l.label)return!0;if(-1!=(l.upHtml+l.downHtml).indexOf("\n"))return!0}}return!1},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.htmlArr)},this.info=function(){console.log("%c xiyueta%c v"+_xyt.config.version+" website: www.xiyueta.com ","font-size:22px;color:#00bbee","color:#000")}},_xyt=new _XIYUETA,xiyueta=function(t,e,l){return new xiyueta.fn.init(t,e,l)};xiyueta.fn=xiyueta.prototype={length:1,selector:"",domList:void 0,x:null,y:null},xiyueta.extend=xiyueta.fn.extend=function(){var t,e,l,r=arguments[0]||{},s=1,i=arguments.length;for(s===i&&(r=this,s--);s<i;s++)if(null!=(t=arguments[s]))for(e in t)l=t[e],"__proto__"!==e&&r!==l&&void 0!==l&&(r[e]=l);return r};var init=xiyueta.fn.init=function(t,e,l){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=l,0<_xyt.htmlArr.length&&("string"==typeof t?(l=(e=_xyt.getDocument(t,e,l)).split(","),this.length=l.length-1,this.domList=e):"#object"==typeof t&&(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),this.selector="")),_xyt.domList=this.domList,null==this.selector&&(this.selector="")};init.prototype=xiyueta.fn,($=$xyt=xiyueta).log=function(t,e){if(null==e&&(e="<br>"),"object"==typeof t)for(var l in t){var r;-1==(t[l]+"").indexOf("function")&&(r=(r=t[l]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(r="object"==typeof t[l]?xiyueta.log(t[l]," , "):r)?document.write(l+e):document.write(l+":  "+r+e))}else t+="",document.write(t.replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")+e)},xiyueta.fn.extend({parse:function(t,e){var l;return _xyt.parseHTML(t),1!=(e=null==e&&0!=_xyt.lv?!0:e)||0<(l=this.repair(!1)).err&&""!=l.errList&&1==l.state&&_xyt.parseHTML(this.print()),0<_xyt.htmlArr.length&&"string"==typeof this.selector&&(l=(e=_xyt.getDocument(this.selector,this.x,this.y)).split(","),this.length=l.length-1,this.domList=e,_xyt.domList=this.domList),this},find:function(t){if("string"==typeof this.selector&&""!=this.selector){for(var e=this.selector.split(","),l="",r=0;r<=e.length-1;r++)""!=l&&(l+=","),l+=e[r]+" "+t;this.selector=l;var s=_xyt.getDocument(this.selector,this.x,this.y),e=s.split(",");this.length=e.length-1,this.domList=s,_xyt.domList=this.domList}else"object"==typeof this.selector&&(this.x=this.selector.x+1,this.y=this.selector.y-1,this.selector=t);return this},text:function(t){return null!=t?(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),_xyt.setHtml(this.selector,this.x,this.y,t),this):_xyt.getText(this.selector,this.x,this.y)},html:function(t,e){return null!=t?(_xyt.setHtml(this.selector,this.x,this.y,t,e),this):_xyt.getHtml(this.selector,this.x,this.y,e)},attr:function(t,e){return null==e&&"object"!=typeof t?_xyt.attr(this.selector,this.x,this.y,t):(_xyt.attr(this.selector,this.x,this.y,t,e),this)},val:function(t){return null==t?_xyt.val(this.selector,this.x,this.y):(_xyt.val(this.selector,this.x,this.y,t),this)},remove:function(){return _xyt.remove(this.selector,this.x,this.y),this},each:function(t){return _xyt.each(this.selector,this.x,this.y,t)},css:function(t,e){return null==e&&"object"!=typeof t?_xyt.css(this.selector,this.x,this.y,t):(_xyt.css(this.selector,this.x,this.y,t,e),this)},print:function(t){return _xyt.printHTML(t)},debug:function(t){return _xyt.debug(t),this}}),xiyueta.fn.extend({eq:function(t){var e=this.domList.split(",");0<=t?t++:t=e.length+t;t=e[t];return this.length=1,(this.selector="")!=t&&(t=","+t,this.length=1),_xyt.domList=this.domList=t,this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},addClass:function(t){return _xyt.addClass(this.selector,this.x,this.y,t),this},removeClass:function(t){return _xyt.removeClass(this.selector,this.x,this.y,t),this},wrap:function(t){var e=new _XIYUETA,l=0;e.parseHTML(t),e.repairHTML(!1);var r=e.printHTML();t!=r&&e.parseHTML(r);for(var s=0;s<=e.htmlArr.length-1;s++)(h=e.htmlArr[s]).lv>l&&2==h.tagpair&&(l=h.lv);for(var i="",n="",a=!1,s=0;s<=e.htmlArr.length-1;s++){var h,o=(h=e.htmlArr[s]).upHtml;"/"==h.label.substr(0,1)&&h.lv==l&&(a=!0,i+=o,o=""),0==a?i+=o+h.html:n+=o+h.html}return _xyt.wrap(this.selector,this.x,this.y,i,n),this},unwrap:function(){return _xyt.unwrap(this.selector,this.x,this.y),this},append:function(t){return _xyt.append(this.selector,this.x,this.y,t),this},prepend:function(t){return _xyt.prepend(this.selector,this.x,this.y,t),this},after:function(t){return _xyt.after(this.selector,this.x,this.y,t),this},before:function(t){return _xyt.before(this.selector,this.x,this.y,t),this},htmlwrap:function(t){return null!=t?(_xyt.setHtml(this.selector,this.x,this.y,t,"all"),this):_xyt.getHtml(this.selector,this.x,this.y,"all")},dom:function(t){return _xyt.getHtml(this.selector,this.x,this.y,"doc|"+t)},domwrap:function(){return _xyt.getHtml(this.selector,this.x,this.y,"doc|all")},domlabel:function(t){return _xyt.getHtml(this.selector,this.x,this.y,"doc|label|"+t)},domlabelwrap:function(){return _xyt.getHtml(this.selector,this.x,this.y,"doc|all|label")},lv:function(){return _xyt.lv}}),_XIYUETA.prototype.swap=function(t,e){if(null==t||null==e)return!1;t=this.getDocument(t),e=this.getDocument(e);if(""==t||""==e)return!1;if(-1==(t=t.split(",")[1]).indexOf("|"))var l=this.htmlArr[t];else{for(var r=t.split("|"),l=this.htmlArr[r[0]],s="",i=parseInt(r[0])+1;i<=r[1];i++)null!=(a=this.htmlArr[i])&&(s+=a.upHtml+a.html,delete this.htmlArr[i]);l.html+=s}if(-1==(e=e.split(",")[1]).indexOf("|"))var n=this.htmlArr[e];else{for(var a,r=e.split("|"),n=this.htmlArr[r[0]],s="",i=parseInt(r[0])+1;i<=r[1];i++)null!=(a=this.htmlArr[i])&&(s+=a.upHtml+a.html,delete this.htmlArr[i]);n.html+=s}e=l.html;return l.html=n.html,n.html=e,!0},_XIYUETA.prototype.getItem=function(t,e,l,r){null==r&&(r="");for(var s=[],i=(f=this.getDocument(t,e,l)).split(","),n=1;n<=i.length-1;n++)if(-1!=(f=i[n]).indexOf("|")){var a=f.split("|"),h=this.htmlArr[a[0]];if(""!=r)void 0!==(f=this.handleLabelParam(h,r))&&s.push(f);else{for(var o=h.html,u=parseInt(a[0])+1;u<=a[1];u++)null!=(h=this.htmlArr[u])&&(o+=h.upHtml+h.html);""!=o&&s.push(o)}}else{var f,h=this.htmlArr[f];""!=r?void 0!==(f=this.handleLabelParam(h,r))&&s.push(f):s.push(h.html)}return s},_XIYUETA.prototype.setConfig=function(t){if(null==t)return this.config;null!=t.httpurl&&(this.config.httpurl=t.httpurl),null!=t.serverurl&&(this.config.serverurl=t.serverurl),null!=t.jsdir&&(this.config.jsdir=t.jsdir),null!=t.cssdir&&(this.config.cssdir=t.cssdir),null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir)},_XIYUETA.prototype.charset=function(t){for(var e=0;e<=this.htmlArr.length-1;e++){var l=this.htmlArr[e];if(null!=l)if("meta"==l.label)if(-1!=l.html.toLowerCase().indexOf("charset=")){var r=this.handleLabelParam(l,"charset");if(null!=(r=null!=r?r.toLowerCase().trim():r))return null!=t&&this.handleLabelParam(l,"charset",t),r;if(-1!=(r=null!=(r=this.handleLabelParam(l,"content"))?r.toLowerCase().trim():r).indexOf("utf-8"))return null!=t?(this.handleLabelParam(l,"content","text/html; charset="+t),""):"utf-8";if(-1!=r.indexOf("gb2312"))return null!=t?(this.handleLabelParam(l,"content","text/html; charset="+t),""):"gb2312"}}},_XIYUETA.prototype.getHandleSrc=function(t,e,l,r){for(var s="",i=!0,n=0;n<=this.htmlArr.length-1;n++){var a,h,o,u=this.htmlArr[n];null!=u&&-1!=("|"+t+"|").indexOf("|"+u.label+"|")&&(null==(a=this.handleLabelParam(u,e))&&(a=""),"link"==u.label&&("dns-prefetch"!=(h=(h=null==(h=this.handleLabelParam(u,"rel"))?"":h).trim().toLowerCase())&&"alternate"!=h||(a="")),-1!=("|"+l+"|").indexOf("clean")?(i=!0,""!=a&&-1==a.indexOf("apps.bdimg.com/")&&(o=a=this.common.fullHttpUrl(r,a),-1!=("|"+l+"|").indexOf("web")&&""!=(a=this.common.getUrlFileName(a,u.label))&&("img"==u.label?a=this.config.imagesdir+a:"script"==u.label?a=this.config.jsdir+a:"link"==u.label?-1!=(h=(h=null==(h=this.handleLabelParam(u,"rel"))?"":h).trim().toLowerCase()).indexOf("shortcut icon")?a=this.config.imagesdir+a:-1!=h.indexOf("stylesheet")?a=this.config.cssdir+a:(a="",i=!1):(i=!1,a="")),i&&""!=a&&(-1!=("|"+l+"|").indexOf("down")?(""!=s&&(s+="[,]"),s+=o+"[|]"+a):(""!=s&&(s+="[,]"),s+=a)),this.handleLabelParam(u,e,a))):""!=a&&(""!=s&&(s+="[,]"),s+=a))}return s},_XIYUETA.prototype.replace=function(t,e,l,r){for(var s,i=this.getDocument(t),n=i.split(","),a=1;a<=n.length-1;a++)s=-1!=(i=n[a]).indexOf("|")?(s=i.split("|"),this.htmlArr[s[0]]):this.htmlArr[i],""!=e&&(i=this.handleLabelParam(s,e))==l&&this.handleLabelParam(s,e,r)},_XIYUETA.prototype.repairHTML=function(t){var e;null==t&&(t=!1);var l=0,r=!1,s="",i=0,n=",",a=!1;if(1<=this.htmlArr.length&&"no"==(h=this.htmlArr[0]).isFindDom)return!1;for(var h,o=0;o<=this.htmlArr.length-1;o++)(h=this.htmlArr[o])&&(h.nIndex=o,2==h.tagpair&&("/"==h.label.substr(0,1)?(m=h.label.substr(1),-1!=(","+n+",").indexOf(","+m+",")?n=n.replace(","+m+",",","):n+=h.label+","):n+=h.label+","));if(""!=n&&1==this.lv&&2!=this.htmlArr.length){if(splstr=n.split(","),3==splstr.length)for(var u=1;u<=splstr.length-2;u++){var f=splstr[u];if("/"!=f.substr(0,1))for(o=0;o<=this.htmlArr.length-1;o++)if((h=this.htmlArr[o])&&h.label==f)for(var c=o+1;c<=this.htmlArr.length-1;c++)if(objX=this.htmlArr[c],objX&&h.lv==objX.lv&&h.label!=objX.label.substr(1)){""!=objX.upHtml||objX.nIndex-1>h.nIndex?(objX.upHtml+="</"+h.label+">",a=!0,n=""):(h.label="",h.html="",h.lv--,n="",this.reairHtmlLv(h,-1));break}}a&&this.parseHTML(this.printHTML())}else""!=n&&this.lv;for(o=0;o<=this.htmlArr.length-1;o++)if(h=this.htmlArr[o]){if(h.nIndex=o,2==h.tagpair&&"/"==h.label.substr(0,1)){var m=h.label.substr(1),r=!0;if(null!=(b=this.upFindSameLvObj(o,h))&&(h.label=="/"+b.label?(h.start=b.nIndex,b.end=h.nIndex,r=!1,this.setNoFindDom(b.nIndex,h.nIndex),t&&console.log("找(LV1)",{label:h.label,lvtolv:b.nIndex+"-"+h.nIndex})):0==this.lv||1==b.lv&&1==h.lv?1==r&&(s="",t&&(s="\x3c!--xiyueta提示: 原标签(LV) "+h.label+" 替换成 /"+b.label+"--\x3e"),h.html="</"+b.label+">"+s,l+=2,i+=2,r=!1,this.setNoFindDom(b.nIndex,h.nIndex),t&&console.log("找(LV2)",{label:h.label})):t&&console.log("找(LV Else 没找到，交给下面找同名)",{label:h.label})),1==r)if(null==(e=this.upFindSameNameObj(o,h)))h.html=t?"\x3c!---xiyueta提示: 有多余结束标签 "+h.label+" --\x3e":"",i++,l++,this.setNoFindDom(h.nIndex,h.nIndex),t&&console.log("找名称(出错)",{label:h.label});else if(s="",r)if(1==r){t&&(e.html+="\x3c!---xiyueta提示: 有问题标签开始位置--\x3e",h.html="\x3c!---xiyueta提示: 有问题标签结束位置--\x3e"+h.html,console.log(" 找名称(有问题注意)",{label:h.label,lvTolv:e.nIndex+"-"+h.nIndex})),this.setNoFindDom(e.nIndex,h.nIndex);var b=e.lv-h.lv,d="";this.reairHtmlLv(h,b);for(u=e.nIndex+1;u<=h.nIndex;u++){var x=this.htmlArr[u];if("/"!=x.label.substr(0,1)&&2==x.tagpair){var g=!1;for(p=x.nIndex+1;p<=h.nIndex;p++){var y=this.htmlArr[p];if(2==y.tagpair&&"/"==y.label.substr(0,1)&&y.lv==x.lv){g=!0;break}}0==g&&(d+="</"+x.label+">",t&&(d+="\x3c!--xiyueta提示: 追加 /"+x.label+" --\x3e"),i++,l++)}}h.upHtml+=d}else t&&console.log("找名称(Else 没找到，不处理)",{label:h.label})}"/"==h.label.substr(0,1)&&1==h.lv&&t&&console.log("  最后块是第一层就重置",{label:h.label,lv:h.lv})}var v=n.split(",");if(v.length>l){d="";for(o=i+1;o<=v.length-1;o++)""!=v[o]&&(s="",t&&(s="\x3c!--xiyueta提示: 追加 /"+v[o]+" --\x3e"),d="</"+v[o]+">"+s+d,i++,l++);this.htmlArr[this.htmlArr.length-1].downHtml+=d}var A=i==l?!0:!1;return{lv:this.lv,err:i,repair:l,state:A,errList:n=","==n?"":n}},_XIYUETA.prototype.setNoFindDom=function(t,e){for(var l=t;l<=e;l++){var r=this.htmlArr[l];r&&(r.isFindDom="no")}return null},_XIYUETA.prototype.upFindSameLvObj=function(t,e){for(var l=t-1;0<=l;l--){var r=this.htmlArr[l];if(r&&"no"!=r.isFindDom&&e.lv==r.lv)return r}return null},_XIYUETA.prototype.upFindSameNameObj=function(t,e){for(var l=t-1;0<=l;l--){var r=this.htmlArr[l];if(r&&"no"!=r.isFindDom&&e.label=="/"+r.label)return r}return null},_XIYUETA.prototype.reairHtmlLv=function(t,e){for(var l=t.nIndex;l<=this.htmlArr.length-1;l++)(t=this.htmlArr[l])&&(t.lv+=e)},xiyueta.fullurl=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.getUrlFileName=function(t,e){return _xyt.common.getUrlFileName(t,e)},xiyueta.fn.extend({swap:function(t){return _xyt.swap(this.selector,t),this},item:function(t){return _xyt.getItem(this.selector,this.x,this.y,t)},config:function(t){t=_xyt.setConfig(t);return null==t?this:t},charset:function(t){return null==t?_xyt.charset():(_xyt.charset(t),this)},handle:function(t,e,l){return _xyt.getHandleSrc(this.selector,t,e,l)},replace:function(t,e,l){return _xyt.replace(this.selector,t,e,l)},clear:function(){return this},repair:function(t){return _xyt.repairHTML(t)}});var _XIYUETACSS=function(t){"use strict";this.cssSource=t=null==t?"":t,this.cssArr=[],this.common=new XiyuetaCommon,this.config={parentdir:"../",imagesdir:"images/"},this.cssParse=function(t){null!=t&&(this.cssSource=t,this.cssArr=[]);for(var e,l="",r="",s="",i="",n=!1,a=!1,h=!1,o=!1,u=!1,f=0,p=0;p<=this.cssSource.length-1;p++)e=l,l=this.cssSource.substr(p,1),n?(s+=l,h?"/"==l&&"*"==e&&(n=h=!1,this.cssArr.push({lv:1,label:"/*",upHtml:i,html:s}),i=s=""):a&&"*"==l&&"/"==e?h=!0:o?!u||";"!=l&&"\n"!=l?" "==l&&a?"@charset "==s.toLowerCase()?a=!(u=!0):"@font-face "==s.toLowerCase()&&(o=!1):"{"==l&&("@font-face "==s.toLowerCase()?o=!1:(o=n=a=!1,this.cssArr.push({lv:1,label:r.toLowerCase().trim(),upHtml:i,html:s}),f++,i=s="")):(o=n=a=u=!1,this.cssArr.push({lv:1,label:r.toLowerCase().trim(),upHtml:i,html:s}),i=s=""):"{"==l&&a?a=!1:"}"==l&&(n=a=!1,this.cssArr.push({lv:f+1,label:r.toLowerCase().trim(),upHtml:i,html:s}),i=s=""),a&&(" "!=l||" "!=e&&","!=e)&&(r+=l)):" "!=l&&";"!=l&&"\n"!=l?"}"==l&&1==f?(this.cssArr.push({lv:f,label:"}",upHtml:i,html:"}"}),i=s="",f--):(i=s,a=n=!0,"@"==(r=s=l)&&(o=!0)):s+=l;""!=s&&this.cssArr.push({lv:f,label:"",upHtml:"",html:s})},this.handleLabelParam=function(t,e,l){if(null==e&&(e="[All]"),null==l&&null!=t[e])return t[e];var r,s="";-1!=e.indexOf("|")&&(e=(r=e.split("|"))[0],s=r[1],""==e&&(e="[All]"));for(var i=!1,n="",a="",h=!1,o="",u=!1,f=!0,p=0,c=!1,m="",b=t.html.indexOf("{")+1;b<=t.html.length-1;b++){var d=t.html.substr(b,1);if(h)if(u){if(0!=(c=1==c&&")"==d?!1:c)||d!=o&&"}"!=d&&b!=t.html.length-1)a+=d,"("==d&&(c=!0);else if(t[n=n.toLowerCase().trim()]=a,u=h=!1,o="",e==n||"[All]"==e)if(null==l){if("url"!=s)return a;""!=(a=this.getSetCssBg(a))&&(""!=m&&(m+="\n"),m+=a)}else{var x=p,g=p+a.length;f&&(x++,g++);var y=t.html.substr(0,x),x=t.html.substr(g);if("url"!=s){v=y+l+x;return t.html=v,t[n]=l,t}g=this.getSetCssBg(a,l);if(""!=g){""!=m&&(m+="\n"),m+=g;var v=y+g+x;return t.html=v,b=(y+(t[n]=g)).length,t}}}else" "!=d&&(o=";",p=b,f=!(u=!0),a=d);else i?":"==d?(h=!(i=!1),o=a=""):" "!=d&&(n+=d):" "!=d&&(i=!0,n=d)}return null!=l&&(t.html=t.html.replace("{","{"+e+":"+l+";")),m},this.getSetCss=function(t,e,l){t=(t=null==t?"[All]":t).trim();for(var r=0;r<=this.cssArr.length-1;r++){var s=this.cssArr[r];if(null!=s&&(t==s.label||"[All]"==t))return null==e?s.html:this.handleLabelParam(s,e,l)}},this.getSetCssBg=function(t,e){if(-1==t.indexOf(","))return this.handleCssBg(t,e);for(var l=t.split(","),r="",s=0;s<l.length;s++){var i=l[s];""!=r&&(r+=","),r+=i=this.handleCssBg(i,e)}return r},this.handleCssBg=function(t,e){if(null==t)return"";if(null==e){if(-1==t.indexOf("(")||-1==t.indexOf(")"))return null==e||"dir="==e.substr(0,4)||"server="==e.substr(0,7)?"":t;if(-1==t.toLowerCase().indexOf("url"))return null==e||"dir="==e.substr(0,4)||"server="==e.substr(0,7)?"":t}for(var l="",r=!1,s=!1,i="",n=-1,a=0;a<=t.length-1;a++){var h=t.substr(a,1);if(r)if(s){if(i==h){var o=t.substr(n,a-n);if(null!=e)if("server="==e.substr(0,7)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+this.common.fullHttpUrl(e.substr(7),o)+t.substr(a)}else if("dir="==e.substr(0,4)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+e.substr(4)+this.common.getUrlFileName(o)+t.substr(a)}else-1==o.indexOf("data:")&&(o=t.substr(0,n)+e+t.substr(a));return o}}else""!=h&&('"'==h||"'"==h?(s=!0,i=h,-1==n&&(n=a+1)):(s=!0,i=")",-1==n&&(n=a)));else if("("==h){if("url"==l.trim().toLowerCase().substr(-3,3))r=!0;else if(null==e)return""}else l+=h}return t},this.getSetAllCss=function(t,e,l){for(var r=","+(t=(t=null==t?"[All]":t).trim())+",",s="",i=0;i<=this.cssArr.length-1;i++){var n,a,h=this.cssArr[i];null!=h&&(n=","+h.label+",",h.label,-1==n.indexOf(r)&&"[All]"!=t||(null==e||"object"==typeof(a=this.handleLabelParam(h,e,l))?(""!=s&&(s+="\n"),s+=h.html):a&&(""!=s&&(s+="\n"),s+=a)))}return s},this.handleCssCharset=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var l=this.cssArr[e];if(null!=l)if("@charset"==l.label)return null!=t?(l.html='@charset "'+t+'";',""):l.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase()}return""},this.handleCssBackGround=function(t,e){null==e&&(e="");var l="";xiyuetaCSS().allcss("|url","server="+e),l=(l=xiyuetaCSS().allcss("|url")).replace(/,/g,"\n"),xiyuetaCSS().allcss("|url","dir="+this.config.parentdir+this.config.imagesdir);for(var r,s=l.split("\n"),i="",n=0;n<=s.length-1;n++)""!=(r=s[n])&&(""!=i&&(i+="[,]"),i+=(r=-1!=r.indexOf("?")?r.substr(0,r.indexOf("?")):r)+"[|]"+this.config.parentdir+this.config.imagesdir+xiyueta.getUrlFileName(r));return i},this.setConfig=function(t){if(null==t)return this.config;if(null!=t.imagesdir){this.config.imagesdir=t.imagesdir;for(var e=t.cssdir.split("/"),l="",r=0;r<=e.length-2;r++)l+="../";this.config.parentdir=l}null!=t.parentdir&&(this.config.parentdir=t.parentdir)},this.printCss=function(t){for(var e="",l=0;l<=this.cssArr.length-1;l++){var r,s=this.cssArr[l];null!=s&&(r=s.upHtml+s.html,"zip"==t?r="/*"==s.label?"":r.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(r=r.trim()+"\n"),""!=r&&(e+=r))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.cssArr)}},_xytcss=new _XIYUETACSS,xiyuetaCss=function(t,e,l){return new xiyuetaCss.fn.init(t,e,l)};xiyuetaCss.fn=xiyuetaCss.prototype={length:1,selector:"",docList:"",x:null,y:null},xiyuetaCss.extend=xiyuetaCss.fn.extend=function(){var t,e,l,r=arguments[0]||{},s=1,i=arguments.length;for(s===i&&(r=this,s--);s<i;s++)if(null!=(t=arguments[s]))for(e in t)l=t[e],"__proto__"!==e&&r!==l&&void 0!==l&&(r[e]=l);return r},(init=xiyuetaCss.fn.init=function(t,e,l){this.length=0,this.selector=t,this.x=e,this.y=l,null==this.selector&&(this.selector="[All]")}).prototype=xiyuetaCss.fn,(xiyuetaCSS=$xytcss=$css=xiyuetaCss).fn.extend({css:function(t,e){return null!=e?(_xytcss.getSetCss(this.selector,t,e),this):_xytcss.getSetCss(this.selector,t)},allcss:function(t,e){return _xytcss.getSetAllCss(this.selector,t,e)},handlecssimg:function(t,e){return _xytcss.handleCssBackGround(t,e)},charset:function(t){return _xytcss.handleCssCharset(t)},parse:function(t){return _xytcss.cssParse(t),this},config:function(t){return _xytcss.setConfig(t)},print:function(t){return _xytcss.printCss(t)},debug:function(t){return _xytcss.debug(t)}}),XiyuetaCommon.prototype.handleFileUrl=function(t){var e="",l=t.indexOf("://");for(-1!=l&&(e=t.substr(0,l+3),t=t.substr(l+3));-1!=t.indexOf("//");)t=t.replace(/\/\//g,"/");if(-1!=(t=-1!=t.indexOf("/./")?t.replace(/\/.\//g,"/"):t).indexOf("/../")){for(var r=[],s=0,i=t.split("/"),n=0;n<=i.length-1;n++)".."==(a=i[n])?(0==s?s=n-1:--s,0<=s&&delete r[s]):(r.push(a),s=0);for(t="",n=0;n<=r.length-1;n++){var a=r[n];null!=r[n]&&(""!=t&&(t+="/"),t+=r[n])}}return e+t},XiyuetaCommon.prototype.fullHttpUrl=function(t,e){if(null==e)return"";if(""==(e=e.replace(/\\/g,"/"))||"./"==e)return"";var l="",r="",s="",i=t.indexOf("://");return-1!=i&&(l=t.substr(0,i+3),i=(t=t.substr(i+3)).lastIndexOf("/"),s=l+t.substr(0,i+1),i=t.indexOf("/"),r=l+t.substr(0,i+1)),"//"==e.substr(0,2)?e="http:"+e:-1==e.indexOf("://")&&(e="/"==e.substr(0,1)?r+e:s+e),this.handleFileUrl(e)},XiyuetaCommon.prototype.getUrlFileName=function(t,e){if(null==e&&(e=""),""==t||null==t)return"";var l=(t=t.replace(/\\/g,"/").trim()).split("/"),r=l[l.length-1],s="",t="";return-1!=(r=-1!=r.indexOf("?")?r.substr(0,r.indexOf("?")):r).indexOf(".")&&(l=r.lastIndexOf("."),s=r.substr(0,l),t=r.substr(l+1).toLowerCase()),"image"==e?""==t?r+=".jpg":-1=="|bmp|jpg|jpeg|gif|png|".indexOf("|"+t+"|")&&(r=s+".jpg"):"css"==e?""==t?r+=".css":-1=="|css|".indexOf("|"+t+"|")&&(r=s+".css"):"js"==e?""==t?r+=".js":-1=="|js|".indexOf("|"+t+"|")&&(r=s+".js"):r=s+"."+t,r},XiyuetaCommon.prototype.setFileNameA=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"pie")).replace(/\//g,"la")).replace(/:/g,"maohao")).replace(/\*/g,"xin")).replace(/\?/g,"wen")).replace(/"/g,"yinhao")).replace(/</g,"zou")).replace(/>/g,"you")).replace(/\|/g,"heng")).replace(/\./g,"juhao")).replace(/,/g,"douhao")).replace(/&nbsp;/g," ")).replace(/&quot;/g,"shuang")).replace(/\n/g,"")},XiyuetaCommon.prototype.checkUrl=function(t){return!!/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i.test(t=null==t?"":t)},XiyuetaCommon.prototype.getDomain=function(t){if("string"!=typeof t)return"";if(-1<t.indexOf("//")){var e=t.indexOf("//",1),e=t.substring(e+1,t.length),t=e.indexOf("/",1);return e=e.substring(1,t)}return""},_XIYUETA.prototype.cutLabel=function(t,e){for(var l="",r=0;r<=this.htmlArr.length-1;r++)null!=(p=this.htmlArr[r])&&("/style"==p.label?l+=p.upHtml:"link"==p.label&&"stylesheet"==p.rel&&(l+=p.content));var s="*,body,",i=-1;if(""!=(c=this.getDocument(t))){var n=c=c.replace(/,/,""),a=c;-1!=c.indexOf("|")&&(n=(o=c.split("|"))[0],a=o[1]);for(var h,r=n;r<=parseInt(a)-1;r++)null!=(p=this.htmlArr[r])&&"/"!=p.label.substr(0,1)&&(-1==i&&(p.label,i=p.lv),i+1==p.lv&&p.label,i+2==p.lv&&p.label,i+3==p.lv&&p.label,s+=p.label+",",null!=(h=this.handleLabelParam(p,"id"))&&(s+="#"+h.toLowerCase()+","),null!=(h=this.handleLabelParam(p,"class"))&&(s+="."+h.toLowerCase().replace(/ /g,",.")+","));for(var o=s.split(","),s="",r=0;r<=o.length-1;r++)-1==(","+s+",").indexOf(","+o[r]+",")&&(""!=s&&(s+=","),s+=o[r]);var u="",f=new _XIYUETACSS;f.cssParse(l);for(var p,r=0;r<=f.cssArr.length-1;r++)if(null!=(p=f.cssArr[r]))for(var c=","+p.label+",",m=(p.label,0);m<=o.length-1;m++)-1==c.indexOf(","+o[m]+",")&&-1==c.indexOf(","+o[m]+" ")||-1==("\n"+u+"\n").indexOf("\n"+p.html+"\n")&&(u+=p.html+"\n");xiyuetaCSS().parse(u),""!=(u=xiyuetaCSS().print("zip"))&&(u="<style>"+u+"\n</style>\n");n=xiyueta(t).html(null,"all");this.parseHTML(n);n=u+this.printHTML("format")}return n},xiyueta.fn.extend({cutlabel:function(t){return _xyt.cutLabel(this.selector,t)}});var _XIYUETAASP=function(t){"use strict";this.aspSource=t=null==t?"":t,this.aspArr=[],this.common=new XiyuetaCommon,this.config={},this.phpPublicObjectList="",this.phpPublicFunList="",this.aspParse=function(t){null!=t&&(this.aspSource=t,this.aspArr=[]);for(var e="",l="",r="",s="",i="",n="",a="",h=!1,o=!1,u=0,f="",p=0,c=this.aspSource.split("\n"),m=0;m<=c.length-1;m++){for(var b,d,x=0;x<=c[m].length;x++)if(l=e,e=c[m].substr(x,1),r=c[m].substr(x+1,1),0==h)"%"==e&&"<"==l&&(h=!0,this.aspArr.push({lv:u,type:"<asp>",label:"<%",upHtml:a,html:"<%",tagpair:2}),s=a=n="",u++);else if("%"==e&&">"==r)h=!1,u--,this.aspArr.push({lv:u,type:"<asp>",label:"%>",upHtml:a,html:"%>",tagpair:2}),s=a=n="",x++,l=e,e=c[m].substr(x,1),r=c[m].substr(x+1,1);else if(n+=e,'"'==e||""!=f)'"'==e&&p++,p%2==0&&'"'!=r?(f+=e,this.aspArr.push({lv:u,type:"<str>",label:s,upHtml:a,html:f,tagpair:2}),p=0,s=a=n=f=""):f+=e;else if("("==e)u++,this.aspArr.push({lv:u,type:"<(>",label:e,upHtml:a,html:n,tagpair:2}),s=a=n="";else if(")"==e)this.aspArr.push({lv:u,type:"<)>",label:e,upHtml:a,html:n,tagpair:2}),s=a=n="",u--;else if(-1!="|&|,|+|-|*|/|=|:|>|<|".indexOf("|"+e+"|"))this.aspArr.push({lv:u,type:"<fuhao>",label:e,upHtml:a,html:n,tagpair:1}),"="!=e&&">"!=e||">"!=(d=this.aspArr[this.aspArr.length-2]).label&&"<"!=d.label||(d.label+=e,d.html+=" "+e,this.aspArr.pop()),s=a=n="";else{if("'"==e){this.aspArr.push({lv:u,type:"<note>",label:e,upHtml:n,html:c[m].substr(x+1),tagpair:1}),s=a=n="";break}""==e||" "==e||"\t"==e||-1=="' ()+-*/=><&,".indexOf(r)&&x!=c[m].length?" "!=e&&"\t"!=e&&(s+=e.toLowerCase()):(s+=e.toLowerCase(),i=-1!="0123456789".indexOf(s.substr(0,1))?"<int>":"("==r||-1!=",dim,if,then,elseif,else,end,function,select,case,call,for,to,next,set,nothing,do,while,loop,and,true,false,vbcrlf,in,class,new,".indexOf(","+s+",")||-1!=s.indexOf(".")?"<fun>":"<var>",this.aspArr.push({lv:u,type:i,label:s,upHtml:a,html:n,tagpair:2}),"function"==s?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(u--,b.lv--,b.label+="function",b.html+=" function",this.aspArr.pop()):u++:"if"==s?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(u--,b.lv--,b.label+="if",b.html+=" if",this.aspArr.pop()):u++:"else"==s||"elseif"==s||"then"==s?(this.aspArr[this.aspArr.length-1].lv--,"else"==s&&"case"==(b=this.aspArr[this.aspArr.length-2]).label&&(b.lv,b.label+="else",b.html+=" else",this.aspArr.pop())):"select"==s?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(u--,b.lv--,b.label+="select",b.html+=" select",this.aspArr.pop(),o&&(o=!1,u--,b.lv--)):u++:"case"==s?"select"==(d=this.aspArr[this.aspArr.length-2]).label?(d.label+="case",d.html+=" case",this.aspArr.pop()):o?this.aspArr[this.aspArr.length-1].lv--:(u++,o=!0):"class"==s?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(u--,b.lv--,b.label+="class",b.html+=" class",this.aspArr.pop()):u++:"each"==s?"for"==(d=this.aspArr[this.aspArr.length-2]).label&&(d.label+="each",d.html+=" each",this.aspArr.pop()):"while"==s?("do"==(d=this.aspArr[this.aspArr.length-2]).label&&(d.label+="while",d.html+=" while",this.aspArr.pop()),u++):"loop"==s?(u--,this.aspArr[this.aspArr.length-1].lv--):"for"==s?u++:"next"==s&&(u--,this.aspArr[this.aspArr.length-1].lv--),i=s=a=n="")}m+1<c.length&&this.aspArr.push({lv:u,type:"<br>",label:"\n",upHtml:"",html:"\n",tagpair:1})}},this.tophp=function(t){for(var e,l,r="",s="",i=[],n=[],a=[],h=0,o=!1,u=!1,f="",p="",c="",m=!1,b=-1,d=-1,x=!1,g=-1,y="",v=",",A=","+this.phpPublicFunList,L=","+this.phpPublicObjectList,O=-1,_=!1,C=0;C<=this.aspArr.length-1;C++)O==C&&(":"==(i=this.aspArr[C]).label?(s+=":",C++):s+=":",O=-1),0<C&&(n=this.aspArr[C-1]),i=this.aspArr[C],a=[],C<this.aspArr.length&&(a=this.aspArr[C+1]),"<br>"==n.type&&(s+=this.common.copyStr("    ",i.lv+h)),"<%"==i.label?(s+="<?PHP",h--):"%>"==i.label?s+="?>":"<br>"==i.type?s+="\n":"<note>"==i.type?s+="//"+i.html:"<var>"==i.type?(e=!0,-1!=A.indexOf(","+i.label+",")?"class"==n.label?(e=!1,s+=i.label+"{"):"new"==n.label?s+=i.label+"()":"="==a.label?(s+="return ",C++):s+=i.label:s+="$"+i.label,"<br>"==a.type&&""==c&&e&&(s+=";")):"<fuhao>"==i.type||"<int>"==i.type||"<(>"==i.type||"<)>"==i.type?o&&"="==i.label?s+="==":"&"==i.label?s+=".":"("==i.label?b==i.lv?s+="[":s+="(":")"==i.label?(b==i.lv?(s+="]",b=-1):g==i.lv?(r+=s+","+y+")",g=-1,y=s=""):d==i.lv?(d=-1,s+="){"):s+=")","<br>"!=a.type&&"<note>"!=a.type||(s+=";")):","==i.label?m?(s+="]=",m=!1):g==i.lv?(y=s,s=""):u?(s+=";","<br>"!=a.type&&"<note>"!=a.type||(u=!1)):s+=",":":"==i.label?s+=";":"<>"==i.label?s+="!=":"<int>"==i.type?(s+=i.label,"<br>"!=a.type&&"<note>"!=a.type||-1!=O||(s+=";")):s+=i.label:"<str>"==i.type?(s+=i.html,"<br>"!=a.type&&"<note>"!=a.type||-1!=O||(s+=";")):"<fun>"==i.type&&("response.write"==i.label?s+="echo":"nothing"==i.label?s+="null":"and"==i.label?s+=" && ":"ubound"==i.label?s+="count":"split"==i.label?(v+=this.aspArr[C-2].label+".add,",r+=s+="explode(",s="",g=i.lv+1,C++):"new"==i.label?s+="new ":"function"==i.label?(d=this.aspArr[C+2].lv,s+=i.label+" ",-1==A.indexOf(","+a.label+",")&&(A+=a.label+",")):"endfunction"==i.label?s+="}":"if"==i.label?(s+=i.label,"("!=a.label&&(s+="("),o=!0):"elseif"==i.label?(s+="}else if","("!=a.label&&(s+="("),o=!0):"then"==i.label?(")"!=n.label&&(s+=")"),s+="{",o=!1):"else"==i.label?s+="}else{":"endif"==i.label?s+="}":"selectcase"==i.label?(s+="switch ","("!=a.label&&(s+="("),c="selectcase"):"endselect"==i.label?(s+="}",_&&(r+=this.common.copyStr("    ",i.lv+1)+"break;\n"),_=!1):"caseelse"==i.label?(s+="default ",_&&(r+=this.common.copyStr("    ",i.lv)+"break;\n"),_=!0,O=C+1):"case"==i.label?(s+=i.label+" ",_&&(r+=this.common.copyStr("    ",i.lv)+"break;\n"),_=!0,O=C+2):"vbcrlf"==i.label?s+='"\\n"':"createobject"==i.label?(0<C-1&&(v+=this.aspArr[C-2].label+".add,"),C+1<this.aspArr.length&&'"scripting.dictionary"'==this.aspArr[C+2].html.toLowerCase()&&(s+="array();",C+=3)):-1!=v.indexOf(","+i.label+",")?(s+="$"+i.label.substr(0,i.label.indexOf("."))+"[",","==this.aspArr[C+2].label&&(m=!0)):-1!=v.indexOf(","+i.label+".")?(s+="$"+i.label,b=a.lv):"dowhile"==i.label?(s+="while","("!=a.label&&(s+="("),x=!0):"loop"==i.label?s+="}":"class"==i.label?(s+="class ",-1==A.indexOf(","+a.label+",")&&(A+=a.label+","),-1==L.indexOf(","+a.label+",")&&(L+=a.label+",")):"endclass"==i.label?s+="}":"foreach"==i.label?(l=this.aspArr[C+1],s+="foreach($"+this.aspArr[C+3].label+" as $key=>$"+l.label+"){",C+=3):"for"==i.label?(s+=i.label,"("!=a.label&&(s+="("),f="for",p=a.label):"for"==f&&"to"==i.label?(l=this.aspArr[C+1],"ubound"==a.label?s+=";$"+p+"<":s+=";$"+p+"<=",f="forto"):"next"==i.label?s+="}":"dim"==i.label?u=!0:-1!=i.label.indexOf(".")?s+="$"+i.label.replace(/\./g,"->"):-1==",call,set,".indexOf(","+i.label+",")&&(s+=i.label),"<br>"==a.type&&-1==",endfunction,then,endif,next,else,endselect,endclass,".indexOf(","+i.label+",")&&0==x&&(s+=";")),"forto"!=f||"<br>"!=a.type&&"<note>"!=a.type||"to"==i.label?"selectcase"!=c||"<br>"!=a.type&&"<note>"!=a.type||"selectcase"==i.label?!x||"<br>"!=a.type&&"<note>"!=a.type||(")"!=n.label&&(s+=")"),s+="{",o=x=!1):(c="",")"!=n.label&&(s+=")"),s+="{"):("<note>"==a.type&&(s+=";"),s+="$"+p+"++",p=f="",")"!=n.label&&(s+=")"),s+="{"),"<br>"==i.type&&(r+=s,s="",u=!1);return r+s},this.aspBeautify=function(){for(var t,e=0;e<=this.aspArr.length-1;e++)"class"==this.aspArr[e].label&&e<this.aspArr.length&&(t=this.aspArr[e+1],this.phpPublicObjectList+=t.label+",",this.phpPublicFunList+=t.label+",")},this.debug=function(){console.log(this.aspArr)}},_xytasp=new _XIYUETAASP;xiyuetaASP=$xytasp=$asp=function(t){return{parse:function(t){return _xytasp.aspParse(t),this},beautify:function(){return _xytasp.aspBeautify(t),this},tophp:function(t){return _xytasp.tophp(t)},debug:function(t){return _xytasp.debug(t)}}};