/*! xiyueta v1.3.3 | Author xiyueta Adream | MIT License By http://xiyueta.com/  */
String.prototype.trim=function(){return(this+"").replace(/(^\s*)|(\s*$)/g,"")};var _CONSOLE=function(){this.log=function(t,e){if("object"==typeof t){var s,r;for(s in t)-1==(t[s]+"").indexOf("function")&&(r=(r=t[s]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(r="object"==typeof t[s]?this.log(t[s]):r)?response.write(s+"<br>"):response.write(s+":  "+r+"<br>"))}else"string"==typeof e&&(t+=" "+e),response.write(t+"<br>")}},console=new _CONSOLE;function XiyuetaCommon(){this.copyStr=function(t,e){for(var s="",r=1;r<=e;r++)s+=t;return s},this.bystesLength=function(t){for(var e=0,s=0;s<t.length;s++)255<t.charCodeAt(s)?e+=2:e++;return e},this.getFileSize=function(t){return t<1048576?(t/1024).toFixed(2)+"KB":1048576==t?"1MB":1048576<t&&t<1073741824?(t/1048576).toFixed(2)+"MB":1048576<t&&1073741824==t?"1GB":1073741824<t&&t<1099511627776?(t/1073741824).toFixed(2)+"GB":"文件超过1TB"},this.isArray=function(t){return"object"==typeof t&&t.constructor==Array}}var _XIYUETA=function(t){"use strict";this.htmlSource=t=null==t?"":t,this.htmlArr=[],this.lv=0,this.common=new XiyuetaCommon,this.config={version:"1.3.3",httpurl:"",serverurl:"/api/downWeb/default.asp",jsdir:"js/",cssdir:"css/",imagesdir:"images/"},this.tplConfig={type:"xiyuetacms",item:4},this.parseHTML=function(t){null!=t&&(this.htmlSource=t,this.htmlArr=[]);for(var e="",s="",r="",l="",i=!1,n=!1,h=!1,a=!1,o=!1,u=0,f=-1,p=0;p<=this.htmlSource.length-1;p++){var m,c,d,e=this.htmlSource.substr(p,1);i?(r+=e,a?">"==e&&"--\x3e"==r.substr(-3,3)&&(h=i=a=!1,this.htmlArr.push({_index:++f,lv:u+1,label:"!--",upHtml:l,downHtml:"",html:r,tagpair:1}),l=r=""):n&&"\x3c!--"==r?a=!0:o?">"==e&&"%>"==r.substr(-2,2)&&(h=i=o=!1,this.htmlArr.push({_index:++f,lv:u+1,label:"<%",upHtml:l,downHtml:"",html:r,tagpair:1}),l=r=""):n&&"<%"==r?o=!0:-1!=" \n\t".indexOf(e)&&n?n=!1:">"==e&&(i=n=!1,m=2,"/"==s.substr(0,1)?h=!0:(u++,"/"!=s.substr(-1,1)&&-1=="|br|hr|img|link|meta|param|input|!doctype|rect|line|col|".indexOf("|"+s.toLowerCase()+"|")||(h=!0,m=1,s=s.replace(/\//g,"").trim())),d=s.toLowerCase(),this.htmlArr.push({_index:++f,lv:u,label:d,upHtml:l,downHtml:"",html:r,tagpair:m}),l=r="",h&&(u--,h=!1),"script"==d?(c=this.htmlSource.substr(p+1).toLowerCase().indexOf("<\/script>"),r=this.htmlSource.substr(p+1,c),p+=c):"style"==d?(c=this.htmlSource.substr(p+1).toLowerCase().indexOf("</style>"),r=this.htmlSource.substr(p+1,c),p+=c):"textarea"==d?(c=this.htmlSource.substr(p+1).toLowerCase().indexOf("</textarea>"),r=this.htmlSource.substr(p+1,c),p+=c):"pre"==d&&(c=this.htmlSource.substr(p+1).toLowerCase().indexOf("</pre>"),r=this.htmlSource.substr(p+1,c),p+=c)),n&&(s+=e)):"<"==e?(d=this.htmlSource.substr(p+1,1).toLowerCase(),-1!="abcdefghijklmnopqrstuvwxyz!/%?".indexOf(d)?(l=r,r=e,h=!(n=i=!0),s=""):r+=e):r+=e}""!=r&&this.htmlArr.push({_index:++f,lv:u,label:"",upHtml:"",downHtml:"",html:r}),this.lv=u},this.handleLabelParam=function(t,e,s){if(null==s){if(null!=t[e])return t[e]}else s=s.toString();for(var r=!1,l="",i="",n=!1,h="",a=!1,o=!0,u=0,f=0,p=!1,m=t.label.length+1;m<=t.html.length-1;m++){var c,d=t.html.substr(m,1);if(n)if(a)if(p)">"==d&&(p=!1),i+=d;else if(d==h||">"==d){var b,l=l.toLowerCase();if(t[l]=i,a=n=!1,h="",e==l)return null==s?i:(""==s?(g=t.html.substr(0,f-1),x=t.html.substr(m+1),t.html=g+x):(v=(b=u)+i.length,o&&(b++,v++),g=t.html.substr(0,b),x=t.html.substr(v),t.html=g+s+x),t[l]=s,t);else if(">"==d&&null!=s)return""!=s&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+s+'">'),t[e]=s,!0}else"<"==d&&(p=!0),i+=d;else'"'==d||"'"==d?(h=d,u=m,o=a=!0):" "!=d&&(h=" ",u=m,i=d,o=!(a=!0));else if(">"==d){if(null!=s)return""!=s&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+s+'">'),t[e]=s,!0;if(e==(l=l.trim()))return null!=s&&(c=f+l.length,g=t.html.substr(0,c),x=t.html.substr(c),t.html=g+'="'+s+'"'+x),""}else if(r)if("="==d){if(-1!=(l=l.trim()).indexOf(" ")){var g,x,v=l.split(" ");if(e==(l=v[0]))return null!=s&&(g=t.html.substr(0,c),x=t.html.substr(c),t.html=g+'="'+s+'"'+x),""}n=!(r=!1),h=i=""}else l+=d;else" "!=d&&(r=!0,l=d,f=m)}},this.getDocument=function(t,e,s,r){if(null==t&&(t=""),null==r&&(r=!1),0==this.htmlArr.length)return console.log("%c 需要先解析一段html文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf(",")){for(var l="",i=t.split(","),n=0;n<=i.length-1;n++)l+=a=this.getDocument(i[n],e,s,r);for(var h="",i=l.split(","),n=0;n<=i.length-1;n++){var a=i[n];-1==(","+h+",").indexOf(","+a+",")&&(""!=h&&(h+=","),h+=a)}return h=""!=h?","+h:h}if(""==(t=t.trim()))return"";null==e&&(e=0),null==s&&(s=this.htmlArr.length-1);var o=-1.1,u=-1.1,f=-1.1,p=-1.1,m="",c=!1,d="",b="",g="",x="",v="",l="";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var y=!1,l="",n=0;n<=t.length;n++){a=t.substr(n,1);0!=y||"'"!=a&&'"'!=a&&"("!=a&&")"!=a?1==y&&(" "==a?a="-Space-":"'"!=a&&'"'!=a&&"("!=a&&")"!=a||(y=!1,"'"!=a&&'"'!=a||(a=""))):(y=!0,"'"!=a&&'"'!=a||(a="")),l+=a}t=l}var L,A,O,_,w=t.indexOf(" ");if(-1!=w&&(d=t.substr(w+1).trim(),t=t.substr(0,w)),-1!=(w=t.indexOf(":"))&&(A=O="",L=(a=t.substr(w+1)).indexOf("("),_=a.indexOf(")"),-1!=L&&-1!=_?(O=a.substr(0,L).toLowerCase(),_=(A=a.substr(L+1)).indexOf(")"),("'"==(C=(A=A.substr(0,_).replace(/-Space-/g," ").trim()).trim()).substr(0,1)&&"'"==C.substr(-1,1)||'"'==C.substr(0,1)&&'"'==C.substr(-1,1))&&(A=C.substr(1,C.length-2))):O=a.toLowerCase(),"first"==O?o=0:"last"==O?o=-1:"even"==O?u=1:"odd"==O?u=0:"eq"==O?(o=0,(o=""!=A?parseInt(A):o)+""=="NaN"&&(o=-.1,t="")):"gt"==O?""!=A&&(f=parseInt(A)):"lt"==O?""!=A&&(p=parseInt(A)):"header"==O?c=!0:"contains"==O?m=A:console.log(t,"没有动作 "+O),""==(t=t.substr(0,w))&&-.1!=o&&(t="*")),-1!=(w=t.indexOf("["))&&(_=(a=t.substr(w+1)).indexOf("]"),-1==(a=a.substr(0,_)).indexOf("=")?(b=a,g="*"):(b=(_=a.split("="))[0],g=_[1].replace(/-Space-/g," "),_=b.substr(b.length-1),-1!="!^$*~|".indexOf(_)&&(b=b.substr(0,b.length-1),x=_)),-1!=b.indexOf("|")&&(b=(H=b.split("|"))[0],"NOUL"==H[1]&&(g=g.toLowerCase(),v=H[1])),""==(t=t.substr(0,w))&&(t="*")),"#"==t.substr(0,1)){if(0<o)return"";o=0}var C,H={type:"",name:"",nFocus:-1.1};if(0<=(w=t.substr(1).lastIndexOf("."))?(t=(C=t).substr(0,w+1),H={type:".",name:C.substr(w+2).toLowerCase()}):0<=(w=t.substr(1).lastIndexOf("#"))&&(t=(C=t).substr(0,w+1),H={type:"#",name:C.substr(w+2).toLowerCase()}),""!=(l=this.serchDocument(t,e,s,b,g,x,v,H))&&-1.1!=o){i=l.split(",");""!=(l=o<0?i[i.length+o]:i[o+1])&&(l=","+l)}else if(""!=l&&-1.1!=u){i=l.split(",");l="";for(n=1;n<=i.length-1;n++)n%2==u&&(l+=","+i[n])}else if(""!=l&&-1.1!=f){i=l.split(",");l="";for(n=f+2;n<=i.length-1;n++)l+=","+i[n]}else if(""!=l&&-1.1!=p){i=l.split(",");l="",p>i.length-1&&(p=i.length-1);for(n=1;n<=p;n++)l+=","+i[n]}else if(""!=l&&""!=m){i=l.split(",");l="";for(n=1;n<=i.length-1;n++)-1!=(a=i[n]).indexOf("|")&&-1!=this.text(","+a).indexOf(m)&&(l+=","+i[n])}else if(c)for(l="",i="h1,h2,h3,h4,h5,h6,,h7,h8,h9".split(","),n=0;n<=i.length-1;n++)l+=a=this.getDocument(t+" "+i[n],e,s,r);if(""!=d&&""!=l){i=l.split(",");l="";for(var I,n=1;n<=i.length-1;n++)-1!=(a=i[n]).indexOf("|")&&(I=a.split("|"),e=parseInt(I[0])+1,s=parseInt(I[1])-1,l+=this.getDocument(d,e,s,!0))}if(0==r){i=l.split(",");l="";for(n=1;n<=i.length-1;n++){a=i[n];-1==(","+l+",").indexOf(","+a+",")&&(l+=","+a)}}return l},this.serchDocument=function(t,e,s,r,l,i,n,h){null==r&&(r=""),null==l&&(l=""),null==i&&(i=""),null==n&&(n="");for(var a=!1,o="",u=0,f=0,p=!1,m=e;m<=s;m++){var c,d,b=this.htmlArr[m];null!=b&&(a&&this.checkEndSelector(b,t)&&u==b.lv?(p&&(o+="|"+m),p=a=!1,o+=this.serchDocument(t,f+1,m,r,l,i,n,h)):this.checkStartSelector(b,t,h)&&0==a&&(2==b.tagpair&&(a=!0,u=b.lv),f=m,c=!0,""!=r&&(d=this.handleLabelParam(b,r),"NOUL"==n&&null!=d&&(d=d.toLowerCase()),"^"==i?null!=d&&d.substr(0,l.length)==l||(c=!1):"|"==i?null!=d&&(d+"-").substr(0,l.length+1)==l+"-"||(c=!1):"$"==i?null!=d&&d.substr(-1*l.length)==l||(c=!1):"~"==i?null!=d&&-1!=(" "+d+" ").indexOf(" "+l+" ")||(c=!1):"*"==i?null!=d&&-1!=d.indexOf(l)||(c=!1):"!"==i?d==l&&(c=!1):null!=d&&"*"==l?c=!0:d!=l&&(c=!1)),c&&(o+=","+m,2==b.tagpair&&(p=!0))))}return o},this.checkStartSelector=function(t,e,s){if(""==t.label)return!1;var r=e+" ",l=t.label.substr(0,1),i=e.substr(0,1);if("/"==l)return!1;{if("*"==i)return"."!=s.type?"#"!=s.type||null!=(a=this.handleLabelParam(t,"id"))&&a.toLowerCase()==s.name:null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+s.name+" ");if("#"==i){var n=e.substr(1,r.indexOf(" ")-1),l=this.handleLabelParam(t,"id");if(l==n)return""==s||("."!=s.type?"#"!=s.type||null!=(a=this.handleLabelParam(t,"id"))&&a.toLowerCase()==s.name:null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+s.name+" "))}else if("."==i){var h,a,n=e.substr(1,r.indexOf(" ")-1).toLowerCase();if(null==(h=" "+this.handleLabelParam(t,"class")+" "))return!1;if(-1!=(h=h.toLowerCase()).indexOf(" "+n+" "))return""==s||("."!=s.type?"#"!=s.type||null!=(a=this.handleLabelParam(t,"id"))&&a.toLowerCase()==s.name:null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+s.name+" "))}else if(t.label+" "==e.substr(0,t.label.length+1).toLowerCase()+" ")return"."!=s.type?"#"!=s.type||null!=(a=this.handleLabelParam(t,"id"))&&a.toLowerCase()==s.name:null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+s.name+" ")}return!1},this.checkEndSelector=function(t,e){t.label.substr(0,1);var s=e.substr(0,1);return"*"==s||("#"==s||"."==s||t.label=="/"+e.substr(0,t.label.length-1).toLowerCase())},this.callToList=function(t,e){if("function"!=typeof e)return!1;for(var s=[],r=this.domList.split(","),l=1;l<=r.length-1;l++){var i={domList:","+r[l]},n=e.call(i,l-1,i);if("boolean"==typeof n&&0==n)break;i.value=n,s.push(i)}return s},this.find=function(t,e){if(null==t)return"";if(""==(t="object"==typeof t?","+t.x+"|"+t.y:t))return"";if("object"==typeof e){for(var s=e.domList.split(","),r=t.split(","),l="",i=1;i<=s.length-1;i++){var n=-1,h=-1;-1!=s[i].indexOf("|")?(a=s[i].split("|"),n=parseInt(a[0]),h=parseInt(a[1])):n=h=parseInt(p);for(var a,o,u,f=1;f<=r.length-1;f++)-1!=(p=r[f]).indexOf("|")&&(a=p.split("|"),o=parseInt(a[0]),u=parseInt(a[1]),o<=n&&n<=u&&(l+=","+s[i]))}return l}for(l="",r=t.split(","),f=1;f<=r.length-1;f++)-1!=(p=r[f]).indexOf("|")&&(s=p.split("|"),n=parseInt(s[0]),h=parseInt(s[1]),l+=this.getDocument(e,n,h));for(r=l.split(","),l="",f=1;f<=r.length-1;f++){var p=r[f];-1==(","+l+",").indexOf(","+p+",")&&(l+=","+p)}return l},this.add=function(t,e){if(null==t)return"";"object"==typeof t&&(t=","+t.x+"|"+t.y);var s="";if("number"==typeof e)return t;if(""==(s="object"==typeof e?null!=e.domList?e.domList:","+t.x+"|"+t.y:this.getDocument(e)))return t;for(var r=(t+s).split(","),l="",i=1;i<=r.length-1;i++){var n=r[i];-1==(","+l+",").indexOf(","+n+",")&&(l+=","+n)}return l},this.text=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++)(h=s[r])&&this.text(h.domList,h.value);return!1}if(null==t)return!1;"number"==typeof e&&(e+="");var l="get";if("string"==typeof e&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),l="set"),""==(t="object"==typeof t?","+t.x+"|"+t.y:t))return"";for(var i="",s=t.split(","),r=1;r<=s.length-1;r++){var n=s[r];if(-1!=n.indexOf("|"))for(var h,n=n.split("|"),a=parseInt(n[0]),o=parseInt(n[1]),u=a;u<=o;u++)(h=this.htmlArr[u])&&(u==a?"get"==l&&(i+=h.downHtml):u<o?"set"==l?delete this.htmlArr[u]:i+=h.upHtml+h.downHtml:u==o&&("get"==l?i+=h.upHtml:h.upHtml=e))}return"get"==l?i:void 0},this.html=function(t,e,s){if("function"==typeof e){for(var r=this.callToList(this.domList,e),l=0;l<=r.length-1;l++)(o=r[l])&&this.html(o.domList,o.value,s);return!1}if(null!=t){"number"==typeof e&&(e+=""),""!=s&&(s="|"+s+"|");var i="string"==typeof e?"set":"get";if(""!=(t="object"==typeof t?","+t.x+"|"+t.y:t)){var n="",h=(r=t.split(",")).length-1;"get"==i&&1<h&&(h=1);for(l=1;l<=h;l++){var a=r[l];if(-1!=a.indexOf("|"))for(var o,a=a.split("|"),u=parseInt(a[0]),f=parseInt(a[1]),p=u;p<=f;p++)(o=this.htmlArr[p])&&(p==u?"get"==i?(-1!=s.indexOf("all")&&(n+=o.html),n+=o.downHtml):-1!=s.indexOf("all")&&(o.html=""):p<f?"set"==i?delete this.htmlArr[p]:n+=o.upHtml+o.html+o.downHtml:p==f&&("get"==i?(n+=o.upHtml,-1!=s.indexOf("all")&&(n+=o.html)):(o.upHtml=e,-1!=s.indexOf("all")&&(o.html=""))))}return"get"==i?n:void 0}}},this.dom=function(t,e,s){1!=(s=null==s?-1:s)&&2!=s&&(s=-1),""!=e&&(e="|"+e+"|");for(var r="",l=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),i=1;i<=l.length-1&&!(1<i);i++){var n=l[i];if(-1!=n.indexOf("|"))for(var n=n.split("|"),h=parseInt(n[0]),a=parseInt(n[1]),o=h;o<=a;o++){var u=this.htmlArr[o];u&&(s!=u.tagpair&&-1!=s||(o==h||o==a?-1!=e.indexOf("all")&&(-1!=e.indexOf("label")?r+="<"+u.label+">":r+=u.html):o<a&&(-1!=e.indexOf("label")?r+="<"+u.label+">":r+=u.html)))}}return r},this.handleCssParam=function(t,e,s){if(null==s){var r="a{"+(l=null==(l=this.attr(t,"style"))?"":l)+"}";return $xytcss("a").parse(r).css(e)}var l;s=s.toString();var i=l=null==(l=this.attr(t,"style"))?"":l,r="a{"+l+"}",s=($xytcss("a").parse(r).css(e,s),(s=$xytcss().print()).substr(2,s.length-3).trim());i.trim()!=s&&(2<=s.split(";").length&&(s=s.replace(/ /g,"").replace(/:/g,": ").replace(/;/g,"; ").trim()),this.attr(t,"style",s))},this.css=function(t,e,s){if("function"==typeof s){for(var r=this.callToList(this.domList,s),l=0;l<=r.length-1;l++)(h=r[l])&&this.css(h.domList,e,h.value);return!1}if("object"==typeof e){for(var i in e)this.css(t,i,e[i]);return this}if(null!=t&&null!=e&&""!=(e=e.trim())){if("object"==typeof t)return null==s?this.handleCssParam(t,e):this.handleCssParam(t,e,s);if(""!=t){r=t.split(",");if(null==s){if(null==(a=r[1]))return;var n=a.split("|"),h=this.htmlArr[n[0]];return a=this.handleCssParam(h,e)}for(var a,l=1;l<=r.length-1;l++)h=-1!=(a=r[l]).indexOf("|")?(n=a.split("|"),this.htmlArr[n[0]]):this.htmlArr[a],this.handleCssParam(h,e,s)}}},this.attr=function(t,e,s){if("function"==typeof s){for(var r=this.callToList(this.domList,s),l=0;l<=r.length-1;l++)(h=r[l])&&this.attr(h.domList,e,h.value);return!1}if("object"==typeof e){for(var i in e)this.attr(t,i,e[i]);return this}if(null!=t&&null!=e&&("number"==typeof e&&(e+=""),""!=(e=e.trim()))){if("object"==typeof t)return null==s?this.handleLabelParam(t,e):this.handleLabelParam(t,e,s);if(""!=t){r=t.split(",");if(null==s){if(null==(a=r[1]))return;var n=a.split("|"),h=this.htmlArr[n[0]];return a=this.handleLabelParam(h,e)}for(var a,l=1;l<=r.length-1;l++)h=-1!=(a=r[l]).indexOf("|")?(n=a.split("|"),this.htmlArr[n[0]]):this.htmlArr[a],this.handleLabelParam(h,e,s)}}},this.removeAttr=function(e,t){return null!=e&&null!=t&&(""!=t.trim()&&(t.split(" ").forEach(function(t){""!=t&&_xyt.attr(e,t,"")}),!0))},this.val=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++)(p=s[r])&&this.val(p.domList,p.value);return!1}if(null!=(t="object"==typeof t?","+t.x+"|"+t.y:t)&&""!=t){s=t.split(",");if(null==e){if(null==(n=s[1]))return"";var l=n.split("|");if("textarea"==(p=this.htmlArr[l[0]]).label)return p.x=l[0],p.y=l[1],this.html(p);if("select"!=p.label)return this.handleLabelParam(p,"value");if(""==(h=this.getDocument("option",p.x,p.y)))return;for(var i=h.split(","),r=1;r<=i.length-1;r++)-1!=(o=i[r]).indexOf("|")&&(u=o.split("|"),f=this.htmlArr[u[0]],null==this.handleLabelParam(f,"selected")&&null!=a||(a=this.handleLabelParam(f,"value")));return a}for(var n,r=1;r<=s.length-1;r++)if(-1!=(n=s[r]).indexOf("|")){var h,l=n.split("|");if("textarea"==(p=this.htmlArr[l[0]]).label)p.x=l[0],p.y=l[1],this.html(p,e);else if("select"==p.label){if(""!=(h=this.getDocument("option",p.x,p.y)))for(var a,o,u,f,i=h.split(","),r=1;r<=i.length-1;r++)-1!=(o=i[r]).indexOf("|")&&(u=o.split("|"),f=this.htmlArr[u[0]],this.handleLabelParam(f,"value")==e?this.handleLabelParam(f,"selected","selected"):this.handleLabelParam(f,"selected",null))}else this.handleLabelParam(p,"value",e)}else{var p=this.htmlArr[n];this.handleLabelParam(p,"value",e)}return""}},this.each=function(t,e){var s=[];if(null==t)return!1;for(var r=t.split(","),l=1;l<=r.length-1;l++){var i,n,h=r[l];-1!=h.indexOf("|")?(i=h.split("|"),(n=this.htmlArr[i[0]]).x=parseInt(i[0]),n.y=parseInt(i[1])):((n=this.htmlArr[h]).x=parseInt(h),n.y=parseInt(h)),s.push(n)}if("object"==typeof s)for(var l=0,a=s.length;l<a&&0!=e.call(s[l],l,s[l]);l++);},this.remove=function(t,e){if(null==(t="object"==typeof t?","+t.x+"|"+t.y:t))return!1;var s,r,l,i;if(null==e||-1!=(i=e.indexOf(":"))&&(l=r="",e=(o=e.substr(i+1)).indexOf("("),i=o.indexOf(")"),-1!=e&&-1!=i?(r=o.substr(0,e).toLowerCase(),i=(l=o.substr(e+1)).indexOf(")"),("'"==(i=(l=l.substr(0,i).replace(/-Space-/g," ").trim()).trim()).substr(0,1)&&"'"==i.substr(-1,1)||'"'==i.substr(0,1)&&'"'==i.substr(-1,1))&&(l=i.substr(1,i.length-2))):r=o.toLowerCase(),"contains"==r&&(s=l)),null!=s){for(var n=t.split(","),h="",a=1;a<=n.length-1;a++)-1!=(o=n[a]).indexOf("|")&&-1!=this.text(","+o).indexOf(s)&&(h+=","+n[a]);t=h}for(n=t.split(","),a=1;a<=n.length-1;a++){var o=n[a];if(-1!=o.indexOf("|"))for(var u,f=o.split("|"),p=parseInt(f[0]),m=parseInt(f[1]),c=p;c<=m;c++)(u=this.htmlArr[c])&&(c==p?(u.html="",u.label=""):delete this.htmlArr[c]);else(u=this.htmlArr[o])&&(u.html="",u.label="")}return!0},this.addClass=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++){var l=s[r];l&&this.addClass(l.domList,l.value)}return!1}if("number"==typeof e)return!1;if(null==t||null==e)return!1;if(this.common.isArray(e))var i=e;else{if(""==(e=e.trim()))return!1;"object"==typeof t&&(t=","+t.x+"|"+t.y);i=e.split(" ")}if(""==t)return!1;for(s=t.split(","),r=1;r<=s.length-1;r++){for(var n=s[r],h=(n.split("|"),null!=(h=this.attr(","+n,"class"))?h.trim():""),a=0;a<=i.length-1;a++)""!=i[a]&&(""!=h&&(h+=" "),h+=i[a]);this.attr(","+n,"class",h)}},this.hasClass=function(t,e){if("number"==typeof e)return!1;if(null==t||null==e)return!1;if(""==(e=e.trim()))return!1;if(""==(t="object"==typeof t?","+t.x+"|"+t.y:t))return!1;for(var s=t.split(","),r=1;r<=s.length-1;r++){var l=s[r],l=(l.split("|"),null!=(l=this.attr(","+l,"class"))?l.trim():"");if(""!=l&&-1!=(" "+l+" ").indexOf(" "+e+" "))return!0}return!1},this.removeClass=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++){var l=s[r];l&&this.removeClass(l.domList,l.value)}return!1}if(this.common.isArray(e))var i=e;else{if(null==t||null==e)return!1;if(""==(e=e.trim()))return!1;i=e.split(" ");"object"==typeof t&&(t=","+t.x+"|"+t.y)}if(""==t)return!1;for(s=t.split(","),r=1;r<=s.length-1;r++){var n=s[r];if(null!=(h=this.attr(","+n,"class"))){for(var h=" "+(h=h.trim())+" ",a=0;a<=i.length-1;a++)""!=i[a]&&(h=h.replace(" "+i[a]+" "," "));this.attr(","+n,"class",h.trim())}}},this.wrap=function(t,e,s){for(var r=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),l=1;l<=r.length-1;l++){var i,n=r[l];-1!=n.indexOf("|")?(i=n.split("|"),this.htmlArr[i[0]].upHtml+=e,this.htmlArr[i[1]].downHtml+=s):(this.htmlArr[n].upHtml+=e,this.htmlArr[n].downHtml+=s)}return this},this.unwrap=function(t){for(var e=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),s=1;s<=e.length-1;s++){var r,l=e[s],i=.1,n=0,h=0;-1!=l.indexOf("|")?(r=l.split("|"),i=this.htmlArr[r[0]].lv-1,n=parseInt(r[0]),h=parseInt(r[1])):(i=(o=this.htmlArr[l]).lv-1,n=h=parseInt(l));for(var a=n;0<=a;a--){var o=this.htmlArr[a];if("object"==typeof o&&this.htmlArr[a].lv==i){o.html="";break}}for(a=h;a<=this.htmlArr.length-1;a++){o=this.htmlArr[a];if("object"==typeof o&&this.htmlArr[a].lv==i){o.html="";break}}}return this},this.append=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++){var l=s[r];l&&this.append(l.domList,l.value)}return!1}for(s=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),r=1;r<=s.length-1;r++){var i,n=s[r];-1!=n.indexOf("|")?(i=n.split("|"),this.htmlArr[i[1]].upHtml+=e):this.htmlArr[n].downHtml+=e}return this},this.prepend=function(t,e){if("function"==typeof e){for(var s=this.callToList(this.domList,e),r=0;r<=s.length-1;r++)(i=s[r])&&this.prepend(i.domList,i.value);return!1}for(s=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),r=1;r<=s.length-1;r++){var l,i,n=s[r];-1!=n.indexOf("|")?(l=n.split("|"),(i=this.htmlArr[l[0]]).downHtml=e+i.downHtml):this.htmlArr[n].downHtml=e+this.htmlArr[n].downHtml}return this},this.after=function(t,e){if("function"==typeof e){for(var s=this.callToList(t,e),r=0;r<=s.length-1;r++){var l=s[r];l&&this.after(l.domList,l.value)}return!1}for(s=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),r=1;r<=s.length-1;r++){var i,n=s[r];-1!=n.indexOf("|")?(i=n.split("|"),this.htmlArr[i[1]].downHtml=e+this.htmlArr[i[1]].downHtml):this.htmlArr[n].downHtml=e+this.htmlArr[n].downHtml}return this},this.before=function(t,e){if("function"==typeof e){for(var s=this.callToList(t,e),r=0;r<=s.length-1;r++){var l=s[r];l&&this.before(l.domList,l.value)}return!1}for(s=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),r=1;r<=s.length-1;r++){var i,n=s[r];-1!=n.indexOf("|")?(i=n.split("|"),this.htmlArr[i[0]].upHtml+=e):this.htmlArr[n].upHtml+=e}return this},this.next=function(t){for(var e=t.split(","),s=1;s<=e.length-1;s++)for(var r,l,i=e[s],n=-1,h=(l=-1!=i.indexOf("|")?(r=i.split("|"),this.htmlArr[r[0]]):this.htmlArr[i])._index+1;h<=this.htmlArr.length-1;h++){var a=this.htmlArr[h];if(a){if(a.lv<l.lv)break;if(-1!=n){if(l.lv==a.lv&&"/"==a.label.substr(0,1))return","+n+"|"+a._index}else if(l.lv==a.lv&&"/"!=a.label.substr(0,1)){if(1==a.tagpair)return","+a._index;n=a._index}}}return""},this.nextAll=function(t){for(var e="",s=t.split(","),r=1;r<=s.length-1;r++)for(var l,i,n=s[r],h=-1,a=(i=-1!=n.indexOf("|")?(l=n.split("|"),this.htmlArr[l[0]]):this.htmlArr[n])._index+1;a<=this.htmlArr.length-1;a++){var o=this.htmlArr[a];if(o){if(o.lv<i.lv)break;-1!=h?i.lv==o.lv&&"/"==o.label.substr(0,1)&&(e+=","+h+"|"+o._index,h=-1):i.lv==o.lv&&"/"!=o.label.substr(0,1)&&(1==o.tagpair?e+=","+o._index:h=o._index)}}return e},this.prev=function(t){for(var e=t.split(","),s=1;s<=e.length-1;s++)for(var r,l,i=e[s],n=-1,h=(l=-1!=i.indexOf("|")?(r=i.split("|"),this.htmlArr[r[0]]):this.htmlArr[i])._index-1;0<=h;h--){var a=this.htmlArr[h];if(a){if(a.lv<l.lv)break;if(-1!=n){if(l.lv==a.lv&&"/"!=a.label.substr(0,1))return","+a._index+"|"+n}else if(l.lv==a.lv&&"/"==a.label.substr(0,1)){if(1==a.tagpair)return","+a._index;n=a._index}}}return""},this.prevAll=function(t,e){var s=t.split(",");null==e&&(e="desc");for(var r="",l=1;l<=s.length-1;l++)for(var i,n,h=-1,a=(n=-1!=(o=s[l]).indexOf("|")?(i=o.split("|"),this.htmlArr[i[0]]):this.htmlArr[o])._index-1;0<=a;a--){var o,u=this.htmlArr[a];if(u){if(u.lv<n.lv)break;-1!=h?n.lv==u.lv&&"/"!=u.label.substr(0,1)&&(o=","+u._index+"|"+h,"desc"==e?r+=o:r=o+r,h=-1):n.lv==u.lv&&"/"==u.label.substr(0,1)&&(1==u.tagpair?(o=","+u._index,"desc"==e?r+=o:r=o+r):h=u._index)}}return r},this.parent=function(t){for(var e=t.split(","),s="",r=1;r<=e.length-1;r++){for(var l,i,n=e[r],h=-1,a=-1,o=(i=-1!=n.indexOf("|")?(l=n.split("|"),this.htmlArr[l[0]]):this.htmlArr[n])._index-1;0<=o;o--){var u=this.htmlArr[o];if(u&&i.lv-1==u.lv&&"/"!=u.label.substr(0,1)){h=u._index;break}}for(o=i._index+1;o<=this.htmlArr.length-1;o++){u=this.htmlArr[o];if(u&&i.lv-1==u.lv&&"/"==u.label.substr(0,1)){a=u._index;break}}-1!=h&&-1==(","+s+",").indexOf(","+h+"|"+a+",")&&(s+=","+h+"|"+a)}return s},this.parents=function(t){for(var e=t.split(","),s="",r=1;r<=e.length-1;r++){for(var l,i,n=e[r],h=-1,a=-1,o=(i=-1!=n.indexOf("|")?(l=n.split("|"),this.htmlArr[l[0]]):this.htmlArr[n])._index-1;0<=o;o--){var u=this.htmlArr[o];if(u&&i.lv-1==u.lv&&"/"!=u.label.substr(0,1)){h=u._index;break}}for(o=i._index+1;o<=this.htmlArr.length-1;o++){u=this.htmlArr[o];if(u&&i.lv-1==u.lv&&"/"==u.label.substr(0,1)){a=u._index;break}}-1==h||-1==(","+s+",").indexOf(","+(n=","+h+"|"+a)+",")&&(s+=n+this.parents(n))}return s},this.children=function(t){for(var e=t.split(","),s="",r=1;r<=e.length-1;r++){var l=e[r];if(-1!=l.indexOf("|"))for(var i=l.split("|"),l=parseInt(i[0]),n=parseInt(i[1]),h=this.htmlArr[l],a=l+1;a<n;a++){var o=this.htmlArr[a];o.lv-h.lv==1&&(2==o.tagpair&&-1!=o.label.indexOf("/")?s+="|"+o._index:s+=","+o._index)}}return s},this.closest=function(t,e){for(var s=t.split(","),r="",l=1;l<=s.length-1;l++){var i,n,h=s[l];-1!=h.indexOf("|")?(i=h.split("|"),n=parseInt(i[0]),parseInt(i[1])):n=parseInt(h);var a=this.htmlArr[n];if("string"==typeof e){h=this.getDocument(e);if(""!=h)for(var o=h.split(","),u=o.length-1;1<=u;u--){var f=o[u];if(-1!=f.indexOf("|")){var p=f.split("|"),m=parseInt(p[0]),p=(parseInt(p[1]),this.htmlArr[m]);if(m<n&&p.lv-a.lv==-1){r+=","+f;break}}}}}return r},this.filter=function(t,e){for(var s=t.split(","),r="",l=1;l<=s.length-1;l++){var i,n,h=s[l];n=-1!=h.indexOf("|")?(n=h.split("|"),i=parseInt(n[0]),parseInt(n[1])):i=parseInt(h);this.htmlArr[i];"string"==typeof e&&-1!=(","+this.getDocument(e,i,n)+",").indexOf(","+h+",")&&(r+=","+h)}return r},this.eq=function(t,e){null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1);var s="";if(-1.1!=e){t=t.split(",");if(0<=e?e++:e=t.length+e,e>t.length)return"";""!=(s=t[e])&&(s=","+s)}return s},this.slice=function(t,e,s){if(null==e&&null==s)return t;var r=t.split(",");if(isNaN(e)?e=0:(e=parseInt(e))<0&&(e=r.length- -1*e),null==s?s=r.length:isNaN(s)?s=-1:(s=parseInt(s))<0&&(s=r.length-1- -1*s),e+""=="NaN"||s+""=="NaN")return t;for(var l="",i=1;i<=r.length-1;i++)e<=i&&i<=s&&(l+=","+r[i]);return l},this.show=function(t){for(var e=t.split(","),s=1;s<=e.length-1;s++){var r,l=e[s];-1!=l.indexOf("|")?(r=l.split("|"),this.css(","+r[0],"display","")):this.css(","+l,"display","")}return this},this.hide=function(t){for(var e=t.split(","),s=1;s<=e.length-1;s++){var r,l=e[s];-1!=l.indexOf("|")?(r=l.split("|"),this.css(","+r[0],"display","none")):this.css(","+l,"display","none")}return this},this.printHTML=function(t){for(var e="",s=0,r=-1!=(t=","+(t=null==t?"":t).replace(/\|/g,",")+",").indexOf(",color,")?"<br>":"\n",l=-1!=t.indexOf(",color,")?"&nbsp;&nbsp;&nbsp;&nbsp;":"    ",i=0;i<=this.htmlArr.length-1;i++){var n,h,a,o,u=this.htmlArr[i];u&&(u.id=i,-1!=t.indexOf(",format,")?(n=u.upHtml.trim(),h=u.downHtml.trim(),a=u.html.trim(),-1!=t.indexOf(",color,")&&(n=this.htmlColor(n),h=this.htmlColor(h),a=this.htmlColor(a)),"html"==u.label?s=-1:"head"!=u.label&&"body"!=u.label||(n+=r),""!=a&&(o=!0,2==u.tagpair?"/"==u.label.substr(0,1)&&(o=this.upCheckThisLabel(u)):-1!="|br|hr|rect|line|col|".indexOf("|"+u.label+"|")&&(o=!1),o&&(a=r+this.common.copyStr(l,u.lv-1+s)+a)),e+=n+a+h):-1!=t.indexOf(",zip,")?e+=u.upHtml.trim()+u.html.trim()+u.downHtml.trim():-1!=t.indexOf(",color,")?e+=this.htmlColor(u.upHtml)+this.htmlColor(u.html)+this.htmlColor(u.downHtml):e+=u.upHtml+u.html+u.downHtml)}return-1!=t.indexOf(",format,")&&(e=e.trim()),e=-1!=t.indexOf(",color,")?"<div style='font-family: Menlo, Monaco, Consolas, \"Courier New\", monospace;padding: 0.2em;margin: 0;font-size: 14px;'>"+e+"</div>":e},this.upCheckThisLabel=function(t){if("/head"==t.label||"/body"==t.label)return!0;for(var e=t.id-1;0<=e;e--){var s=this.htmlArr[e];if(s){if(s.lv==t.lv)return!1;if(2==s.tagpair||"img"==s.label)return!0;if(-1!=(s.upHtml+s.downHtml).indexOf("\n"))return!0}}return!1},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.htmlArr)},this.info=function(){console.log("%c xiyueta%c v"+_xyt.config.version+" website: www.xiyueta.com ","font-size:22px;color:#00bbee","color:#000")}},_xyt=new _XIYUETA,xiyueta=function(t,e,s){return new xiyueta.fn.init(t,e,s)};xiyueta.fn=xiyueta.prototype={length:0,selector:"",domList:void 0,x:null,y:null,domListIndex:0},xiyueta.extend=xiyueta.fn.extend=function(){var t,e,s,r=arguments[0]||{},l=1,i=arguments.length;for(l===i&&(r=this,l--);l<i;l++)if(null!=(t=arguments[l]))for(e in t)s=t[e],"__proto__"!==e&&r!==s&&void 0!==s&&(r[e]=s);return r};var init=xiyueta.fn.init=function(t,e,s){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=s,this.domListArray=[],0<_xyt.htmlArr.length&&("string"==typeof t?(s=(e=_xyt.getDocument(t,e,s)).split(","),this.length=s.length-1,this.domList=e):"object"==typeof t&&(this.domList=","+t.x,t.x!=t.y&&(this.domList+="|"+t.y),this.length=1,this.selector="")),_xyt.domList=this.domList,null==this.selector&&(this.selector="")};init.prototype=xiyueta.fn,($=$xyt=xiyueta).log=function(t,e){if(null==e&&(e="<br>"),"object"==typeof t)for(var s in t){var r;-1==(t[s]+"").indexOf("function")&&(r=(r=t[s]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(r="object"==typeof t[s]?xiyueta.log(t[s]," , "):r)?document.write(s+e):document.write(s+":  "+r+e))}else t+="",document.write(t.replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")+e)},xiyueta.fn.extend({parse:function(t,e){var s;return _xyt.parseHTML(t),1!=(e=null==e&&0!=_xyt.lv?!0:e)||0<(s=this.repair(!1)).err&&""!=s.errList&&1==s.state&&(_xyt.parseHTML(this.print()),this.repairHTML=!0),0<_xyt.htmlArr.length&&"string"==typeof this.selector&&(s=(e=_xyt.getDocument(this.selector,this.x,this.y)).split(","),this.length=s.length-1,_xyt.domList=this.domList=e),this},find:function(t){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.find(this.domList,t);t=_xyt.domList.split(",");return this.length=t.length-1,this.selector="",this},add:function(t){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.add(this.domList,t);t=_xyt.domList.split(",");return this.length=t.length-1,this.selector="",this},text:function(t){return null==t?_xyt.text(this.domList):(_xyt.text(this.domList,t),this)},html:function(t,e){return null==t?_xyt.html(this.domList):(_xyt.html(this.domList,t,e),this)},attr:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.attr(this.domList,t,e),this):""!=t.trim()?_xyt.attr(this.domList,t):void 0},removeAttr:function(t){return _xyt.removeAttr(this.domList,t),this},val:function(t){return null==t?_xyt.val(this.domList):(_xyt.val(this.domList,t),this)},remove:function(t){return _xyt.remove(this.domList,t),this},each:function(t){return _xyt.each(this.domList,t),this},css:function(t,e){return null==e&&"object"!=typeof t?_xyt.css(this.domList,t):(_xyt.css(this.domList,t,e),this)},print:function(t){return _xyt.printHTML(t)},debug:function(t){return _xyt.debug(t),this}}),xiyueta.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});var t=this.domList.split(","),e="";this.length=0;for(var s=1;s<=t.length-1;s++)s%2==1&&(e+=","+t[s],this.length++);return _xyt.domList=this.domList=e,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});var t=this.domList.split(","),e="";this.length=0;for(var s=1;s<=t.length-1;s++)s%2==0&&(e+=","+t[s],this.length++);return _xyt.domList=this.domList=e,this},slice:function(t,e){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.slice(this.domList,t,e);e=this.domList.split(",");return this.length=e.length-1,this},end:function(){var t;return this.domListArray.length<=0?(_xyt.domList=this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],_xyt.domList=this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this},addClass:function(t){return _xyt.addClass(this.domList,t),this},hasClass:function(t){return _xyt.hasClass(this.domList,t)},removeClass:function(t){return _xyt.removeClass(this.domList,t),this},wrap:function(t,e){if("function"==typeof t){for(var s=_xyt.callToList(this.domList,t),r=0;r<=s.length-1;r++)(u=s[r])&&this.wrap(u.value,u.domList);return this}var l=new _XIYUETA,i=0;l.parseHTML(t),l.repairHTML(!1);var n=l.printHTML();t!=n&&l.parseHTML(n);for(r=0;r<=l.htmlArr.length-1;r++)(u=l.htmlArr[r]).lv>i&&2==u.tagpair&&(i=u.lv);for(var h="",a="",o=!1,r=0;r<=l.htmlArr.length-1;r++){var u,f=(u=l.htmlArr[r]).upHtml;"/"==u.label.substr(0,1)&&u.lv==i&&(o=!0,h+=f,f=""),0==o?h+=f+u.html:a+=f+u.html}return null==e&&(e=this.domList),_xyt.wrap(e,h,a),this},unwrap:function(){return _xyt.unwrap(this.domList),this},append:function(t){return _xyt.append(this.domList,t),this},prepend:function(t){return _xyt.prepend(this.domList,t),this},after:function(t){return _xyt.after(this.domList,t),this},before:function(t){return _xyt.before(this.domList,t),this},show:function(){return _xyt.show(this.domList),this},hide:function(){return _xyt.hide(this.domList),this},next:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.next(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},nextAll:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.nextAll(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},prev:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.prev(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},prevAll:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.prevAll(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},siblings:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.prevAll(this.domList,"asc")+_xyt.nextAll(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},parent:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.parent(this.domList);var t=_xyt.domList.split(",");return this.length=t.length-1,this},parents:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});var t=_xyt.parents(this.domList).split(","),e="";this.length=0;for(var s=1;s<=t.length-1;s++)-1==(","+e+",").indexOf(","+t[s]+",")&&(e+=","+t[s],this.length++);return _xyt.domList=this.domList=e,this},children:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.children(this.domList);var t=this.domList.split(",");return this.length=t.length-1,this},closest:function(t){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.closest(this.domList,t);t=this.domList.split(",");return this.length=t.length-1,this},filter:function(t){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),_xyt.domList=this.domList=_xyt.filter(this.domList,t);t=this.domList.split(",");return this.length=t.length-1,this},htmlwrap:function(t){return null==t?_xyt.html(this.domList,void 0,"all"):(_xyt.html(this.domList,t,"all"),this)},dom:function(t){return _xyt.dom(this.domList,"",t)},domwrap:function(t){return _xyt.dom(this.domList,"all",t)},domlabel:function(t){return _xyt.dom(this.domList,"label|",t)},domlabelwrap:function(t){return _xyt.dom(this.domList,"all|label",t)},lv:function(){return _xyt.lv}}),_XIYUETA.prototype.swap=function(t,e){if(null==t||null==e)return!1;e=this.getDocument(e);if(""==t||""==e||t==e)return!1;t=t.split(",")[1];if(-1==t.indexOf("|"))var s=this.htmlArr[t],r=i=parseInt(t);else{for(var l=t.split("|"),i=parseInt(l[0]),r=parseInt(l[1]),s=this.htmlArr[i],n="",h=parseInt(i)+1;h<=r;h++)null!=(f=this.htmlArr[h])&&(n+=f.upHtml+f.html,delete this.htmlArr[h]);s.html+=n}e=e.split(",")[1];if(-1==e.indexOf("|")){var a=this.htmlArr[e];if(i<=(o=parseInt(e))&&o<=r)return!1}else{var l=e.split("|"),o=parseInt(l[0]),u=parseInt(l[1]),a=this.htmlArr[o];if(i<=o&&u<=r)return!1;for(var f,n="",h=parseInt(o)+1;h<=u;h++)null!=(f=this.htmlArr[h])&&(n+=f.upHtml+f.html,delete this.htmlArr[h]);a.html+=n}o=s.html;return s.html=a.html,a.html=o,!0},_XIYUETA.prototype.getItem=function(t,e){null==e&&(e="");for(var s=[],r=(t="object"==typeof t?","+t.x+"|"+t.y:t).split(","),l=1;l<=r.length-1;l++)if(-1!=(o=r[l]).indexOf("|")){var i=o.split("|"),n=this.htmlArr[i[0]];if(""!=e)void 0!==(o=this.handleLabelParam(n,e))&&s.push(o);else{for(var h=n.html,a=parseInt(i[0])+1;a<=i[1];a++)null!=(n=this.htmlArr[a])&&(h+=n.upHtml+n.html);""!=h&&s.push(h)}}else{var o,n=this.htmlArr[o];""!=e?void 0!==(o=this.handleLabelParam(n,e))&&s.push(o):s.push(n.html)}return s},_XIYUETA.prototype.setConfig=function(t){if(null==t)return this.config;null!=t.httpurl&&(this.config.httpurl=t.httpurl),null!=t.serverurl&&(this.config.serverurl=t.serverurl),null!=t.jsdir&&(this.config.jsdir=t.jsdir),null!=t.cssdir&&(this.config.cssdir=t.cssdir),null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir)},_XIYUETA.prototype.charset=function(t){for(var e=0;e<=this.htmlArr.length-1;e++){var s=this.htmlArr[e];if(null!=s)if("meta"==s.label)if(-1!=s.html.toLowerCase().indexOf("charset=")){var r=this.handleLabelParam(s,"charset");if(null!=(r=null!=r?r.toLowerCase().trim():r))return null!=t&&this.handleLabelParam(s,"charset",t),r;if(-1!=(r=null!=(r=this.handleLabelParam(s,"content"))?r.toLowerCase().trim():r).indexOf("utf-8"))return null!=t?(this.handleLabelParam(s,"content","text/html; charset="+t),""):"utf-8";if(-1!=r.indexOf("gb2312"))return null!=t?(this.handleLabelParam(s,"content","text/html; charset="+t),""):"gb2312"}}},_XIYUETA.prototype.getHandleSrc=function(t,e,s,r){for(var l="",i=!0,n=0;n<=this.htmlArr.length-1;n++){var h,a,o,u=this.htmlArr[n];null!=u&&-1!=("|"+t+"|").indexOf("|"+u.label+"|")&&(null==(h=this.handleLabelParam(u,e))&&(h=""),"link"==u.label&&("dns-prefetch"!=(a=(a=null==(a=this.handleLabelParam(u,"rel"))?"":a).trim().toLowerCase())&&"alternate"!=a||(h="")),-1!=("|"+s+"|").indexOf("clean")?(i=!0,""!=h&&-1==h.indexOf("apps.bdimg.com/")&&(o=h=this.common.fullHttpUrl(r,h),-1!=("|"+s+"|").indexOf("web")&&""!=(h=this.common.getUrlFileName(h,u.label))&&("img"==u.label?h=this.config.imagesdir+h:"script"==u.label?h=this.config.jsdir+h:"link"==u.label?-1!=(a=(a=null==(a=this.handleLabelParam(u,"rel"))?"":a).trim().toLowerCase()).indexOf("shortcut icon")?h=this.config.imagesdir+h:-1!=a.indexOf("stylesheet")?h=this.config.cssdir+h:(h="",i=!1):(i=!1,h="")),i&&""!=h&&(-1!=("|"+s+"|").indexOf("down")?(""!=l&&(l+="[,]"),l+=o+"[|]"+h):(""!=l&&(l+="[,]"),l+=h)),this.handleLabelParam(u,e,h))):""!=h&&(""!=l&&(l+="[,]"),l+=h))}return l},_XIYUETA.prototype.replace=function(t,e,s,r){for(var l,i=this.getDocument(t),n=i.split(","),h=1;h<=n.length-1;h++)l=-1!=(i=n[h]).indexOf("|")?(l=i.split("|"),this.htmlArr[l[0]]):this.htmlArr[i],""!=e&&(i=this.handleLabelParam(l,e))==s&&this.handleLabelParam(l,e,r)},_XIYUETA.prototype.repairHTML=function(t,e){var s;null==t&&(t=!1),null==e&&(e=0);var r=0,l=!1,i="",n=0,h=",";if(1<=this.htmlArr.length&&"no"==(a=this.htmlArr[0]).isFindDom)return!1;for(var a,o=0;o<=this.htmlArr.length-1;o++)(a=this.htmlArr[o])&&(a.nIndex=o,2==a.tagpair&&("/"==a.label.substr(0,1)?(f=a.label.substr(1),-1!=(","+h+",").indexOf(","+f+",")?h=h.replace(","+f+",",","):h+=a.label+","):h+=a.label+","));for(var u=h,o=0;o<=this.htmlArr.length-1;o++)if((a=this.htmlArr[o])&&2==a.tagpair&&"/"==a.label.substr(0,1)){var f=a.label.substr(1),l=!0;if(null!=(c=this.upFindSameLvObj(o,a))&&(a.label=="/"+c.label?(l=!1,this.setNoFindDom(c.nIndex,a.nIndex),1==e&&console.log(" 找(Lv1) "+a.label+" "+c.label+"("+a.nIndex+"-"+c.nIndex+")")):0==this.lv||1==c.lv&&1==a.lv&&-1==h.indexOf(","+a.label+",")?1==l&&(i="",t&&(i="\x3c!--xiyueta提示: 原标签(LV) "+a.label+" 替换成 /"+c.label+"--\x3e"),a.html="</"+c.label+">"+i,r+=2,n+=2,l=!1,this.setNoFindDom(c.nIndex,a.nIndex),1!=e&&2!=e||console.log(" 找(Lv2) LV整体层级正确或两标签都为第一层  "+a.label+" 替换成 /"+c.label+" ("+a.nIndex+"-"+c.nIndex+")")):1==e&&console.log(" 找(Lv else) 没找到，交给下面找同名 "+a.label+" ("+a.nIndex+")")),1==l)if(null==(s=this.upFindSameNameObj(o,a)))a.html=t?"\x3c!---xiyueta提示: 有多余结束标签 "+a.label+" --\x3e":"",n++,r++,this.setNoFindDom(a.nIndex,a.nIndex),this.reairHtmlLv(a,1),1!=e&&2!=e||console.log(" 找(Name 出错) 有多余结束标签 "+a.label+" ("+a.nIndex+")"),l=!1,h=h.replace(","+a.label+",",",");else{i="",t&&(s.html+="\x3c!---xiyueta提示: 有问题标签开始位置--\x3e",a.html="\x3c!---xiyueta提示: 有问题标签结束位置--\x3e"+a.html),1!=e&&2!=e||console.log(" 找(Name2 有问题) "+a.label+" 与 "+s.label+"("+a.nIndex+"-"+s.nIndex+") 之间有问题 ");var m="";this.setNoFindDom(s.nIndex,a.nIndex);var c=s.lv-a.lv;this.reairHtmlLv(a,c);for(var d=s.nIndex+1;d<=a.nIndex;d++){var b=this.htmlArr[d];if("/"!=b.label.substr(0,1)&&2==b.tagpair){var g=!1;for(p=b.nIndex+1;p<=a.nIndex;p++){var x=this.htmlArr[p];if(2==x.tagpair&&"/"==x.label.substr(0,1)&&x.lv==b.lv){g=!0;break}}0==g&&(m+="</"+b.label+">",t&&(m+="\x3c!--xiyueta提示: 追加 /"+b.label+" --\x3e"),1!=e&&2!=e||console.log(" 找(Name3)  追加结束标签 /"+b.label+" ("+b.nIndex+")"),n++,r++,h=h.replace(","+b.label+",",","))}}a.upHtml+=m}}var v=h.split(",");if(v.length>r){m="";for(o=0;o<=v.length-1;o++)""!=v[o]&&"/"!=v[o].substr(0,1)&&(i="",t&&(i="\x3c!--xiyueta提示: 追加 /"+v[o]+" --\x3e"),m="</"+v[o]+">"+i+m,n++,r++,1!=e&&2!=e||console.log(" 最后  追加结束标签 /"+v[o]));this.htmlArr[this.htmlArr.length-1].downHtml+=m}return{lv:this.lv,err:n,repair:r,state:n==r,errList:u=","==u?"":u}},_XIYUETA.prototype.setNoFindDom=function(t,e){for(var s=t;s<=e;s++){var r=this.htmlArr[s];r&&(r.isFindDom="no")}return null},_XIYUETA.prototype.upFindSameLvObj=function(t,e){for(var s=t-1;0<=s;s--){var r=this.htmlArr[s];if(r&&"no"!=r.isFindDom&&e.lv==r.lv)return r}return null},_XIYUETA.prototype.upFindSameNameObj=function(t,e){for(var s=t-1;0<=s;s--){var r=this.htmlArr[s];if(r&&"no"!=r.isFindDom&&e.label=="/"+r.label)return r}return null},_XIYUETA.prototype.reairHtmlLv=function(t,e){for(var s=t.nIndex;s<=this.htmlArr.length-1;s++)(t=this.htmlArr[s])&&(t.lv+=e)},_XIYUETA.prototype.htmlColor=function(t){if("</"==t.substr(0,2))return"<font color='#800000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";if("<"!=t.substr(0,1))return"<font color='#000000'>"+t+"</font>";if("\x3c!--"==t.substr(0,4))return"<font color='#008000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";for(var e="",s="",r="",l=!1,i="",n="",h="",a=0;a<=t.length-1;a++){var o=t.substr(a,1);"findValueStart"==i?(l?o==r||">"==o?(n+=h+"<font color='#0000FF'>"+s+h+"</font>",l=!1,h=r=h="",i="findParamStart"):s+=o:'"'==o||"'"==o?(h+=o,r=o,l=!0):" "!=o?(r=" ",s=o,l=!0):h+="&nbsp;",">"==o&&(n+="<font color='#800000'>&gt;</font>")):"<"==o?(h="&lt;",i="findLabel"):"findLabel"==i?" "==o?(n+="<font color='#800000'>"+h+"</font> ",h="",i="findParamStart"):">"==o?n+="<font color='#800000'>"+h+"&gt;</font>":h+=o:">"==o?n+="<font color='#800000'>&gt;</font>":"findParamEnd"==i?"="==o?(i="findValueStart",n+="<font color='#FF0000'>"+e+"</font><font color='#000000'>=</font>",e=r=s=""):e+=o=" "==o?"&nbsp;":o:(i="findParamEnd",e+=o=" "==o?"&nbsp;":o)}return n},xiyueta.fullurl=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.resolve=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.getUrlFileName=function(t,e){return _xyt.common.getUrlFileName(t,e)},xiyueta.getDomain=function(t){return _xyt.common.getDomain(t)},xiyueta.htmlColor=function(t){return _xyt.htmlColor(t)},xiyueta.load=function(t){return xiyueta().parse(t),this},xiyueta.html=function(t){return _xyt.printHTML(t)},xiyueta.fn.extend({swap:function(t){return _xyt.swap(this.domList,t),this},item:function(t){return _xyt.getItem(this.domList,t)},config:function(t){t=_xyt.setConfig(t);return null==t?this:t},charset:function(t){return null==t?_xyt.charset():(_xyt.charset(t),this)},handle:function(t,e,s){return _xyt.getHandleSrc(this.selector,t,e,s)},replace:function(t,e,s){return _xyt.replace(this.selector,t,e,s)},clear:function(){return this},repair:function(t,e){return _xyt.repairHTML(t,e)}});var _XIYUETACSS=function(t){"use strict";this.cssSource=t=null==t?"":t,this.cssArr=[],this.common=new XiyuetaCommon,this.lv=0,this.config={parentdir:"../",imagesdir:"images/"},this.cssParse=function(t){null!=t&&(this.cssSource=t,this.cssArr=[]);var e,s="",r="",l="",i="",n=!1,h=!1,a=!1,o=!1,u=!1,f=0;this.domList="";for(var p=0;p<=this.cssSource.length-1;p++)e=s,s=this.cssSource.substr(p,1),n?(l+=s,a?"/"==s&&"*"==e&&(n=a=!1,this.cssArr.push({lv:1,label:"/*",upHtml:i,downHtml:"",html:l}),i=l=""):h&&"*"==s&&"/"==e?a=!0:o?!u||";"!=s&&"\n"!=s?" "==s&&h?"@charset "==l.toLowerCase()?h=!(u=!0):"@font-face "==l.toLowerCase()&&(o=!1):"{"==s&&("@font-face{"==l.toLowerCase()?o=!1:(o=n=h=!1,this.cssArr.push({lv:1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:i,downHtml:"",html:l}),f++,i=l="")):(o=n=h=u=!1,this.cssArr.push({lv:1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:i,downHtml:"",html:l}),i=l=""):"{"==s&&h?h=!1:"}"==s&&(n=h=!1,this.cssArr.push({lv:f+1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:i,downHtml:"",html:l}),i=l=""),h&&(" "!=s||" "!=e&&","!=e)&&(r+=s)):" "!=s&&";"!=s&&"\n"!=s?"}"==s&&1==f?(this.cssArr.push({lv:f,label:"}",upHtml:i,downHtml:"",html:"}"}),i=l="",f--):(i=l,h=n=!0,"@"==(r=l=s)&&(o=!0)):l+=s;""!=l&&this.cssArr.push({lv:f,label:"",upHtml:"",downHtml:"",html:l}),this.lv=f},this.handleLabelParam=function(t,e,s){if(null==e&&(e="(all)"),null==s&&null!=t[e])return t[e];var r,l="";-1!=e.indexOf("|")&&(e=(r=e.split("|"))[0],l=r[1],""==e&&(e="(all)"));for(var i=!1,n="",h="",a=!1,o="",u=!1,f=!0,p=0,m=0,c=!1,d="",b=t.html.indexOf("{")+1;b<=t.html.length-1;b++){var g=t.html.substr(b,1);if(a)if(u){if(0!=(c=1==c&&")"==g?!1:c)||g!=o&&"}"!=g&&b!=t.html.length-1)h+=g,"("==g&&(c=!0);else if(t[n=n.toLowerCase().trim()]=h,u=a=!1,o="",e==n||"(all)"==e)if(null==s){if("url"!=l)return h;""!=(h=this.cssSrcUrl(h))&&(""!=d&&(d+="\n"),d+=h)}else{if(""==s){var x=t.html.substr(0,m),v=t.html.substr(b+1);return t.html=x+v,t}var y=p,L=p+h.length;f&&(y++,L++);x=t.html.substr(0,y),v=t.html.substr(L);if("url"!=l){A=x+s+v;return t.html=A,t[n]=s,t}L=this.cssSrcUrl(h,s);if(""!=L){""!=d&&(d+="\n"),d+=L;var A=x+L+v;return t.html=A,b=(x+(t[n]=L)).length,t}}}else" "!=g&&(o=";",p=b,f=!(u=!0),h=g);else i?":"==g?(a=!(i=!1),o=h=""):" "!=g&&(n+=g):" "!=g&&(i=!0,n=g,m=b)}if(null!=s&&""!=s){for(var O=e+": "+s+";",_=t.html.length-1;0<=_;_--)if(" "!=(g=t.html.substr(_,1))&&"}"!=g){if(";"==g)break;if("{"==g)break;O="; "+O;break}t.html=t.html.replace("}",O+"}")}return d=""==d?void 0:d},this.getDocument=function(t,e,s){null==e&&(e=0),null==s&&(s=this.cssArr.length-1);var r=-1.1,l=-1.1,i=-1.1,n=-1.1,h="",a="",o="",u="",f="";if(t=(t=null==t?"":t).trim(),0==this.cssArr.length)return console.log("%c 需要先解析一段css文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var p=!1,m="",c=0;c<=t.length;c++){var d=t.substr(c,1);0!=p||"'"!=d&&'"'!=d&&"("!=d&&")"!=d?1==p?" "==d?d="-Space-":"'"!=d&&'"'!=d&&"("!=d&&")"!=d||(p=!1,"'"!=d&&'"'!=d||(d="")):" "==d&&(d=""):(p=!0,"'"!=d&&'"'!=d||(d="")),m+=d}t=m}var b,g,x,v,y,L=t.indexOf(":");-1!=L&&(g=b="",x=(d=t.substr(L+1)).indexOf("("),v=d.indexOf(")"),-1!=x&&-1!=v?(b=d.substr(0,x).toLowerCase(),v=(g=d.substr(x+1)).indexOf(")"),g=g.substr(0,v).replace(/-Space-/g," ").trim()):b=d.toLowerCase(),"first"==b?r=0:"last"==b?r=-1:"even"==b?l=1:"odd"==b?l=0:"eq"==b?(r=0,(r=""!=g?parseInt(g):r)+""=="NaN"&&(r=-.1,t="")):"gt"==b?""!=g&&(i=parseInt(g)):"lt"==b?""!=g&&(n=parseInt(g)):"contains"==b?h=g:console.log(t,"没有动作 "+b),""==(t=t.substr(0,L))&&-.1!=r&&(t="(all)")),-1!=(L=t.indexOf("["))&&(v=(d=t.substr(L+1)).indexOf("]"),-1==(d=d.substr(0,v)).indexOf("=")?(a=d,o="*"):(a=(y=d.split("="))[0],o=y[1].replace(/-Space-/g," "),y=a.substr(a.length-1),-1!="!^$*~|".indexOf(y)&&(a=a.substr(0,a.length-1),u=y)),-1!=a.indexOf("|")&&(a=(y=a.split("|"))[0],"NOUL"==y[1]&&(o=o.toLowerCase(),f=y[1])),""==(t=t.substr(0,L))&&(t="(all)")),t=t.replace(/ /g,"");for(m="",c=e;c<=s;c++){var A=this.cssArr[c];null!=A&&(t!=A.label&&"(all)"!=t||(m+=","+c))}if(""!=m&&-1.1!=r){var O=m.split(",");""!=(m=r<0?O[O.length+r]:O[r+1])&&(m=","+m)}else if(""!=m&&-1.1!=l){O=m.split(",");m="";for(c=1;c<=O.length-1;c++)c%2==l&&(m+=","+O[c])}else if(""!=m&&-1.1!=i){O=m.split(",");m="";for(c=i+2;c<=O.length-1;c++)m+=","+O[c]}else if(""!=m&&-1.1!=n){O=m.split(",");m="",n>O.length-1&&(n=O.length-1);for(c=1;c<=n;c++)m+=","+O[c]}else if(""!=m&&""!=h){O=m.split(",");m="";for(c=1;c<=O.length-1;c++){d=O[c];this.domList=","+d,-1!=this.text("").indexOf(h)&&(m+=","+O[c])}}else if(""!=a){O=m.split(",");m="";for(c=1;c<=O.length-1;c++){var _=O[c];this.domList=","+_;var w=!0,d=this.css(a);"NOUL"==f&&null!=d&&(d=d.toLowerCase()),"^"==u?null!=d&&d.substr(0,o.length)==o||(w=!1):"|"==u?null!=d&&(d+"-").substr(0,o.length+1)==o+"-"||(w=!1):"$"==u?null!=d&&d.substr(-1*o.length)==o||(w=!1):"~"==u?null!=d&&-1!=(" "+d+" ").indexOf(" "+o+" ")||(w=!1):"*"==u?null!=d&&-1!=d.indexOf(o)||(w=!1):"!"==u?d==o&&(w=!1):null!=d&&"*"==o?w=!0:d!=o&&(w=!1),w&&(m+=","+_)}}return m},this.text=function(t,e,s,r){for(var l=this.domList,i="",n=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),h=1;h<=n.length-1;h++){var a,o,u=this.cssArr[n[h]];null!=u&&(a=u.html.indexOf("{"),o=u.html.indexOf("}"),null==e?-1!=a&&-1!=o&&(i+=u.html.substr(a+1,o-a-1)):u.html=u.html.substr(0,a+1)+e+"}")}return i},this.html=function(t,e,s,r){for(var l=this.domList,i=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),n=1;n<=i.length-1;n++){var h=this.cssArr[i[n]];if(null!=h){if(null==e)return h.html;h.html=e}}},this.after=function(t,e,s,r){for(var l=this.domList,i=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),n=1;n<=i.length-1;n++){var h=this.cssArr[i[n]];null!=h&&null!=e&&(h.downHtml+=e)}return this},this.before=function(t,e,s,r){for(var l=this.domList,i=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),n=1;n<=i.length-1;n++){var h=this.cssArr[i[n]];null!=h&&null!=e&&(h.upHtml+=e)}return this},this.remove=function(t,e,s){for(var r=this.domList,l=(r=null==this.domList?this.getDocument(t,e,s):r).split(","),i=1;i<=l.length-1;i++){var n=this.cssArr[l[i]];null!=n&&(n.html="",n.label="<del>")}return this},this.css=function(t,e,s,r,l){for(var i=this.domList,n=(i=null==this.domList?this.getDocument(t,r,l):i).split(","),h=1;h<=n.length-1;h++){var a=this.cssArr[n[h]];if(null!=a){if(null==s)return this.handleLabelParam(a,e);this.handleLabelParam(a,e,s)}}},this.getBackground=function(t,e,s){for(var r,l=this.domList,i="",n=(l=null==this.domList?this.getDocument(t,e,s):l).split(","),h=1;h<=n.length-1;h++)null!=this.cssArr[n[h]]&&(this.domList=","+n[h],null!=(r=this.css("","background"))&&(r=this.cssSrcUrl(r),i+=this.handleClearBackground(r)));return i},this.setBackground=function(t,e,s,r){for(var l,i=this.domList,n=(i=null==this.domList?this.getDocument(t,s,r):i).split(","),h=1;h<=n.length-1;h++)null!=this.cssArr[n[h]]&&(this.domList=","+n[h],null!=(l=this.css("","background"))&&("server="==e.substr(0,7)?(l=this.handleClearBackground(l),e=this.common.fullHttpUrl(e.substr(7),l)):"dir="==e.substr(0,4)&&(l=this.handleClearBackground(l),e=e.substr(4)+this.common.getUrlFileName(l)),this.css("","background","url("+e+")")));return this},this.getsrc=function(t,e,s,r){for(var l=this.domList,i="",n=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),h=1;h<=n.length-1;h++)if(null!=this.cssArr[n[h]]){this.domList=","+n[h];var a=this.text("").replace(/;/g,","),o=this.cssSrcUrl(a),o=this.handleClearBackground(o);if(null!=e)for(var u=o.split(","),f=0;f<=u.length-1;f++)""!=(o=u[f])&&("server="==e.substr(0,7).toLowerCase()?o=this.common.fullHttpUrl(e.substr(7),o):"dir="==e.substr(0,4).toLowerCase()?o=e.substr(4)+this.common.getUrlFileName(o):"filename"==e.substr(0,8).toLowerCase()&&(o=this.common.getUrlFileName(o)),""!=i&&(i+=","),i+=o);else""!=o&&(""!=i&&(i+=","),i+=o)}return i},this.setSrcUrl=function(t,e,s,r){for(var l=this.domList,i=(l=null==this.domList?this.getDocument(t,s,r):l).split(","),n=1;n<=i.length-1;n++)if(null!=this.cssArr[i[n]]){this.domList=","+i[n];for(var h="",a=this.text(""),o=a.split(";"),u=0;u<=o.length-1;u++){l=o[u];""!=h&&(h+=";"),h+=l=this.cssSrcUrl(l,e)}a!=h&&this.text("",h)}return this},this.handleClearBackground=function(t){var e=t.indexOf("(");if(-1==(t=-1!=(e=(t=-1!=e?t.substr(e+1):t).indexOf(")"))?t.substr(0,e):t).indexOf("'")&&-1==t.indexOf('"')&&-1==t.indexOf("("))return t;for(var s=!1,r="",l=0;l<=t.length;l++){var i=t.substr(l,1);0!=s||"'"!=i&&'"'!=i&&"("!=i&&")"!=i?1==s?"'"!=i&&'"'!=i&&"("!=i&&")"!=i||(s=!1,"'"!=i&&'"'!=i||(i="")):" "==i&&(i=""):(s=!0,"'"!=i&&'"'!=i||(i="")),r+=i}return r.trim()},this.cssSrcUrl=function(t,e){if(-1==t.indexOf(","))return this.handleCssSrcUrl(t,e);for(var s=t.split(","),r="",l=0;l<s.length;l++){var i=s[l];""!=(i=this.handleCssSrcUrl(i,e))&&(""!=r&&(r+=","),r+=i)}return r},this.handleCssSrcUrl=function(t,e){if(null==t)return"";if(null==e){if(-1==t.indexOf("(")||-1==t.indexOf(")"))return null==e||"dir="==e.substr(0,4)||"server="==e.substr(0,7)?"":t;if(-1==t.toLowerCase().indexOf("url"))return null==e||"dir="==e.substr(0,4)||"server="==e.substr(0,7)?"":t}for(var s="",r=!1,l=!1,i="",n=-1,h=0;h<=t.length-1;h++){var a=t.substr(h,1);if(r)if(l){if(i==a){var o=t.substr(n,h-n);if(null!=e)if("server="==e.substr(0,7)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+this.common.fullHttpUrl(e.substr(7),o)+t.substr(h)}else if("dir="==e.substr(0,4)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+e.substr(4)+this.common.getUrlFileName(o)+t.substr(h)}else-1==o.indexOf("data:")&&(o=t.substr(0,n)+e+t.substr(h));return o}}else""!=a&&('"'==a||"'"==a?(l=!0,i=a,-1==n&&(n=h+1)):" "!=a&&(l=!0,i=")",-1==n&&(n=h)));else if("("==a){if("url"==s.trim().toLowerCase().substr(-3,3))r=!0;else if(null==e)return""}else s+=a}return t},this.handleCssCharset=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var s=this.cssArr[e];if(null!=s)if("@charset"==s.label)return null!=t?(s.html='@charset "'+t+'";',""):s.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase()}return""},this.setConfig=function(t){if(null==t)return this.config;if(null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir,null!=t.cssdir)){for(var e=t.cssdir.split("/"),s="",r=0;r<=e.length-2;r++)s+="../";this.config.parentdir=s}null!=t.parentdir&&(this.config.parentdir=t.parentdir)},this.printCss=function(t){for(var e="",s=0;s<=this.cssArr.length-1;s++){var r,l=this.cssArr[s];null!=l&&(r=l.upHtml+l.html+l.downHtml,"zip"==t?r="/*"==l.label?"":r.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(r=r.trim()+"\n"),""!=r&&(e+=r))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.cssArr)}},_xytcss=new _XIYUETACSS,xiyuetaCss=function(t,e,s){return new xiyuetaCss.fn.init(t,e,s)};xiyuetaCss.fn=xiyuetaCss.prototype={length:1,selector:"",docList:"",x:null,y:null},xiyuetaCss.extend=xiyuetaCss.fn.extend=function(){var t,e,s,r=arguments[0]||{},l=1,i=arguments.length;for(l===i&&(r=this,l--);l<i;l++)if(null!=(t=arguments[l]))for(e in t)s=t[e],"__proto__"!==e&&r!==s&&void 0!==s&&(r[e]=s);return r},(init=xiyuetaCss.fn.init=function(t,e,s){if(this.length=0,this.selector=t,this.x=e,this.y=s,null==this.selector)return this.selector="",this;0<_xytcss.cssArr.length&&("string"==typeof t?(s=(e=_xytcss.getDocument(t,e,s)).split(","),this.length=s.length-1,this.domList=e):"#object"==typeof t&&(this.domList=","+t.x,this.selector="")),_xytcss.domList=this.domList}).prototype=xiyuetaCss.fn,(xiyuetaCSS=$xytcss=$css=xiyuetaCss).fn.extend({parse:function(t){var e;return _xytcss.cssParse(t),0<_xytcss.cssArr.length&&"string"==typeof this.selector&&(t=(e=_xytcss.getDocument(this.selector,this.x,this.y)).split(","),this.length=t.length-1,_xytcss.domList=this.domList=e),this},text:function(t){return null!=t?(_xytcss.text(this.selector,t),this):_xytcss.text(this.selector)},html:function(t){return null!=t?(_xytcss.html(this.selector,t),this):_xytcss.html(this.selector)},css:function(t,e){return null!=e?(_xytcss.css(this.selector,t,e),this):_xytcss.css(this.selector,t)},remove:function(){return _xytcss.remove(this.selector,this.x,this.y),this},after:function(t){return _xytcss.after(this.selector,t,this.x,this.y),this},before:function(t){return _xytcss.before(this.selector,t,this.x,this.y),this},background:function(t){return null==t?_xytcss.getBackground(this.selector,this.x,this.y):(_xytcss.setBackground(this.selector,t,this.x,this.y),this)},getsrc:function(t){return _xytcss.getsrc(this.selector,t,this.x,this.y)},setsrc:function(t){return _xytcss.setSrcUrl(this.selector,t,this.x,this.y),this},charset:function(t){return _xytcss.handleCssCharset(t)},config:function(t){return _xytcss.setConfig(t)},print:function(t){return _xytcss.printCss(t)},debug:function(t){return _xytcss.debug(t)}}),xiyuetaCSS.fn.extend({eq:function(t){null==t||""==t?t=0:(t=parseInt(t))+""=="NaN"&&(t=-1.1);var e,s="";return-1.1==t?(this.selector="",this.length=0):(e=this.domList.split(","),0<=t?t++:t=e.length+t,s=e[t],this.length=1,(this.selector="")!=s&&(s=","+s)),_xytcss.domList=this.domList=s,this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){for(var t=this.domList.split(","),e="",s=1;s<=t.length-1;s++)s%2==1&&(e+=","+t[s]);return _xytcss.domList=this.domList=e,this},odd:function(){for(var t=this.domList.split(","),e="",s=1;s<=t.length-1;s++)s%2==0&&(e+=","+t[s]);return _xytcss.domList=this.domList=e,this},slice:function(t,e){return _xytcss.domList=this.domList=_xytcss.slice(this.domList,this.x,this.y,t,e),-1!=this.domList.indexOf(",")?(e=this.domList.split(","),this.length=e.length-1):this.length=0,this},lv:function(){return _xytcss.lv}}),XiyuetaCommon.prototype.handleFileUrl=function(t){var e="",s=t.indexOf("://");for(-1!=s&&(e=t.substr(0,s+3),t=t.substr(s+3));-1!=t.indexOf("//");)t=t.replace(/\/\//g,"/");if(-1!=(t=-1!=t.indexOf("/./")?t.replace(/\/.\//g,"/"):t).indexOf("/../")){for(var r=[],l=0,i=t.split("/"),n=0;n<=i.length-1;n++)".."==(h=i[n])?(0==l?l=n-1:--l,0<=l&&delete r[l]):(r.push(h),l=0);for(t="",n=0;n<=r.length-1;n++){var h=r[n];null!=r[n]&&(""!=t&&(t+="/"),t+=r[n])}}return e+t},XiyuetaCommon.prototype.fullHttpUrl=function(t,e){if(null==e)return"";if(""==(e=e.replace(/\\/g,"/"))||"./"==e)return"";var s,r="",l="",i="",n=t.indexOf("://");return l=-1!=n?(r=t.substr(0,n+3),n=(s=t.substr(n+3)).lastIndexOf("/"),i=r+s.substr(0,n+1),n=s.indexOf("/"),r+s.substr(0,n+1)):(n=t.lastIndexOf("/"),i=t.substr(0,n+1),n=t.indexOf("/"),t.substr(0,n+1)),"//"==e.substr(0,2)?e="http:"+e:-1==e.indexOf("://")&&(e="/"==e.substr(0,1)?l+e:i+e),this.handleFileUrl(e)},XiyuetaCommon.prototype.getUrlFileName=function(t,e){if(null==e&&(e=""),""==t||null==t)return"";var s=(t=t.replace(/\\/g,"/").trim()).split("/"),r=s[s.length-1],l="",t="";return-1!=(r=-1!=r.indexOf("?")?r.substr(0,r.indexOf("?")):r).indexOf(".")&&(s=r.lastIndexOf("."),l=r.substr(0,s),t=r.substr(s+1).toLowerCase()),""==l?"":("image"==e?""==t?r+=".jpg":-1=="|bmp|jpg|jpeg|gif|png|".indexOf("|"+t+"|")&&(r=l+".jpg"):"css"==e?""==t?r+=".css":-1=="|css|".indexOf("|"+t+"|")&&(r=l+".css"):"js"==e?""==t?r+=".js":-1=="|js|".indexOf("|"+t+"|")&&(r=l+".js"):r=l+"."+t,r)},XiyuetaCommon.prototype.setFileNameA=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"pie")).replace(/\//g,"la")).replace(/:/g,"maohao")).replace(/\*/g,"xin")).replace(/\?/g,"wen")).replace(/"/g,"yinhao")).replace(/</g,"zou")).replace(/>/g,"you")).replace(/\|/g,"heng")).replace(/\./g,"juhao")).replace(/,/g,"douhao")).replace(/&nbsp;/g," ")).replace(/&quot;/g,"shuang")).replace(/\n/g,"")},XiyuetaCommon.prototype.checkUrl=function(t){return!!/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i.test(t=null==t?"":t)},XiyuetaCommon.prototype.getDomain=function(t){if("string"!=typeof t)return"";if(-1<t.indexOf("//")){var e=t.indexOf("//",1),e=t.substring(e+1,t.length),t=e.indexOf("/",1);return e=e.substring(1,t)}return""},_XIYUETA.prototype.cutLabel=function(t,e){for(var s="",r=0;r<=this.htmlArr.length-1;r++)null!=(p=this.htmlArr[r])&&("/style"==p.label?s+=p.upHtml:"link"==p.label&&"stylesheet"==p.rel&&(s+=p.content));var l="*,body,",i=-1;if(""!=(m=this.getDocument(t))){var n=m=m.replace(/,/,""),h=m;-1!=m.indexOf("|")&&(n=(o=m.split("|"))[0],h=o[1]);for(var a,r=n;r<=parseInt(h)-1;r++)null!=(p=this.htmlArr[r])&&"/"!=p.label.substr(0,1)&&(-1==i&&(p.label,i=p.lv),i+1==p.lv&&p.label,i+2==p.lv&&p.label,i+3==p.lv&&p.label,l+=p.label+",",null!=(a=this.handleLabelParam(p,"id"))&&(l+="#"+a.toLowerCase()+","),null!=(a=this.handleLabelParam(p,"class"))&&(l+="."+a.toLowerCase().replace(/ /g,",.")+","));for(var o=l.split(","),l="",r=0;r<=o.length-1;r++)-1==(","+l+",").indexOf(","+o[r]+",")&&(""!=l&&(l+=","),l+=o[r]);var u="",f=new _XIYUETACSS;f.cssParse(s);for(var p,r=0;r<=f.cssArr.length-1;r++)if(null!=(p=f.cssArr[r]))for(var m=","+p.label+",",c=(p.label,0);c<=o.length-1;c++)-1==m.indexOf(","+o[c]+",")&&-1==m.indexOf(","+o[c]+" ")||-1==("\n"+u+"\n").indexOf("\n"+p.html+"\n")&&(u+=p.html+"\n");xiyuetaCSS().parse(u),""!=(u=xiyuetaCSS().print("zip"))&&(u="<style>"+u+"\n</style>\n");n=xiyueta(t).html(null,"all");this.parseHTML(n);n=u+this.printHTML("format")}return n},_XIYUETA.prototype.getUrlStr=function(e,s){var r=this;jQuery.ajax({url:this.config.serverurl+"?act=getUrlStr&n="+Math.random(),type:"POST",data:{httpurl:s},error:function(t,e,s){},success:function(t){xiyuetaCSS().parse(t),xiyuetaCSS().allcss("|url","server="+s),e.content=xiyuetaCSS().print(),r.config.downcss--,0==r.config.downcss?alert(" 下载全部CSS完成，可以点击下一步了 "):alert(" 下载CSS完成,还乘"+r.config.downcss)}})},xiyueta.fn.extend({cutlabel:function(t){return _xyt.cutLabel(this.selector,t)}});var _XIYUETAASP=function(t){"use strict";this.aspSource=t=null==t?"":t,this.aspArr=[],this.common=new XiyuetaCommon,this.config={},this.phpPublicObjectList="",this.phpPublicFunList="",this.aspParse=function(t){null!=t&&(this.aspSource=t,this.aspArr=[]);var e,s="",r="",l="",i="",n="",h="",a="",o=!1,u=!1,f=0,p="",m=0;this.aspSource=this.aspSource.replace(/\t/g,"  ");for(var c=this.aspSource.split("\n"),d=0;d<=c.length-1;d++){for(var b,g,x,v=0;v<=c[d].length;v++)if(r=s,s=c[d].substr(v,1),l=c[d].substr(v+1,1),e=c[d].substr(v+1,2),0==o)"%"==s&&"<"==r?(o=!0,this.aspArr.push({lv:f,type:"<asp>",label:"<%",upHtml:a.substr(0,a.length-1),html:"<%",tagpair:2}),i=a=h="",f++):a+=s;else if("%"==s&&">"==l)o=!1,f--,this.aspArr.push({lv:f,type:"<asp>",label:"%>",upHtml:a,html:"%>",tagpair:2}),i=a=h="",v++,r=s,s=c[d].substr(v,1),l=c[d].substr(v+1,1);else if(h+=s,'"'==s||""!=p)'"'==s&&m++,m%2==0&&'"'!=l?(p+=s,this.aspArr.push({lv:f,type:"<str>",label:i,upHtml:a,html:p,tagpair:2}),m=0,i=a=h=p=""):p+=s;else if("("==s)f++,this.aspArr.push({lv:f,type:"<(>",label:s,upHtml:a,html:h,tagpair:2}),i=a=h="";else if(")"==s)this.aspArr.push({lv:f,type:"<)>",label:s,upHtml:a,html:h,tagpair:2}),i=a=h="",f--;else if(-1!="|&|,|+|-|*|/|=|:|>|<|".indexOf("|"+s+"|"))this.aspArr.push({lv:f,type:"<fuhao>",label:s,upHtml:a,html:h,tagpair:1}),"="!=s&&">"!=s||">"!=(g=this.aspArr[this.aspArr.length-2]).label&&"<"!=g.label||(g.label+=s,g.html+=" "+s,this.aspArr.pop()),i=a=h="";else{if("'"==s){this.aspArr.push({lv:f,type:"<note>",label:s,upHtml:h,html:c[d].substr(v+1),tagpair:1}),i=a=h="";break}""==s||" "==s||"\t"==s||-1=="' ()+-*/=><&,:".indexOf(l)&&v!=c[d].length&&"%>"!=e?" "!=s&&"\t"!=s&&(i+=s.toLowerCase()):(i+=s.toLowerCase(),n=-1!="0123456789".indexOf(i.substr(0,1))?"<int>":"("==l||-1!=",not,strcomp,vbtextcompare,step,dim,if,then,elseif,else,end,function,sub,sele/ct,case,call,for,to,next,set,nothing,do,while,loop,and,true,false,vbcrlf,in,class,new,mod,byval,byref,or,exit,rnd,lcase,ucse,asc,".indexOf(","+i+",")||-1!=i.indexOf(".")?"<fun>":"<var>",this.aspArr.push({lv:f,type:n,label:i,upHtml:a,html:h,tagpair:2}),"function"==i?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(f--,b.lv--,b.label+="function",b.html+=" function",this.aspArr.pop()):"exit"==b.label?(b.label+="function",b.html+=" function",this.aspArr.pop()):f++:"sub"==i?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(f--,b.lv--,b.label+="sub",b.html+=" sub",this.aspArr.pop()):"exit"==b.label?(b.label+="sub",b.html+=" sub",this.aspArr.pop()):f++:"if"==i?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(f--,b.lv--,b.label+="if",b.html+=" if",this.aspArr.pop()):f++:"else"==i||"elseif"==i||"then"==i?(this.aspArr[this.aspArr.length-1].lv--,"else"==i&&"case"==(b=this.aspArr[this.aspArr.length-2]).label&&(b.lv,b.label+="else",b.html+=" else",this.aspArr.pop())):"select"==i?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(f--,b.lv--,b.label+="select",b.html+=" select",this.aspArr.pop(),u&&(u=!1,f--,b.lv--)):f++:"case"==i?"select"==(g=this.aspArr[this.aspArr.length-2]).label?(g.label+="case",g.html+=" case",this.aspArr.pop()):u?this.aspArr[this.aspArr.length-1].lv--:(f++,u=!0):"class"==i?"end"==(b=this.aspArr[this.aspArr.length-2]).label?(f--,b.lv--,b.label+="class",b.html+=" class",this.aspArr.pop()):f++:"each"==i?"for"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="each",g.html+=" each",this.aspArr.pop()):"while"==i?("do"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="while",g.html+=" while",this.aspArr.pop()),f++):"do"==i?"exit"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="do",g.html+=" do",this.aspArr.pop()):"loop"==i?(f--,this.aspArr[this.aspArr.length-1].lv--):"for"==i?"exit"==(g=this.aspArr[this.aspArr.length-2]).label?(g.label+="for",g.html+=" for",this.aspArr.pop()):f++:"next"==i?(g=this.aspArr[this.aspArr.length-2],x=this.aspArr[this.aspArr.length-4],"resume"==g.label?(x.label+="errorresumenext",x.html+=" error resume next",this.aspArr.pop(),this.aspArr.pop(),this.aspArr.pop()):(f--,this.aspArr[this.aspArr.length-1].lv--)):"goto"==i&&(g=this.aspArr[this.aspArr.length-2],x=this.aspArr[this.aspArr.length-3],"error"==g.label&&(x.label+="errorgoto",x.html+=" error goto",this.aspArr.pop(),this.aspArr.pop())),n=i=a=h="")}d+1<c.length&&(this.aspArr.push({lv:f,type:"<br>",label:"\n",upHtml:a,html:"\n",tagpair:1}),a="")}""!=a&&this.aspArr.push({lv:f,type:"<html>",label:"",upHtml:a,html:"",tagpair:1})},this.tophp=function(){for(var t="",e="",s=[],r=[],l=[],i=0,n=!1,h=!1,a=!1,o="",u="",f="++",p="",m=!1,c=-1,d=-1,b=!1,g=-1,x="",v=",",y=","+this.phpPublicFunList,L=","+this.phpPublicObjectList,A=-1,O=[],_=!0,w="",C="",H=",",I=!1,S=0;S<=this.aspArr.length-1;S++){var P,_=!0;A==S&&(":"==(s=this.aspArr[S]).label?(e+=":",S++):e+=":",A=-1),0<S&&(r=this.aspArr[S-1]),s=this.aspArr[S],l={},S<this.aspArr.length-1&&(l=this.aspArr[S+1]),null!=O[s.lv]&&(e=O[s.lv]+"\n"+e,O[s.lv]=void 0),"<br>"==r.type&&(e+=this.common.copyStr("    ",s.lv+i)),1==s.phpDel||("<%"==s.label?(e+=s.upHtml+"<?",i--,"="!=l.label&&(e+="PHP","<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type&&(e+=" "))):"%>"==s.label?e+="?>":"<br>"==s.type?(h&&(e+="}",h=!1),e+=s.upHtml+"\n"):"<note>"==s.type?e+="//"+s.html:"<html>"==s.type?e+=s.upHtml+s.html:"<var>"==s.type?"onerrorresumenext"==s.label||("onerrorgoto"==s.label?e+="$"+s.label:(!a&&0!=I||""==w||(H+=s.label+","),-1!=y.indexOf(","+s.label+",")?"class"==r.label?(_=!1,e+=s.label+"{"):"new"==r.label?e+=s.label+"()":"="==l.label?(e+="return ",S++):(e+=s.label,"<(>"!=l.type&&(e+="()")):0==a&&-1==H.indexOf(","+s.label+",")&&I?e+="$GLOBALS['"+s.label+"']":(e+="$"+s.label,a&&(e+="=''")),e+=this.getAddFenHao(e,l,h))):"<fuhao>"==s.type||"<int>"==s.type||"<(>"==s.type||"<)>"==s.type?n&&"="==s.label?e+="==":"&"==s.label?e+=".":"("==s.label?c==s.lv?e+="[":e+="(":")"==s.label?(c==s.lv?(e+="]","("!=l.label&&(c=-1)):g==s.lv?(t+=e+","+x+")",g=-1,x=e=""):d==s.lv?(d=-1,e+="){",""!=w&&(I=!0,"function"==C&&(e+="\n"+this.common.copyStr("    ",s.lv+i-1)+"$"+w+"=''"))):e+=")",e+=this.getAddFenHao(e,l,h)):","==s.label?m?(e+="]=",m=!1):g==s.lv?(x=e,e=""):a?(e+=";","<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type||(a=!1)):e+=",":":"==s.label?(";"!=e.substr(e.length-1)&&(e+=";"),a=!1):"<>"==s.label?e+="!=":"<int>"==s.type?(e+=s.label,-1!=A||"selectcase"==p||"<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type||(e+=";")):e+=s.label:"<str>"==s.type?(e+="'"+s.html.substr(1,s.html.length-2).replace(/""/g,'"').replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'",e+=this.getAddFenHao(e,l,h)):"<fun>"==s.type&&("response.write"==s.label?e+="echo":"response.end"==s.label?e+="die":"request.querystring"==s.label?e+="querystring":"request.form"==s.label?e+="form":"request.servervariables"==s.label?e+="servervariables":"err.number"==s.label?e+="0":"err.clear"==s.label?e+="echo('');":"nothing"==s.label?e+="null":"step"==s.label?(e+=";",f="+="+l.label,l.phpDel=!0):"byref"==s.label?e+="&":"isnumeric"==s.label?e+="is_numeric":"strcomp"==s.label?e+="aspStrComp":"vbtextcompare"==s.label?e+="''":"chr"==s.label?e+="aspchr":"hex"==s.label?e+="dechex":"and"==s.label?e+=" && ":"or"==s.label?e+=" || ":"mod"==s.label?e+=" % ":"not"==s.label?e+="!":"exitfor"==s.label?e+="break":"ubound"==s.label?e+="count":"split"==s.label?(v+=this.aspArr[S-2].label+".add,",t+=e+="explode(",e="",g=s.lv+1,S++):"new"==s.label?e+="new ":"function"==s.label||"sub"==s.label?(d=this.aspArr[S+2].lv,e+="function ",-1==y.indexOf(","+l.label+",")&&(y+=l.label+","),w=l.label,C=s.label):"endfunction"==s.label||"endsub"==s.label?("endsub"==s.label?e+=this.common.copyStr("    ",s.lv)+"return '';\n}":e+=this.common.copyStr("    ",s.lv)+"return @$"+w+";\n}",C=w="",I=!(H=",")):"exitfunction"==s.label?e+="return ''":"if"==s.label?(e+=s.label+"(",n=!0):"elseif"==s.label?(e+="}else if(",n=!0):"then"==s.label?(e+="){","<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type&&(h=!0),n=!1):"else"==s.label?e+="}else{":"endif"==s.label?(e+="}",h=!1):"selectcase"==s.label?(e+="switch ","("!=l.label&&(e+="("),p="selectcase"):"endselect"==s.label?(null!=O[s.lv+1]&&(e=O[s.lv+1]+"\n"+e,O[s.lv+1]=void 0),e+="}",0):"caseelse"==s.label?(e+="default ",O[s.lv]=this.common.copyStr("    ",s.lv)+"break;",A=S+1,_=!!0):"case"==s.label?(e+=s.label+" ",O[s.lv]=this.common.copyStr("    ",s.lv)+"break;",A=S+2):"vbcrlf"==s.label?e+='"\\n"':"createobject"==s.label?(0<S-1&&(v+=this.aspArr[S-2].label+".add,"),S+1<this.aspArr.length&&'"scripting.dictionary"'==this.aspArr[S+2].html.toLowerCase()&&(e+="array();",S+=3)):-1!=v.indexOf(","+s.label+",")?(-1!=s.label.indexOf(".")?e+="$"+s.label.substr(0,s.label.indexOf("."))+"[":(e+="$"+s.label,c=l.lv),","==this.aspArr[S+2].label&&(m=!0)):-1!=v.indexOf(","+s.label+".")?(e+="$"+s.label,c=l.lv):"do"==s.label?e+="for(;;) {":"exitdo"==s.label?e+="break":"dowhile"==s.label?(e+="while","("!=l.label&&(e+="("),b=!0):"loop"==s.label?e+="}":"class"==s.label?(e+="class ",-1==y.indexOf(","+l.label+",")&&(y+=l.label+","),-1==L.indexOf(","+l.label+",")&&(L+=l.label+",")):"endclass"==s.label?e+="}":"foreach"==s.label?(P=this.aspArr[S+1],e+="foreach($"+this.aspArr[S+3].label+" as $key=>$"+P.label+"){",S+=3):"for"==s.label?(e+=s.label,"("!=l.label&&(e+="("),o="for",u=l.label,f="++"):"for"==o&&"to"==s.label?(P=this.aspArr[S+1],"ubound"==l.label?e+=";$"+u+"<":e+=";$"+u+"<=",o="forto"):"next"==s.label?e+="}":"dim"==s.label?a=!0:-1!=s.label.indexOf(".")?e+="$"+s.label.replace(/\./g,"->"):-1==",call,set,byval,".indexOf(","+s.label+",")&&(-1!=y.indexOf(","+s.label+",")?(w==s.label&&"function"!=r.label&&"sub"!=r.label&&(e+="$"),"class"==r.label?e+=s.label+"{":"new"==r.label?e+=s.label+"()":(e+=s.label,"<(>"!=l.type&&w!=s.label&&(e+="()"))):e+=s.label),"<br>"!=l.type&&"<note>"!=l.type||!_||-1==",endfunction,then,endif,next,else,endselect,endclass,".indexOf(","+s.label+",")&&0==b&&(e+=";"))),"forto"!=o||"<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type||"to"==s.label?"selectcase"!=p||"<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type||"selectcase"==s.label?!b||"<br>"!=l.type&&"<note>"!=l.type&&"<asp>"!=l.type||(")"!=r.label&&(e+=")"),e+="{",n=b=!1):(p="",")"!=r.label&&(e+=")"),e+="{"):(e+="$"+u+f,u=o="",")"!=r.label&&(e+=")"),e+="{"),"<br>"==s.type&&(a=!1,t+=e,e="")}return t+e},this.getAddFenHao=function(t,e,s){return("<br>"==e.type||"<note>"==e.type||"<asp>"==e.type)&&"{"!=t.substr(t.length-1,1)||s&&"else"==e.label?";":""},this.aspBeautify=function(){for(var t=0;t<=this.aspArr.length-1;t++){var e=this.aspArr[t];if("class"==e.label)t<this.aspArr.length&&(s=this.aspArr[t+1],this.phpPublicObjectList+=s.label+",",this.phpPublicFunList+=s.label+",");else if("then"==e.label){var s={};if("<br>"!=(s=t<this.aspArr.length-1?this.aspArr[t+1]:s).type&&"<note>"!=s.type&&"<asp>"!=s.type)for(var r=t+1;r<=this.aspArr.length-1;r++)--this.aspArr[r].lv}else if("sub"==e.label||"function"==e.label)t<this.aspArr.length-1&&(s=this.aspArr[t+1],this.phpPublicFunList+=s.label+",");else if("do"==e.label){if("<br>"==(s=this.aspArr[t+1]).type)for(r=t+1;r<=this.aspArr.length-1;r++)(e=this.aspArr[r]).lv++}else"echo"==e.label?e.label=e.html="aspEcho":"die"==e.label?e.label=e.html="aspDie":"print"==e.label&&(e.label=e.html="aspPrint")}if(""!=this.phpPublicFunList)for(var l=","+this.phpPublicFunList+",",t=0;t<=this.aspArr.length-1;t++)"<var>"==(e=this.aspArr[t]).type&&-1!=l.indexOf(","+e.label+",")&&(e.type="<fun>")},this.debug=function(){console.log(this.aspArr)}},_xytasp=new _XIYUETAASP;xiyuetaASP=$xytasp=$asp=function(t){return{parse:function(t){return _xytasp.aspParse(t),this},beautify:function(){return _xytasp.aspBeautify(t),this},tophp:function(t){return this.beautify(),((t=null==t?!1:t)?'<?PHP include_once "ASP.php" ?>\n':"")+_xytasp.tophp()},debug:function(t){return _xytasp.debug(t)}}};