/*! xiyueta v1.3.6 | Author xiyueta Adream http://xiyueta.com/ | Released under the MIT license  */
String.prototype.trim=function(){return(this+"").replace(/(^\s*)|(\s*$)/g,"")};var _CONSOLE=function(){this.log=function(t,e){if("object"==typeof t){var r,i;for(r in t)-1==(t[r]+"").indexOf("function")&&(i=(i=t[r]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(i="object"==typeof t[r]?this.log(t[r]):i)?response.write(r+"<br>"):response.write(r+":  "+i+"<br>"))}else"string"==typeof e&&(t+=" "+e),response.write(t+"<br>")}},console=new _CONSOLE;function XiyuetaCommon(){this.copyStr=function(t,e){for(var r="",i=1;i<=e;i++)r+=t;return r},this.timeFormat=function(t,e){var r,i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return e},this.secondToDate=function(t){t=parseFloat(t)/1e3;return t=null!=t&&""!=t?60<t&&t<3600?parseInt(t/60)+" 分钟 "+parseInt(60*(parseFloat(t/60)-parseInt(t/60)))+" 秒 ":3600<=t&&t<86400?parseInt(t/3600)+" 小时 "+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+" 分钟 "+parseInt(60*(parseFloat(60*(parseFloat(t/3600)-parseInt(t/3600)))-parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))))+" 秒 ":parseInt(t)+" 秒 ":t},this.bystesLength=function(t){for(var e=0,r=0;r<t.length;r++)255<t.charCodeAt(r)?e+=2:e++;return e},this.getFileSize=function(t){return t<1048576?(t/1024).toFixed(2)+"KB":1048576==t?"1MB":1048576<t&&t<1073741824?(t/1048576).toFixed(2)+"MB":1048576<t&&1073741824==t?"1GB":1073741824<t&&t<1099511627776?(t/1073741824).toFixed(2)+"GB":"文件超过1TB"},this.renderSize=function(t){if(null==t||""==t)return"0 Bytes";var e=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),t=parseFloat(t),r=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,r)).toFixed(2)+e[r]},this.isArray=function(t){return"object"==typeof t&&t.constructor==Array}}var _XIYUETA=function(){"use strict";this.version="1.3.6_5",this.htmlSource="",this.htmlArr=[],this.lv=0,this.isHtmlErr=!1,this.common=new XiyuetaCommon,this.config={httpurl:"",serverurl:"/api/downWeb/default.asp",jsdir:"js/",cssdir:"css/",imagesdir:"images/"},this.tplConfig={type:"xiyuetacms",minrow:4},this.singleLabelList="|br|hr|img|link|meta|param|input|!doctype|rect|line|col|wbr|base|basefont|area|";for(var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),r=0;r<t.length;r++){var i=t[r];e["[object "+i+"]"]=i.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.parseHTML=function(t){this.htmlSource=t+="";var e="",r="",i="",s="",n=!(this.htmlArr=[]),l=!1,h=!1,o=!1,a=!1,u=!1,f=0,m=-1;this.isHtmlErr=!1;for(var d=0;d<this.htmlSource.length;d++){var c,g,p,x,b=e,e=this.htmlSource.substr(d,1);n?(i+=e,o?">"==e&&"--\x3e"==i.substr(i.length-3,3)&&(h=n=o=!1,this.htmlArr.push({_index:++m,lv:f+1,label:"!--",upHtml:s,downHtml:"",html:i,tagpair:1}),s=i=""):l&&"\x3c!--"==i?o=!0:a?">"==e&&"%"==b&&(h=n=a=!1,i=s+i,s=""):l&&"<%"==i?a=!0:u?">"==e&&"?"==b&&(h=n=u=!1,i=s+i,s=""):l&&"<?"==i?u=!0:-1!=" \n\t".indexOf(e)&&l?l=!1:"<"==e?"%"==(x=this.htmlSource.substr(d+1,1).toLowerCase())?0<(c=this.htmlSource.substr(d+1).indexOf("%>"))&&(i+=this.htmlSource.substr(d+1).substr(0,c+2),d+=c+2):"?"==x?0<(c=this.htmlSource.substr(d+1).indexOf("?>"))&&(i+=this.htmlSource.substr(d+1).substr(0,c+2),d+=c+2):(n=l=!1,i=s,d--):">"==e&&(n=l=!1,b=2,"/"==r.substr(0,1)?h=!0:(f++,"/"!=r.substr(r.length-1,1)&&-1==this.singleLabelList.indexOf("|"+r.toLowerCase()+"|")||(h=!0,b=1,r=r.replace(/\//g,"").trim())),g=r.toLowerCase(),this.htmlArr.push({_index:++m,lv:f,label:g,upHtml:s,downHtml:"",html:i,tagpair:b}),f<1&&(this.isHtmlErr=!0),s=i="",h&&(f--,h=!1),"script"==g?(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("<\/script>"),i=this.htmlSource.substr(d+1,p),d+=p):"style"==g?(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("</style>"),i=this.htmlSource.substr(d+1,p),d+=p):"textarea"==g&&(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("</textarea>"),i=this.htmlSource.substr(d+1,p),d+=p)),l&&(r+=e)):"<"==e?(x=this.htmlSource.substr(d+1,1).toLowerCase(),-1!="abcdefghijklmnopqrstuvwxyz!/%?".indexOf(x)?(s=i,i=e,h=!(l=n=!0),r=""):i+=e):i+=e}""!=i&&this.htmlArr.push({_index:++m,lv:f,label:"",upHtml:s,html:i,downHtml:""}),this.lv=f},this.handleLabelParam=function(t,e,r){if(null==t)return"";if(null==r){if(null!=t[e])return t[e]}else r+="";for(var i=!1,s=!1,n="",l="",h=!1,o="",a=!1,u=!0,f=0,m=0,d=!1,c=t.label.length+1;c<t.html.length;c++){var g,p,x,b,y=t.html.substr(c,1);if(h)if(a)if(d)">"==y&&(d=!1),l+=y;else if(y==o||">"==y){if(t[n=n.toLowerCase()]=l,a=h=!1,o="",e==n)return null==r?l:(""==r?(x=t.html.substr(0,m-1).trim(),">"!=(b=t.html.substr(c+1).trim()).substr(0,1)&&(b=" "+b),t.html=x+b,t[n]=void 0):(g=(p=f)+l.length,u&&(p++,g++),x=t.html.substr(0,p),b=t.html.substr(g),t.html=x+r+b,t[n]=r),t);if(">"==y&&null!=r)return""!=r&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+r+'">'),t[e]=r,t}else"<"==y&&(d=!0),l+=y;else'"'==y||"'"==y?(o=y,f=c,u=a=!0):" "!=y&&(o=" ",f=c,l=y,u=!(a=!0));else{if(">"==y&&0==i)return null==r?void 0:(""!=r&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+r+'">',t[e]=r),t);if(i){if("="==y)h=!(i=!1),o=l="";else if(0==s)-1!=" \t\n".indexOf(y)?s=!0:n+=y;else if(-1==" \t\n".indexOf(y)){if(e==n)return null==r?"":(""==r?(x=t.html.substr(0,m).trim(),">"!=(b=t.html.substr(c).trim()).substr(0,1)&&(b=" "+b),t.html=x+b,t[n]=void 0):(p=m+n.length,x=t.html.substr(0,p),b=t.html.substr(p),t.html=x+'="'+r+'"'+b,t[n]=r),t);i=!1,n=""}}else-1==" \t\n".indexOf(y)&&(s=!(i=!0),n=y,m=c)}}},this.getDocument=function(t,e,r,i,s){if(null==t&&(t=""),null==i&&(i=!1),0==this.htmlArr.length)return console.log("%c 需要先解析一段html文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf(",")){for(var n=[],l=t.split(","),h=0;h<l.length;h++){var o=this.getDocument(l[h],e,r,i);n=n.concat(o)}return n=this.delDomListDuplicate(n)}if(""==(t=t.trim()))return"";null==e&&(e=0),null==r&&(r=this.htmlArr.length-1);var a=-1.1,u=-1.1,f=-1.1,m=-1.1,d=-1.1,c="",g=!1,p="",x="",b="",y="",v="",L="";if("number"==this.toType(s)&&(u=s),-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var _=!1,L="",h=0;h<t.length;h++){var A=t.substr(h,1);0!=_||"'"!=A&&'"'!=A&&"("!=A?1==_&&(" "==A?A="-Space-":"'"!=A&&'"'!=A&&")"!=A||(_=!1,"'"!=A&&'"'!=A||(A=""))):(_=!0,"'"!=A&&'"'!=A||(A="")),L+=A}t=L}var O,s=t.indexOf(">"),w=t.indexOf(" "),C=" ",D=w;if(-1!=s&&(s<w||-1==w)&&(C=">",D=s),-1<D&&(p=t.substr(D+1).trim(),t=t.substr(0,D)),-1!=(D=t.indexOf(":"))&&(s=w="",O=(A=t.substr(D+1)).indexOf("("),S=A.indexOf(")"),-1!=O&&-1!=S?(w=A.substr(0,O).toLowerCase(),S=(s=A.substr(O+1)).indexOf(")"),s=s.substr(0,S).replace(/-Space-/g," ").trim()):w=A.toLowerCase(),"first"==w?a=0:"last"==w?a=-1:"even"==w?f=0:"odd"==w?f=1:"eq"==w?(a=0,(a=""!=s?parseInt(s):a)+""=="NaN"&&(a=-.1,t="")):"lv"==w?(u=1,(u=""!=s?parseInt(s):u)+""=="NaN"&&(u=-.1,t="")):"gt"==w?""!=s&&(m=parseInt(s))+""=="NaN"&&(m=-.1,t=""):"lt"==w?""!=s&&(d=parseInt(s))+""=="NaN"&&(d=-.1,t=""):"header"==w?g=!0:"contains"==w?c=s:console.log(t,"没有动作 "+w),""!=(t=t.substr(0,D))||-.1==a&&-.1==u||(t="*")),-1!=(D=t.indexOf("["))&&(S=(A=t.substr(D+1)).indexOf("]"),-1==(A=A.substr(0,S)).indexOf("=")?(x=A,b="*"):(x=(O=A.split("="))[0],b=O[1].replace(/-Space-/g," "),s=x.substr(x.length-1),-1!="!^$*~|".indexOf(s)&&(x=x.substr(0,x.length-1),y=s)),-1!=x.indexOf("|")&&(x=(w=x.split("|"))[0],"NOUL"==w[1]&&(b=b.toLowerCase(),v=w[1])),""==(t=t.substr(0,D))&&(t="*")),"#"==t.substr(0,1)){if(0<a)return"";a=0}var H,S={type:"",name:"",nFocus:-1.1},n=(-1<(D=t.substr(1).lastIndexOf("."))?(t=(H=t).substr(0,D+1),S={type:".",name:H.substr(D+2).toLowerCase()}):-1<(D=t.substr(1).lastIndexOf("#"))&&(t=(H=t).substr(0,D+1),S={type:"#",name:H.substr(D+2).toLowerCase()}),this.serchDocument(t,e,r,x,b,y,v,S));if(0<n.length)if(-1.1!=a)n=a<0?[n[n.length+a]]:[n[a]];else if(-1.1!=u){for(var T=[],h=0;h<n.length;h++)(j=this.htmlArr[n[h].x]).lv==u&&T.push(n[h]);n=T}else if(-1.1!=f){for(T=[],h=0;h<n.length;h++)h%2==f&&T.push(n[h]);n=T}else if(-1.1!=m){for(T=[],h=m+1;h<n.length;h++)T.push(n[h]);n=T}else if(-1.1!=d){d>n.length&&(d=n.length);for(T=[],h=0;h<d;h++)T.push(n[h]);n=T}else if(""!=c){for(var j,T=[],h=0;h<n.length;h++)(j=n[h]).x!=j.y&&-1!=this.text(j).indexOf(c)&&T.push(n[h]);n=T}else if(g){for(T=[],l="h1,h2,h3,h4,h5,h6,,h7,h8,h9".split(","),h=0;h<n.length;h++)for(var e=n[h].x,r=n[h].y,o=this.getDocument(t+" "+l[h],e,r,i),I=0;I<o.length;I++)T.push(o[I]);n=T}if(""!=p&&0<n.length){for(var U,T=[],h=0;h<n.length;h++)(e=n[h].x)!=(r=n[h].y)&&(U="",">"==C&&(U=this.htmlArr[e].lv+1),o=this.getDocument(p,e+1,r-1,!0,U),T=T.concat(o));n=T}return n=0==i?this.delDomListDuplicate(n):n},this.delDomListDuplicate=function(t){for(var e="",r=-1,i=[],s=0;s<t.length;s++){var n,l=t[s];null!=l&&(n=l.x+"|"+l.y,-1==(","+e+",").indexOf(","+n+",")&&(e+=","+n,r++,l.index=r,i.push(l)))}return i},this.domListAsc=function(t){for(var e=[],r=-1,i=0;i<t.length;i++){for(var s,n=void 0,l=0;l<t.length;l++){var h=t[l];null!=h&&(null==n||h.x<n.x)&&(n=h,s=l)}r++,n.index=r,e.push(n),t[s]=void 0}return e},this.serchDocument=function(t,e,r,i,s,n,l,h){null==i&&(i=""),null==s&&(s=""),null==n&&(n=""),null==l&&(l="");for(var o=!1,a=[],u=0,f=0,m=!1,d=e;d<=r;d++){var c,g,p=this.htmlArr[d];if(null!=p)if(o&&this.checkEndSelector(p,t)&&u==p.lv){o=!1,m&&(a[a.length-1].y=d);for(var m=!1,x=this.serchDocument(t,f+1,d,i,s,n,l,h),b=0;b<x.length;b++)a.push(x[b])}else this.checkStartSelector(p,t,h)&&0==o&&(2==p.tagpair&&(o=!0,u=p.lv),f=d,c=!0,""!=i&&(g=this.handleLabelParam(p,i),"NOUL"==l&&null!=g&&(g=g.toLowerCase()),"^"==n?null!=g&&g.substr(0,s.length)==s||(c=!1):"|"==n?null!=g&&(g+"-").substr(0,s.length+1)==s+"-"||(c=!1):"$"==n?null!=g&&g.substr(-1*s.length)==s||(c=!1):"~"==n?null!=g&&-1!=(" "+g+" ").indexOf(" "+s+" ")||(c=!1):"*"==n?null!=g&&-1!=g.indexOf(s)||(c=!1):"!"==n?g==s&&(c=!1):null!=g&&"*"==s?c=!0:g!=s&&(c=!1)),c&&(a.push({index:a.length,x:d,y:d}),2==p.tagpair&&(m=!0)))}return a},this.checkStartSelector=function(t,e,r){if(""==t.label)return!1;var i=e+" ",s=t.label.substr(0,1),n=e.substr(0,1);if("/"==s)return!1;if("*"==n)return"."==r.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+r.name+" "):"#"!=r.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==r.name;if("#"==n){var l=e.substr(1,i.indexOf(" ")-1);if(this.handleLabelParam(t,"id")==l)return""==r||("."==r.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+r.name+" "):"#"!=r.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==r.name)}else if("."==n){var h,o,l=e.substr(1,i.indexOf(" ")-1).toLowerCase();if(null==(h=" "+this.handleLabelParam(t,"class")+" "))return!1;if(-1!=(h=h.toLowerCase()).indexOf(" "+l+" "))return""==r||("."==r.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+r.name+" "):"#"!=r.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==r.name)}else if(t.label+" "==e.substr(0,t.label.length+1).toLowerCase()+" ")return"."==r.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+r.name+" "):"#"!=r.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==r.name;return!1},this.checkEndSelector=function(t,e){t.label.substr(0,1);var r=e.substr(0,1);return"*"==r||("#"==r||"."==r||t.label=="/"+e.substr(0,t.label.length-1).toLowerCase())},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var r=[],i=0;i<t.length;i++){var s=t[i],n=e.call(s,i,s);if(s.value=n,r.push(s),"boolean"==typeof n&&0==n)break}return r},this.find=function(t,e){if(t=this.handleDomList(t=null==t?[]:t),"object"==this.toType(e)){for(var r=e.domList,i=[],s=0;s<r.length;s++)for(var n=r[s].x,l=r[s].y,h=0;h<t.length;h++){var o=t[h].x,a=t[h].y;o<=n&&n<=a&&i.push(r[s])}return this.delDomListDuplicate(i)}for(var u,i=[],h=0;h<t.length;h++)(n=t[h].x)!=(l=t[h].y)&&(u=this.getDocument(e,n,l),i=i.concat(u));return this.delDomListDuplicate(i)},this.add=function(t,e){t=this.handleDomList(t=null==t?[]:t);var r=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(r="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;e=t.concat(r);return e=this.delDomListDuplicate(e),this.domListAsc(e)},this.not=function(t,e){t=this.handleDomList(t=null==t?[]:t);var r=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(r="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;for(var i=[],s=0,n=0;n<t.length;n++){for(var l=t[n],h=!0,o=0;o<r.length;o++){var a=r[o];if(a.x==l.x&&a.y==l.y){h=!1;break}}h&&(l.index=s++,i.push(l))}return i},this.is=function(t,e){t=this.handleDomList(t=null==t?[]:t);var r=[];if("number"==typeof e||"function"==typeof e)return!1;if(null==e)return!1;if(""==(r="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return!1;for(var i=0;i<t.length;i++)for(var s=t[i],n=0;n<r.length;n++){var l=r[n];if(l.x==s.x&&l.y==s.y)return!0}return!1},this.text=function(t,e){var r="get",t=this.handleTextHtml(t,e,"text",r=2<=arguments.length?"set":r);return t=null==t?"":t},this.html=function(t,e){var r=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"html",r)},this.htmlwrap=function(t,e){var r=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"htmlwrap",r)},this.handleTextHtml=function(t,e,r,i){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var n=this.each(t,e),l=0;l<n.length;l++)n[l]&&this.handleTextHtml(n[l],n[l].value,r,i);return!1}if("set"==i){if("undefined"==s)return;null==e?e="":e+="","text"==r&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}for(var h="",l=0;l<t.length;l++)if(null!=t[l])for(var o=t[l].x,a=t[l].y,u=o;u<=a;u++){var f=this.htmlArr[u];if(f)if("text"==r)u==o?"get"==i&&(h+=f.downHtml):u<a?"set"==i?delete this.htmlArr[u]:h+=f.upHtml+f.downHtml:u==a&&("get"==i?h+=f.upHtml:f.upHtml=e);else if(u==o)"get"==i?("htmlwrap"==r&&(h+=f.html),h+=f.downHtml):"htmlwrap"==r&&(f.html="",u==a&&(f.upHtml=e));else if(u<a)"set"==i?delete this.htmlArr[u]:h+=f.upHtml+f.html+f.downHtml;else if(u==a)if("get"==i){if(h+=f.upHtml,"htmlwrap"==r&&(h+=f.html),"get"==i)return h}else f.upHtml=e,"htmlwrap"==r&&(f.html="")}return"get"==i?h:void 0}},this.handleCssParam=function(t,e,r){var i,s,n;if(null==r)return s="a{"+(n=null==(n=this.attr(t,"style"))?"":n)+"}",$xytcss("a").parse(s).css(e);r+="",i=n=null==(n=this.attr(t,"style"))?"":n,s="a{"+n+"}",$xytcss("a").parse(s).css(e,r),n=(n=$xytcss().print()).substr(2,n.length-3).trim(),i.trim()!=n&&(2<=n.split(";").length&&(n=n.replace(/ /g,"").replace(/:/g,": ").replace(/;/g,"; ").trim()),this.attr(t,"style",n))},this.css=function(t,e,r){var i=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,r,"css",i)},this.attr=function(t,e,r){var i=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,r,"attr",i)},this.prop=function(t,e,r){var i=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,r,"prop",i)},this.handleCssAttr=function(t,e,r,i,s){if("function"==this.toType(r)){for(var n=this.each(t,r),l=0;l<n.length;l++)n[l]&&this.handleCssAttr(n[l],e,n[l].value,i,s);return!1}if("object"==this.toType(e)){for(var h in e)this.handleCssAttr(t,h,e[h],i,s);return this}if(null!=t&&null!=e&&""!=(e=(e+="").trim())){t=this.handleDomList(t);for(l=0;l<t.length;l++){var o=t[l];if("attr"==i){if("get"==s)return this.handleLabelParam(this.htmlArr[o.x],e);this.handleLabelParam(this.htmlArr[o.x],e,r)}else if("prop"==i){var a=this.htmlArr[o.x],u=this.checkTagAttrExist(a.label,e);if("get"==s)return 0==u?void 0:this.handleLabelParam(a,e);u&&this.handleLabelParam(a,e,r)}else{if("get"==s)return this.handleCssParam(o,e);this.handleCssParam(o,e,r)}}}},this.data=function(t,e,r){if(null==t||null==e)return!1;if(""!=e.trim()){e="data_"+e;var i="get",s=(t=this.handleDomList(t)).length;"get"==(i=3<=arguments.length?"set":i)&&(s=1);for(var n=0;n<s;n++){var l=this.htmlArr[t[n].x];if(l){if("get"==i)return l[e];l[e]=r}}}},this.removeAttr=function(t,e){if(null==t||null==e)return!1;if(""==e.trim())return!1;t=this.handleDomList(t);for(var r=e.split(" "),i=0;i<r.length;i++){var s=r[i];""!=s&&this.attr(t,s,"")}return!0},this.val=function(t,e){if(null!=t){var r=this.toType(e);if("function"==r){for(var i=this.each(t,e),s=0;s<i.length;s++)i[s]&&this.val(i[s],i[s].value);return!1}t=this.handleDomList(t);var n="get";if(2<=arguments.length){if(n="set","undefined"==r)return;null==e?e="":e+=""}if("get"==n){if(o=0<t.length?this.htmlArr[t[0].x]:o){if("textarea"==o.label)return this.html(t[0]);if("select"!=o.label)return this.handleLabelParam(o,"value");for(var l=(m=this.getDocument("option",a,u)).length,h=0;h<l;h++)m[h].x==m[h].y||null==this.attr(m[h],"selected")&&null!=f||(f=this.attr(m[h],"value"));return f}}else for(s=0;s<t.length;s++)if(null!=t[s]){var o,a=t[s].x,u=t[s].y;if(o=this.htmlArr[a])if(a!=u)if("textarea"==o.label)this.html(t[s],e);else if("select"==o.label)for(var f,m=this.getDocument("option",a,u),h=0;h<m.length;h++)m[h].x!=m[h].y&&(this.attr(m[h],"value")==e?this.attr(m[h],"selected","selected"):this.attr(m[h],"selected",null));else this.attr(t[s],"value",e);else this.attr(t[s],"value",e)}}},this.remove=function(t,e,r){var i="",s=!1;if(2==arguments.length?"string"==typeof e?i=e:"boolean"==typeof e&&(s=e):3==arguments.length&&("string"==typeof e&&(i=e),"boolean"==typeof r&&(s=r)),null!=t){if(null==(t=this.handleDomList(t)))return"";null==i||-1!=(e=i.indexOf(":"))&&(h=r="",e=(i=i.substr(e+1)).indexOf("("),l=i.indexOf(")"),-1!=e&&-1!=l?(r=i.substr(0,e).toLowerCase(),l=(h=i.substr(e+1)).indexOf(")"),("'"==(e=(h=h.substr(0,l).replace(/-Space-/g," ").trim()).trim()).substr(0,1)&&"'"==e.substr(e.length-1,1)||'"'==e.substr(0,1)&&'"'==e.substr(e.length-1,1))&&(h=e.substr(1,e.length-2))):r=i.toLowerCase(),"contains"==r&&(n=h));var n,l,h,o=[];if(null!=n){for(var a=0;a<t.length;a++)(u=t[a]).x!=u.y&&-1!=this.text(u).indexOf(n)&&o.push(u);t=o}for(a=0;a<t.length;a++)for(var u,f=t[a].x,m=t[a].y,d=f;d<=m;d++)(u=this.htmlArr[d])&&(d==f?(u.html="",u.label="",s&&(u.upHtml="")):delete this.htmlArr[d]);return t}},this.addClass=function(t,e){var r=this.toType(e);if("function"==r){for(var i=this.each(t,e),s=0;s<i.length;s++)i[s]&&this.addClass(i[s],i[s].value);return!1}if(null!=t){if(t=this.handleDomList(t),"number"==r)return!1;if(null==t||null==e)return!1;if(this.common.isArray(e))var n=e;else{if(""==(e=(e+"").trim()))return!1;n=e.split(" ")}for(s=0;s<t.length;s++){for(var l=t[s],h=null!=(h=this.attr(l,"class"))?h.trim():"",o=0;o<n.length;o++)""!=n[o]&&-1==(" "+h+" ").indexOf(" "+n[o]+" ")&&(""!=h&&(h+=" "),h+=n[o]);this.attr(l,"class",h)}}},this.hasClass=function(t,e){if("number"==typeof e)return!1;if(null==t||null==e)return!1;if(""==(e=e.trim()))return!1;if(null==t)return!1;t=this.handleDomList(t);for(var r=0;r<t.length;r++){var i=null!=(i=this.attr(t[r],"class"))?i.trim():"";if(""!=i&&-1!=(" "+i+" ").indexOf(" "+e+" "))return!0}return!1},this.removeClass=function(t,e){if("function"==this.toType(e)){for(var r=this.each(t,e),i=0;i<r.length;i++)r[i]&&this.removeClass(r[i],r[i].value);return!1}if(null!=t){if(t=this.handleDomList(t),"array"==this.toType(e))var s=e;else{if(null==t||null==e)return!1;if(""==(e=(e+"").trim()))return!1;s=e.split(" ")}for(i=0;i<t.length;i++){var n=t[i];if(null!=(l=this.attr(n,"class"))){for(var l=" "+(l=l.trim())+" ",h=0;h<=s.length-1;h++)""!=s[h]&&(l=l.replace(" "+s[h]+" "," "));this.attr(n,"class",l.trim())}}}},this.wrap=function(t,e,r){if(null!=t){t=this.handleDomList(t);for(var i=0;i<t.length;i++){var s=t[i].x,n=t[i].y;this.htmlArr[s].upHtml+=e,this.htmlArr[n].downHtml+=r}return this}},this.unwrap=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){for(var r=t[e].x,i=t[e].y,s=this.htmlArr[r].lv-1,n=r;0<=n;n--){var l=this.htmlArr[n];if("object"==typeof l&&this.htmlArr[n].lv==s){l.html="";break}}for(n=i;n<=this.htmlArr.length-1;n++){l=this.htmlArr[n];if("object"==typeof l&&this.htmlArr[n].lv==s){l.html="";break}}}return this}},this.append=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var r=this.each(t,e),i=0;i<r.length;i++)r[i]&&this.append(r[i],r[i].value);return!1}t=this.handleDomList(t);for(i=0;i<t.length;i++){var s=t[i].x,n=t[i].y;s!=n?this.htmlArr[n].upHtml+=e:this.htmlArr[s].downHtml+=e}return this},this.prepend=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var r=this.each(t,e),i=0;i<r.length;i++)r[i]&&this.prepend(r[i],r[i].value);return!1}t=this.handleDomList(t);for(i=0;i<t.length;i++){var s=this.htmlArr[t[i].x];s.downHtml=e+s.downHtml}return this},this.after=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var r=this.each(t,e),i=0;i<r.length;i++)r[i]&&this.after(r[i],r[i].value);return!1}"object"==this.toType(t)&&(t=[t]);for(i=0;i<t.length;i++){var s=this.htmlArr[t[i].y];s.downHtml=e+s.downHtml}return this},this.before=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var r=this.each(t,e),i=0;i<r.length;i++)r[i]&&this.before(r[i],r[i].value);return!1}t=this.handleDomList(t);for(i=0;i<t.length;i++)this.htmlArr[t[i].x].upHtml+=e;return this},this.next=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var r=this.htmlArr[t[e].x],i=-1,s=r._index+1;s<=this.htmlArr.length-1;s++){var n=this.htmlArr[s];if(n){if(n.lv<r.lv)break;if(-1!=i){if(r.lv==n.lv&&"/"==n.label.substr(0,1))return{index:0,x:i,y:n._index}}else if(r.lv==n.lv&&"/"!=n.label.substr(0,1)){if(1==n.tagpair)return{index:0,x:n._index,y:n._index};i=n._index}}}return[]},this.nextAll=function(t){t=this.handleDomList(t);for(var e=[],r=-1,i=0;i<t.length;i++)for(var s=this.htmlArr[t[i].x],n=-1,l=s._index+1;l<=this.htmlArr.length-1;l++){var h=this.htmlArr[l];if(h){if(h.lv<s.lv)break;-1!=n?s.lv==h.lv&&"/"==h.label.substr(0,1)&&(e.push({index:++r,x:n,y:h._index}),n=-1):s.lv==h.lv&&"/"!=h.label.substr(0,1)&&(1==h.tagpair?e.push({index:++r,x:h._index,y:h._index}):n=h._index)}}return e},this.prev=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var r=this.htmlArr[t[e].x],i=-1,s=r._index-1;0<=s;s--){var n=this.htmlArr[s];if(n){if(n.lv<r.lv)break;if(-1!=i){if(r.lv==n.lv&&"/"!=n.label.substr(0,1))return{index:0,x:n._index,y:i}}else if(r.lv==n.lv&&"/"==n.label.substr(0,1)){if(1==n.tagpair)return{index:0,x:n._index,y:n._index};i=n._index}}}return[]},this.prevAll=function(t,e){t=this.handleDomList(t),null==e&&(e="desc");for(var r=[],i=0;i<t.length;i++)for(var s=this.htmlArr[t[i].x],n=-1,l=s._index-1;0<=l;l--){var h=this.htmlArr[l];if(h){if(h.lv<s.lv)break;-1!=n?s.lv==h.lv&&"/"!=h.label.substr(0,1)&&(r.push({index:0,x:h._index,y:n}),n=-1):s.lv==h.lv&&"/"==h.label.substr(0,1)&&(1==h.tagpair?r.push({x:h._index,y:h._index}):n=h._index)}}return r="asc"==e?this.domListAsc(r):r},this.parent=function(t){t=this.handleDomList(t);for(var e=[],r=0;r<t.length;r++){for(var i=this.htmlArr[t[r].x],s=-1,n=-1,l=i._index-1;0<=l;l--){var h=this.htmlArr[l];if(h&&i.lv-1==h.lv&&"/"!=h.label.substr(0,1)){s=h._index;break}}for(l=i._index+1;l<=this.htmlArr.length-1;l++){h=this.htmlArr[l];if(h&&i.lv-1==h.lv&&"/"==h.label.substr(0,1)){n=h._index;break}}-1!=s&&e.push({x:s,y:n})}return e},this.parents=function(t){t=this.handleDomList(t);for(var e=[],r=0;r<t.length;r++){for(var i=this.htmlArr[t[r].x],s=-1,n=-1,l=i._index-1;0<=l;l--){var h=this.htmlArr[l];if(h&&i.lv-1==h.lv&&"/"!=h.label.substr(0,1)){s=h._index;break}}for(l=i._index+1;l<=this.htmlArr.length-1;l++){h=this.htmlArr[l];if(h&&i.lv-1==h.lv&&"/"==h.label.substr(0,1)){n=h._index;break}}-1!=s&&(e.push({x:s,y:n}),e=e.concat(this.parents([{x:s,y:n}])))}return this.delDomListDuplicate(e)},this.children=function(t){t=this.handleDomList(t);for(var e,r=[],i=0,s=0;s<t.length;s++){var n=t[s].x,l=t[s].y;if(n!=l)for(var h=this.htmlArr[n],o=n+1;o<l;o++){var a=this.htmlArr[o];a.lv-h.lv==1&&(2!=a.tagpair||-1!=a.label.indexOf("/")?r.push({index:i++,x:e,y:a._index}):e=a._index)}}return r},this.closest=function(t,e){t=this.handleDomList(t);for(var r=[],i=0,s=0;s<t.length;s++){var n=t[s].x,l=(t[s].y,this.htmlArr[n]);if("string"==typeof e)for(var h=this.getDocument(e),o=h.length-1;0<=o;o--){var a=h[o].x,u=h[o].y;if(a!=u){var f=this.htmlArr[a];if(a<n&&f.lv-l.lv==-1){r.push({index:i++,x:a,y:u});break}}}}return r},this.filter=function(t,e){t=this.handleDomList(t);for(var r=[],i=0;i<t.length;i++){var s=t[i].x,n=t[i].y;this.htmlArr[s];"string"==typeof e&&(s=this.getDocument(e,s,n),r=r.concat(s))}return this.delDomListDuplicate(r)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])},this.slice=function(t,e,r){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];if(null==e&&null==r)return t;if(isNaN(e)?e=0:(e=parseInt(e))<0&&(e=t.length- -1*e),null==r?r=t.length:isNaN(r)?r=-1:(r=parseInt(r))<0&&(r=t.length- -1*r),e+""=="NaN"||r+""=="NaN")return t;for(var i=[],s=0;s<t.length;s++)e<=s&&s<r&&i.push(t[s]);return i},this.show=function(t){for(var e=0;e<t.length;e++){var r=t[e];r.x!=r.y&&this.css(r,"display","")}return this},this.hide=function(t){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var e=0;e<t.length;e++){var r=t[e];r.x!=r.y&&this.css(r,"display","none")}return[]},this.dom=function(t,e,r,i){1!=(r=null==r?-1:r)&&2!=r&&(r=-1),""!=e&&(e="|"+e+"|");var s=(i=null==i?"":i).split(" ");if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var n="",l=0;l<t.length&&!(0<l);l++){var h=t[l].x,o=t[l].y;if(h!=o)for(var a=h;a<=o;a++){var u=this.htmlArr[a];if(u){var f="";if(-1!=e.indexOf("label"))for(var m=0;m<=s.length-1;m++){var d,c=s[m];""==c||null!=(d=this.attr(u,c))&&(f+=" "+c+'="'+d+'"')}r!=u.tagpair&&-1!=r||(a==h||a==o?-1!=e.indexOf("all")&&(-1!=e.indexOf("label")?n+="<"+u.label+f+">":n+=u.html):a<o&&(-1!=e.indexOf("label")?n+="<"+u.label+f+">":n+=u.html))}}}return n},this.getlv=function(t){if(t=this.handleDomList(t),"array"==this.toType(t))return t=t.split(","),2<=t.length?(t=t[1].split("|"),this.htmlArr[t[0]].lv):void 0},this.getLabel=function(t){if(t=this.handleDomList(t),"array"==this.toType(t)&&1<=t.length){t=this.htmlArr[t[0].x];if(t)return t.label}},this.printHTML=function(t){for(var e="",r=0,i=-1!=(t=","+(t=null==t?"":t).replace(/\|/g,",").replace(/\s/g,"")+",").indexOf(",color,")?"<br>":"\n",s=-1!=t.indexOf(",color,")?"&nbsp;&nbsp;&nbsp;&nbsp;":"    ",n=0;n<=this.htmlArr.length-1;n++){var l,h,o,a,u=this.htmlArr[n];u&&(-1!=t.indexOf(",format,")?(l=u.upHtml.trim(),h=u.downHtml.trim(),o=u.html.trim(),-1!=t.indexOf(",color,")&&(l=this.htmlColor(l),h=this.htmlColor(h),o=this.htmlColor(o)),"html"==u.label?r=-1:"head"!=u.label&&"body"!=u.label||(l+=i),""!=o&&(a=!0,2==u.tagpair?"/"==u.label.substr(0,1)&&(a=this.upCheckThisLabel(u)):-1!=this.singleLabelList.indexOf("|"+u.label+"|")&&(a=!1),a&&(o=i+this.common.copyStr(s,u.lv-1+r)+o)),e+=l+o+h):-1!=t.indexOf(",zip,")?e+=u.upHtml.trim()+u.html.trim()+u.downHtml.trim():-1!=t.indexOf(",color,")?e+=this.htmlColor(u.upHtml)+this.htmlColor(u.html)+this.htmlColor(u.downHtml):e+=u.upHtml+u.html+u.downHtml)}return-1!=t.indexOf(",format,")&&(e=e.trim()),e=-1!=t.indexOf(",color,")?"<div style='font-family: Menlo, Monaco, Consolas, \"Courier New\", monospace;padding: 0.2em;margin: 0;font-size: 14px;'>"+e+"</div>":e},this.upCheckThisLabel=function(t){if("/head"==t.label||"/body"==t.label)return!0;for(var e=t._index-1;0<=e;e--){var r=this.htmlArr[e];if(r){if(r.lv==t.lv)return!1;if(2==r.tagpair||"img"==r.label)return!0;if(-1!=(r.upHtml+r.downHtml).indexOf("\n"))return!0}}return!1},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.htmlArr)},this.info=function(){console.log("%c xiyueta%c v"+_xyt.version+" website: www.xiyueta.com ","font-size:22px;color:#00bbee","color:#000")}},_xyt=new _XIYUETA,xiyueta=function(t,e,r){return new xiyueta.fn.init(t,e,r)},init=(xiyueta.fn=xiyueta.prototype={length:0,selector:"",domList:void 0,x:null,y:null,domListIndex:0},xiyueta.extend=xiyueta.fn.extend=function(){var t,e,r,i=arguments[0]||{},s=1,n=arguments.length;for(s===n&&(i=this,s--);s<n;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&i!==r&&void 0!==r&&(i[e]=r);return i},xiyueta.fn.init=function(t,e,r){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=r,this.domListArray=[],0<_xyt.htmlArr.length&&("string"==typeof t?(this.domList=_xyt.getDocument(t,e,r),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector="")),null==this.selector&&(this.selector="")}),_XIYUETACSS=(init.prototype=xiyueta.fn,($=$xyt=xiyueta).fn.extend({parse:function(t,e){return _xyt.parseHTML(t),1==(e=null!=e||0==_xyt.lv&&1!=_xyt.isHtmlErr?e:!0)&&0<(t=this.repair(!1)).err&&""!=t.errList&&1==t.state&&(_xyt.parseHTML(this.print()),this.repairHTML=!0),0<_xyt.htmlArr.length&&"string"==typeof this.selector&&(this.domList=_xyt.getDocument(this.selector,this.x,this.y),this.length=this.domList.length),this},find:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.find(this.domList,t),this.length=this.domList.length,this.selector="",this},add:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.add(this.domList,t),this.length=this.domList.length,this.selector="",this},not:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.not(this.domList,t),this.length=this.domList.length,this.selector="",this},is:function(t){return _xyt.is(this.domList,t)},text:function(t){return 1<=arguments.length?(_xyt.text(this.domList,t),this):_xyt.text(this.domList)},html:function(t){return 1<=arguments.length?(_xyt.html(this.domList,t),this):_xyt.html(this.domList)},attr:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.attr(this.domList,t,e),this):""!=t.trim()?_xyt.attr(this.domList,t):void 0},prop:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.prop(this.domList,t,e),this):""!=t.trim()?_xyt.prop(this.domList,t):void 0},data:function(t,e){if(null!=t)return 2<=arguments.length?(_xyt.data(this.domList,t,e),this):_xyt.data(this.domList,t)},removeAttr:function(t){return _xyt.removeAttr(this.domList,t),this},val:function(t){return null==t?_xyt.val(this.domList):(_xyt.val(this.domList,t),this)},remove:function(t){t=_xyt.remove(this.domList,t);return t!=this.domList&&(this.domList=t,this.length=this.domList.length),this},each:function(t){return _xyt.each(this.domList,t),this},css:function(t,e){return null==e&&"object"!=typeof t?_xyt.css(this.domList,t):(_xyt.css(this.domList,t,e),this)},print:function(t){return _xyt.printHTML(t)},debug:function(t){return _xyt.debug(t),this}}),xiyueta.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,r=[],i=0;i<this.domList.length;i++)i%2==0&&((t=this.domList[i]).index=++e,r.push(t));return this.domList=r,this.length=r.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,r=[],i=0;i<this.domList.length;i++)i%2==1&&((t=this.domList[i]).index=++e,r.push(t));return this.domList=r,this.length=r.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this},addClass:function(t){return _xyt.addClass(this.domList,t),this},hasClass:function(t){return _xyt.hasClass(this.domList,t)},removeClass:function(t){return _xyt.removeClass(this.domList,t),this},wrap:function(t,e){if("function"==typeof t){for(var r=_xyt.each(this.domList,t),i=0;i<=r.length-1;i++)(u=r[i])&&this.wrap(u.value,u.domList);return this}var s=new _XIYUETA,n=0,l=(s.parseHTML(t),s.repairHTML(!1),s.printHTML());t!=l&&s.parseHTML(l);for(i=0;i<=s.htmlArr.length-1;i++)(u=s.htmlArr[i]).lv>n&&2==u.tagpair&&(n=u.lv);for(var h="",o="",a=!1,i=0;i<=s.htmlArr.length-1;i++){var u,f=(u=s.htmlArr[i]).upHtml;"/"==u.label.substr(0,1)&&u.lv==n&&(a=!0,h+=f,f=""),0==a?h+=f+u.html:o+=f+u.html}return null==e&&(e=this.domList),_xyt.wrap(e,h,o),this},unwrap:function(){return _xyt.unwrap(this.domList),this},append:function(t){return _xyt.append(this.domList,t),this},prepend:function(t){return _xyt.prepend(this.domList,t),this},after:function(t){return _xyt.after(this.domList,t),this},before:function(t){return _xyt.before(this.domList,t),this},show:function(){return _xyt.show(this.domList),this},hide:function(){return _xyt.hide(this.domList),this},next:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.next(this.domList),this.length=this.domList.length,this},nextAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.nextAll(this.domList),this.length=this.domList.length,this},prev:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prev(this.domList),this.length=this.domList.length,this},prevAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList),this.length=this.domList.length,this},siblings:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList,"asc").concat(_xyt.nextAll(this.domList)),this.length=this.domList.length,this},parent:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parent(this.domList),this.length=this.domList.length,this},parents:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parents(this.domList),this.length=this.domList.length,this},children:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.children(this.domList),this.length=this.domList.length,this},closest:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.closest(this.domList,t),this.length=this.domList.length,this},filter:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.filter(this.domList,t),this.length=this.domList.length,this},replaceWith:function(t){var e;return"object"==typeof(t=null==t?"":t)&&null!=t.domList&&(e=t.domList,t=_xyt.htmlwrap(t.domList,""),_xyt.remove(e)),this.htmlwrap(t),this},index:function(){return("array"==_xyt.toType(this.domList)?this.domList[0]:this.domList).index},get:function(t){var e;return 1<=arguments.length?(e=[],"array"==_xyt.toType(this.domList)?e=this.domList:e.push(this.domList),e[t=t<0?e.length+t:t]):0!=this.domList.length?this.domList:void 0},toArray:function(){return this.domList},empty:function(){return this.html("")},htmlwrap:function(t){return 1<=arguments.length?(_xyt.htmlwrap(this.domList,t),this):_xyt.htmlwrap(this.domList)},dom:function(t){return _xyt.dom(this.domList,"",t)},domwrap:function(t){return _xyt.dom(this.domList,"all",t)},domlabel:function(t,e){return _xyt.dom(this.domList,"label|",t,e)},domlabelwrap:function(t,e){return _xyt.dom(this.domList,"all|label",t,e)},getlabel:function(){return _xyt.getLabel(this.domList)},getlv:function(){return _xyt.getlv(this.domList)},findlv:function(t){return this.find(":lv("+t+")"),this}}),_XIYUETA.prototype.checkTagAttrExist=function(t,e){null==this.tagNameAttrArr&&(this.tagNameAttrArr=[[{name:"|a|",value:"|id|class|name|style|href|title|type|shape|coords|target|",count:1},{name:"|map|",value:"|id|class|name|style|title|",count:1},{name:"|area|",value:"|id|class|style|href|title|alt|shape|coords|target|",count:1},{name:"|img|",value:"|id|class|name|style|src|title|alt|width|height|border|",count:1},{name:"|audio|",value:"|id|class|style|src|title|loop|",count:1},{name:"|base|",value:"|id|class|style|href|title|target|",count:1},{name:"|body|",value:"|id|class|style|title|background|",count:1},{name:"|basefont|",value:"|id|class|style|title|color|size|",count:1},{name:"|button|",value:"|id|class|name|style|title|type|",count:1},{name:"|video|",value:"|id|class|style|src|title|loop|width|height|",count:1},{name:"|input|",value:"|id|class|name|style|src|title|alt|type|width|height|",count:1},{name:"|select|",value:"|id|class|name|style|title|size|",count:1},{name:"|form|",value:"|id|class|name|style|title|action|method|target|",count:1},{name:"|table|table|",value:"|id|class|style|title|width|border|",count:2},{name:"|ol|ul|li|",value:"|id|class|style|title|type|",count:3},{name:"|td|canvas|th|td|",value:"|id|class|style|title|width|height|",count:4},{name:"|abbr|acronym|address|div|span|b|p|br|tr|article|h1|h2|h3|h4|h5|h6|h7|h8|h9|aside|head|title|bdi|bdo|big|blockquote|caption|center|cite|em|strong|dfn|code|samp|kbd|var|wbr|",value:"|id|class|style|title|",count:37}]]);for(var r=0;r<this.tagNameAttrArr.length;r++){var i=this.tagNameAttrArr[r];if(-1<i.name.indexOf("|"+t+"|")&&-1<i.value.indexOf("|"+e+"|"))return!0}return-1<"|id|class|title|style|".indexOf("|"+e+"|")},_XIYUETA.prototype.swap=function(t,e){if(null==t||null==e)return!1;"object"==this.toType(t)&&(t=[t]);var r=[],r="object"==this.toType(r)?null!=r.domList?r.domList:[r]:this.getDocument(e);if(0==t.length||0==r.length||t==r)return!1;var e=t[0],t=r[0],r=this.htmlwrap(e),i=this.htmlwrap(t);return this.htmlwrap(e,i),this.htmlwrap(t,r),!0},_XIYUETA.prototype.getItem=function(t,e){if(null==t)return"";null==e&&(e=""),"object"==this.toType(t)&&(t=[t]);for(var r=[],i=0;i<t.length;i++){obj=t[i];var s=!0;""!=e?(obj.value=this.handleLabelParam(this.htmlArr[obj.x],e),null==obj.value&&(s=!1)):obj.value=this.htmlwrap(obj),s&&r.push(obj)}return r},_XIYUETA.prototype.setConfig=function(t){if(null==t)return this.config;null!=t.httpurl&&(this.config.httpurl=t.httpurl),null!=t.serverurl&&(this.config.serverurl=t.serverurl),null!=t.jsdir&&(this.config.jsdir=t.jsdir),null!=t.cssdir&&(this.config.cssdir=t.cssdir),null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir)},_XIYUETA.prototype.charset=function(t){for(var e=0;e<=this.htmlArr.length-1;e++){var r=this.htmlArr[e];if(null!=r)if("meta"==r.label)if(-1!=r.html.toLowerCase().indexOf("charset=")){var i=this.handleLabelParam(r,"charset");if(null!=(i=null!=i?i.toLowerCase().trim():i))return null!=t&&this.handleLabelParam(r,"charset",t),i;if(-1!=(i=null!=(i=this.handleLabelParam(r,"content"))?i.toLowerCase().trim():i).indexOf("utf-8"))return null!=t?(this.handleLabelParam(r,"content","text/html; charset="+t),""):"utf-8";if(-1!=i.indexOf("gb2312"))return null!=t?(this.handleLabelParam(r,"content","text/html; charset="+t),""):"gb2312"}}},_XIYUETA.prototype.getHandleSrc=function(t,e,r,i){for(var s="",n=!0,l=0;l<=this.htmlArr.length-1;l++){var h,o,a,u=this.htmlArr[l];null!=u&&-1!=("|"+t+"|").indexOf("|"+u.label+"|")&&(null==(h=this.handleLabelParam(u,e))&&(h=""),"link"!=u.label||"dns-prefetch"!=(o=(o=null==(o=this.handleLabelParam(u,"rel"))?"":o).trim().toLowerCase())&&"alternate"!=o||(h=""),-1!=("|"+r+"|").indexOf("clean")?(n=!0,""!=h&&-1==h.indexOf("apps.bdimg.com/")&&(a=h=this.common.fullHttpUrl(i,h),-1!=("|"+r+"|").indexOf("web")&&""!=(h=this.common.getUrlFileName(h,u.label))&&("img"==u.label?h=this.config.imagesdir+h:"script"==u.label?h=this.config.jsdir+h:"link"==u.label?-1!=(o=(o=null==(o=this.handleLabelParam(u,"rel"))?"":o).trim().toLowerCase()).indexOf("shortcut icon")?h=this.config.imagesdir+h:-1!=o.indexOf("stylesheet")?h=this.config.cssdir+h:(h="",n=!1):(n=!1,h="")),n&&""!=h&&(-1!=("|"+r+"|").indexOf("down")?(""!=s&&(s+="[,]"),s+=a+"[|]"+h):(""!=s&&(s+="[,]"),s+=h)),this.handleLabelParam(u,e,h))):""!=h&&(""!=s&&(s+="[,]"),s+=h))}return s},_XIYUETA.prototype.replace=function(t,e,r,i){for(var s,n=this.getDocument(t),l=n.split(","),h=1;h<=l.length-1;h++)s=-1!=(n=l[h]).indexOf("|")?(s=n.split("|"),this.htmlArr[s[0]]):this.htmlArr[n],""!=e&&(n=this.handleLabelParam(s,e))==r&&this.handleLabelParam(s,e,i)},_XIYUETA.prototype.repairHTML=function(t,e){null==t&&(t=!1),null==e&&(e=0);var r=0,i=!1,s="",n=0,l=",";if(1<=this.htmlArr.length&&"no"==(h=this.htmlArr[0]).isFindDom)return!1;for(var h,o=0;o<=this.htmlArr.length-1;o++)(h=this.htmlArr[o])&&2==h.tagpair&&("/"==h.label.substr(0,1)?(f=h.label.substr(1),-1!=(","+l+",").indexOf(","+f+",")?l=l.replace(","+f+",",","):l+=h.label+","):l+=h.label+",");for(var a=l,o=0;o<this.htmlArr.length;o++)if((h=this.htmlArr[o])&&2==h.tagpair&&"/"==h.label.substr(0,1)){var u,f=h.label.substr(1),i=!0;if(null!=(u=this.upFindSameLvObj(o,h))&&(h.label=="/"+u.label?(i=!1,this.setNoFindDom(u._index,h._index),1==e&&console.log(" 找(Lv1) "+h.label+" "+u.label+"("+h._index+"-"+u._index+")")):0==this.lv||1==u.lv&&1==h.lv&&-1==l.indexOf(","+h.label+",")?1==i&&(s="",t&&(s="\x3c!--xiyueta提示: 原标签(LV) "+h.label+" 替换成 /"+u.label+"--\x3e"),h.html="</"+u.label+">"+s,r+=2,n+=2,i=!1,this.setNoFindDom(u._index,h._index),1!=e&&2!=e||console.log(" 找(Lv2) LV整体层级正确或两标签都为第一层  "+h.label+" 替换成 /"+u.label+" ("+h._index+"-"+u._index+")")):1==e&&console.log(" 找(Lv else) 没找到，交给下面找同名 "+h.label+" ("+h._index+")")),1==i)if(null==(u=this.upFindSameNameObj(o,h)))h.html=t?"\x3c!---xiyueta提示: 有多余结束标签 "+h.label+" --\x3e":"",n++,r++,this.setNoFindDom(h._index,h._index),this.reairHtmlLv(h,1),1!=e&&2!=e||console.log(" 找(Name 出错) 有多余结束标签 "+h.label+" ("+h._index+")"),i=!1,l=l.replace(","+h.label+",",",");else{s="",t&&(u.html+="\x3c!---xiyueta提示: 有问题标签开始位置--\x3e",h.html="\x3c!---xiyueta提示: 有问题标签结束位置--\x3e"+h.html),1!=e&&2!=e||console.log(" 找(Name2 有问题) "+h.label+" 与 "+u.label+"("+h._index+"-"+u._index+") 之间有问题 ");var m="",d=(this.setNoFindDom(u._index,h._index),u.lv-h.lv);this.reairHtmlLv(h,d);for(var c=u._index+1;c<=h._index;c++){var g=this.htmlArr[c];if(g&&"/"!=g.label.substr(0,1)&&2==g.tagpair){var x=!1;for(p=g._index+1;p<=h._index;p++){var b=this.htmlArr[p];if(b&&2==b.tagpair&&"/"==b.label.substr(0,1)&&b.lv==g.lv){x=!0;break}}0==x&&(m+="</"+g.label+">",t&&(m+="\x3c!--xiyueta提示: 追加 /"+g.label+" --\x3e"),1!=e&&2!=e||console.log(" 找(Name3)  追加结束标签 /"+g.label+" ("+g._index+")"),n++,r++,l=l.replace(","+g.label+",",","))}}h.upHtml+=m}}var y=l.split(",");if(y.length>r){m="";for(o=0;o<y.length;o++)""!=y[o]&&"/"!=y[o].substr(0,1)&&(s="",t&&(s="\x3c!--xiyueta提示: 追加 /"+y[o]+" --\x3e"),m="</"+y[o]+">"+s+m,n++,r++,1!=e&&2!=e||console.log(" 最后  追加结束标签 /"+y[o]));this.htmlArr[this.htmlArr.length-1].downHtml+=m}return{lv:this.lv,err:n,repair:r,state:n==r,errList:a=","==a?"":a}},_XIYUETA.prototype.setNoFindDom=function(t,e){for(var r=t;r<=e;r++){var i=this.htmlArr[r];i&&(i.isFindDom="no")}return null},_XIYUETA.prototype.upFindSameLvObj=function(t,e){for(var r=t-1;0<=r;r--){var i=this.htmlArr[r];if(i&&"no"!=i.isFindDom&&e.lv==i.lv)return i}return null},_XIYUETA.prototype.upFindSameNameObj=function(t,e){for(var r=t-1;0<=r;r--){var i=this.htmlArr[r];if(i&&"no"!=i.isFindDom&&e.label=="/"+i.label)return i}return null},_XIYUETA.prototype.reairHtmlLv=function(t,e){for(var r=t._index;r<=this.htmlArr.length-1;r++)(t=this.htmlArr[r])&&(t.lv+=e)},_XIYUETA.prototype.htmlColor=function(t){if("</"==t.substr(0,2))return"<font color='#800000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";if("<"!=t.substr(0,1))return"<font color='#000000'>"+t+"</font>";if("\x3c!--"==t.substr(0,4))return"<font color='#008000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";for(var e="",r="",i="",s=!1,n="",l="",h="",o=0;o<=t.length-1;o++){var a=t.substr(o,1);"findValueStart"==n?(s?a==i||">"==a?(l+=h+"<font color='#0000FF'>"+r+h+"</font>",s=!1,h=i=h="",n="findParamStart"):r+=a:'"'==a||"'"==a?(h+=a,i=a,s=!0):" "!=a?(i=" ",r=a,s=!0):h+="&nbsp;",">"==a&&(l+="<font color='#800000'>&gt;</font>")):"<"==a?(h="&lt;",n="findLabel"):"findLabel"==n?" "==a?(l+="<font color='#800000'>"+h+"</font> ",h="",n="findParamStart"):">"==a?l+="<font color='#800000'>"+h+"&gt;</font>":h+=a:">"==a?l+="<font color='#800000'>&gt;</font>":"findParamEnd"==n?"="==a?(n="findValueStart",l+="<font color='#FF0000'>"+e+"</font><font color='#000000'>=</font>",e=i=r=""):e+=a=" "==a?"&nbsp;":a:(n="findParamEnd",e+=a=" "==a?"&nbsp;":a)}return l},xiyueta.fullurl=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.resolve=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.getUrlDir=function(t,e){return _xyt.common.getUrlDir(t,e)},xiyueta.getUrlFileName=function(t,e){return _xyt.common.getUrlFileName(t,e)},xiyueta.bystesLength=function(t){return _xyt.common.bystesLength(t)},xiyueta.renderSize=function(t){return _xyt.common.renderSize(t)},xiyueta.secondToDate=function(t){return _xyt.common.secondToDate(t)},xiyueta.timeFormat=function(t,e){var r=new Date,i="yyyy-MM-dd hh:mm:ss";return 1==arguments.length?"object"==typeof t?r=t:"string"==typeof t&&(i=t):2==arguments.length&&("object"==typeof t&&(r=t),"string"==typeof e&&(i=e)),_xyt.common.timeFormat(r,i)},xiyueta.getDomain=function(t){return _xyt.common.getDomain(t)},xiyueta.htmlColor=function(t){return _xyt.htmlColor(t)},xiyueta.lv=function(){return _xyt.lv},xiyueta.htmlerr=function(){return _xyt.isHtmlErr},xiyueta.config=function(t){t=_xyt.setConfig(t);return null==t?this:t},xiyueta.charset=function(t){return null==t?_xyt.charset():(_xyt.charset(t),this)},xiyueta.toType=function(t){return _xyt.toType(t)},xiyueta.debug=function(t){return xiyueta().debug(t)},xiyueta.load=function(t,e){return xiyueta().parse(t,e),this},xiyueta.html=function(t){return _xyt.printHTML(t)},xiyueta.log=function(t,e){if(null==e&&(e="<br>"),"object"==typeof t)for(var r in t){var i;-1==(t[r]+"").indexOf("function")&&(i=(i=t[r]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(i="object"==typeof t[r]?xiyueta.log(t[r]," , "):i)?response.write(r+e):response.write(r+":  "+i+e))}else t+="",response.write(t.replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")+e)},xiyueta.fn.extend({swap:function(t){return _xyt.swap(this.domList,t),this},item:function(t){return _xyt.getItem(this.domList,t)},handle:function(t,e,r){return _xyt.getHandleSrc(this.selector,t,e,r)},replace:function(t,e,r){return _xyt.replace(this.selector,t,e,r)},clear:function(){return this},repair:function(t,e){return _xyt.repairHTML(t,e)}}),function(t){"use strict";this.cssSource=t=null==t?"":t,this.cssArr=[],this.common=new XiyuetaCommon,this.lv=0,this.config={parentdir:"../",imagesdir:"images/"};for(var e={},r="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),i=0;i<r.length;i++){var s=r[i];e["[object "+s+"]"]=s.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.cssParse=function(t){null!=t&&(this.cssSource=t,this.cssArr=[]);for(var e,r="",i="",s="",n="",l=!1,h=!1,o=!1,a=!1,u=!1,f=0,m=-1,d=0;d<=this.cssSource.length-1;d++)e=r,r=this.cssSource.substr(d,1),l?(s+=r,o?"/"==r&&"*"==e&&(l=o=!1,this.cssArr.push({_index:++m,lv:1,label:"/*",upHtml:n,downHtml:"",html:s}),n=s=""):h&&"*"==r&&"/"==e?o=!0:a?!u||";"!=r&&"\n"!=r?" "==r&&h?"@charset "==s.toLowerCase()||"@import "==s.toLowerCase()?h=!(u=!0):"@font-face "==s.toLowerCase()&&(a=!1):"{"==r&&("@font-face{"==s.toLowerCase()?a=!1:(a=l=h=!1,this.cssArr.push({_index:++m,lv:1,label:i.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),f++,n=s="")):(a=l=h=u=!1,this.cssArr.push({_index:++m,lv:1,label:i.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),n=s=""):"{"==r&&h?h=!1:"}"==r&&(l=h=!1,this.cssArr.push({_index:++m,lv:f+1,label:i.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),n=s=""),h&&(i+=r)):" "!=r&&";"!=r&&"\n"!=r&&"\t"!=r?"}"==r&&1==f?(this.cssArr.push({_index:++m,lv:f,label:"}",upHtml:n,downHtml:"",html:"}"}),n=s="",f--):(n=s,h=l=!0,"@"==(i=s=r)&&(a=!0)):s+=r;""!=s&&this.cssArr.push({_index:++m,lv:f,label:"",upHtml:"",downHtml:"",html:s}),this.lv=f},this.handleLabelParam=function(t,e,r){if(null==e&&(e="(all)"),null==r&&null!=t[e])return t[e];var i,s="";-1!=e.indexOf("|")&&(e=(i=e.split("|"))[0],s=i[1],""==e&&(e="(all)"));for(var n=!1,l="",h="",o=!1,a="",u=!1,f=!0,m=0,d=0,c=!1,g="",p=t.html.indexOf("{")+1;p<=t.html.length-1;p++){var x=t.html.substr(p,1);if(o)if(u){if(0!=(c=1==c&&")"==x?!1:c)||x!=a&&"}"!=x&&p!=t.html.length-1)h+=x,"("==x&&(c=!0);else if(t[l=l.toLowerCase().trim()]=h,u=o=!1,a="",e==l||"(all)"==e)if(null==r){if("url"!=s)return h;""!=(h=this.cssSrcUrl(h))&&(""!=g&&(g+="\n"),g+=h)}else{if(""==r)return v=t.html.substr(0,d),L=-1<(L=t.html.substr(p).indexOf(";"))?t.html.substr(p+L+1):t.html.substr(p),t.html=v+L,t;var b=m,y=m+h.length,v=(f&&(b++,y++),t.html.substr(0,b)),L=t.html.substr(y);if("url"!=s)return t.html=v+r+L,t[l]=r,t;b=this.cssSrcUrl(h,r);if(""!=b)return""!=g&&(g+="\n"),g+=b,t.html=v+b+L,p=(v+(t[l]=b)).length,t}}else" "!=x&&(a=";",m=p,f=!(u=!0),h=x);else n?":"==x?(o=!(n=!1),a=h=""):" "!=x&&(l+=x):" "!=x&&(n=!0,l=x,d=p)}if(null!=r&&""!=r&&""==s){for(var _=e+": "+r+";",A=t.html.length-1;0<=A;A--)if(" "!=(x=t.html.substr(A,1))&&"}"!=x){if(";"==x)break;if("{"==x)break;_="; "+_;break}t.html=t.html.replace("}",_+"}")}return g=""==g?void 0:g},this.getDocument=function(t,e,r){null==e&&(e=0),null==r&&(r=this.cssArr.length-1);var i=-1.1,s=-1.1,n=-1.1,l=-1.1,h="",o="",a="",u="",f="";if(t=(t=null==t?"":t).trim(),0==this.cssArr.length)return console.log("%c 需要先解析一段css文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var m=!1,d="",c=0;c<=t.length;c++){var g=t.substr(c,1);0!=m||"'"!=g&&'"'!=g&&"("!=g&&")"!=g?1==m?" "==g?g="-Space-":"'"!=g&&'"'!=g&&"("!=g&&")"!=g||(m=!1,"'"!=g&&'"'!=g||(g="")):" "==g&&(g=""):(m=!0,"'"!=g&&'"'!=g||(g="")),d+=g}t=d}var p=t.indexOf(":");-1!=p&&(y=v="",b=(g=t.substr(p+1)).indexOf("("),x=g.indexOf(")"),-1!=b&&-1!=x?(v=g.substr(0,b).toLowerCase(),x=(y=g.substr(b+1)).indexOf(")"),y=y.substr(0,x).replace(/-Space-/g," ").trim()):v=g.toLowerCase(),"first"==v?i=0:"last"==v?i=-1:"even"==v?s=1:"odd"==v?s=0:"eq"==v?(i=0,(i=""!=y?parseInt(y):i)+""=="NaN"&&(i=-.1,t="")):"gt"==v?""!=y&&(n=parseInt(y)):"lt"==v?""!=y&&(l=parseInt(y)):"contains"==v?h=y:console.log(t,"没有动作 "+v),""==(t=t.substr(0,p))&&-.1!=i&&(t="(all)"));-1!=(p=t.indexOf("["))&&(x=(g=t.substr(p+1)).indexOf("]"),-1==(g=g.substr(0,x)).indexOf("=")?(o=g,a="*"):(o=(b=g.split("="))[0],a=b[1].replace(/-Space-/g," "),y=o.substr(o.length-1),-1!="!^$*~|".indexOf(y)&&(o=o.substr(0,o.length-1),u=y)),-1!=o.indexOf("|")&&(o=(v=o.split("|"))[0],"NOUL"==v[1]&&(a=a.toLowerCase(),f=v[1])),""==(t=t.substr(0,p))&&(t="(all)")),t=t.replace(/ /g,"");for(var x,b,y,v,d="",c=e;c<=r;c++){var L=this.cssArr[c];null!=L&&(t==L.label||"(all)"==t&&""!=L.label)&&(d+=","+c)}if(""!=d&&-1.1!=i){var _=d.split(",");""!=(d=i<0?_[_.length+i]:_[i+1])&&(d=","+d)}else if(""!=d&&-1.1!=s){_=d.split(",");d="";for(c=1;c<=_.length-1;c++)c%2==s&&(d+=","+_[c])}else if(""!=d&&-1.1!=n){_=d.split(",");d="";for(c=n+2;c<=_.length-1;c++)d+=","+_[c]}else if(""!=d&&-1.1!=l){_=d.split(",");d="",l>_.length-1&&(l=_.length-1);for(c=1;c<=l;c++)d+=","+_[c]}else if(""!=d&&""!=h){_=d.split(",");d="";for(c=1;c<=_.length-1;c++){g=_[c];-1!=this.text(","+g).indexOf(h)&&(d+=","+_[c])}}else if(""!=o){_=d.split(",");d="";for(c=1;c<=_.length-1;c++){var A=_[c],O=!0,g=this.css(domList=","+A);"NOUL"==f&&null!=g&&(g=g.toLowerCase()),"^"==u?null!=g&&g.substr(0,a.length)==a||(O=!1):"|"==u?null!=g&&(g+"-").substr(0,a.length+1)==a+"-"||(O=!1):"$"==u?null!=g&&g.substr(-1*a.length)==a||(O=!1):"~"==u?null!=g&&-1!=(" "+g+" ").indexOf(" "+a+" ")||(O=!1):"*"==u?null!=g&&-1!=g.indexOf(a)||(O=!1):"!"==u?g==a&&(O=!1):null!=g&&"*"==a?O=!0:g!=a&&(O=!1),O&&(d+=","+A)}}for(var w=d.split(","),C=[],c=0;c<w.length;c++)""!=w[c]&&C.push({index:w[c],x:w[c],y:w[c]});return C},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:null!=t._index?[{index:t._index,x:t._index,y:t._index}]:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var r=[],i=0;i<t.length;i++){var s=t[i],n=e.call(s,i,s);if(s.value=n,r.push(s),"boolean"==typeof n&&0==n)break}return r},this.text=function(t,e){var r="get",t=this.handleHtmlText(t,e,"text",r=2<=arguments.length?"set":r);return t=null==t?"":t},this.html=function(t,e){var r=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"html",r)},this.htmlwrap=function(t,e){var r=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"htmlwrap",r)},this.getBackground=function(t,e){var r="get",t=this.handleHtmlText(t,e,"background",r=2<=arguments.length?"set":r);return t=null==t?"":t},this.handleHtmlText=function(t,e,r,i){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var n=this.each(t,e),l=0;l<n.length;l++)n[l]&&this.handleTextHtml(n[l],n[l].value,r,i);return!1}if("set"==i){if("undefined"==s)return;null==e?e="":e+=""}for(var h="",l=0;l<t.length;l++){var o=this.cssArr[t[l].index];if(null!=o)if("htmlwrap"==r){if("get"==i)return o.html;o.html=e}else if("background"==r){var a,u=this.css(o,"background");"get"==i?null!=u&&(a=this.cssSrcUrl(u),h+=this.handleClearBackground(a)):null!=u&&(a=u,"server="==e.substr(0,7)?(a=this.handleClearBackground(a),e=this.common.fullHttpUrl(e.substr(7),a)):"dir="==e.substr(0,4)&&(a=this.handleClearBackground(a),e=e.substr(4)+this.common.getUrlFileName(a)),e=this.cssSrcUrl(u,e),this.css(o,"background",e))}else if("@charset"==o.label)if("get"==i){if(h+=o.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim(),"html"==r)return h}else o.html='@charset "'+e+'";';else if("@import"==o.label)if("get"==i){u=(u=o.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim();if(h+=u=this.handleClearBackground(u),"html"==r)return h}else o.html='@import url("'+e+'");';else{var f=o.html.indexOf("{"),m=o.html.indexOf("}");if("get"==i){if(-1!=f&&-1!=m&&(h+=o.html.substr(f+1,m-f-1)),"html"==r)return h}else o.html=o.html.substr(0,f+1)+e+"}"}}return h}},this.css=function(t,e,r){if(null!=t){t=this.handleDomList(t);var i=this.toType(r);if("function"==i){for(var s=this.each(t,r),n=0;n<s.length;n++)s[n]&&this.css(s[n],e,s[n].value);return!1}var l=3<=arguments.length?"set":"get";if("set"==l){if("undefined"==i)return;null==r?r="":r+=""}for(n=0;n<t.length;n++){var h=this.cssArr[t[n].index];if(null!=h){if("get"==l)return this.handleLabelParam(h,e);this.handleLabelParam(h,e,r)}}}},this.remove=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){var r=this.cssArr[t[e].index];null!=r&&(r.html="",r.label="<del>")}return this}},this.getsrc=function(t,e){if(null!=t){t=this.handleDomList(t);for(var r="",i=0;i<t.length;i++){var s=this.cssArr[t[i].index];if(null!=s){var s=this.text(s),n=this.cssSrcUrl(s),n=this.handleClearBackground(n);if(null!=e)for(var l=n.split(","),h=0;h<=l.length-1;h++)""!=(n=l[h])&&("server="==e.substr(0,7).toLowerCase()?n=this.common.fullHttpUrl(e.substr(7),n):"dir="==e.substr(0,4).toLowerCase()?n=e.substr(4)+this.common.getUrlFileName(n):"filename"==e.substr(0,8).toLowerCase()&&(n=this.common.getUrlFileName(n)),""!=r&&(r+=","),r+=n);else""!=n&&(""!=r&&(r+=","),r+=n)}}return r}},this.setsrc=function(t,e){if(null!=t){t=this.handleDomList(t);var r=this.toType(e);if("function"==r){for(var i=this.each(t,e),s=0;s<i.length;s++)i[s]&&this.setsrc(i[s],i[s].value);return!1}if("undefined"!=r){null==e?e="":e+="";for(s=0;s<t.length;s++){var n=this.cssArr[t[s].index];if(null!=n){for(var l="",h=this.text(n),o=h.split(";"),a=0;a<=o.length-1;a++){var u=o[a];""!=l&&(l+=";"),l+=this.cssSrcUrl(u,e)}h!=l&&this.text(n,l)}}return this}}},this.handleClearBackground=function(t){var e=t.indexOf("(");if(-1==(t=-1!=(e=(t=-1!=e?t.substr(e+1):t).indexOf(")"))?t.substr(0,e):t).indexOf("'")&&-1==t.indexOf('"')&&-1==t.indexOf("("))return t;for(var r=!1,i="",s=0;s<=t.length;s++){var n=t.substr(s,1);0!=r||"'"!=n&&'"'!=n&&"("!=n&&")"!=n?1==r?"'"!=n&&'"'!=n&&"("!=n&&")"!=n||(r=!1,"'"!=n&&'"'!=n||(n="")):" "==n&&(n=""):(r=!0,"'"!=n&&'"'!=n||(n="")),i+=n}return i.trim()},this.cssSrcUrl=function(t,e){if(-1==t.indexOf(","))return this.handleCssSrcUrl(t,e);for(var r=t.split(","),i="",s=0;s<r.length;s++){var n=r[s];""!=(n=this.handleCssSrcUrl(n,e))&&(""!=i&&(i+=","),i+=n)}return i},this.handleCssSrcUrl=function(t,e){if(null==t)return"";if(null==e){if(-1==t.indexOf("(")||-1==t.indexOf(")"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:"";if(-1==t.toLowerCase().indexOf("url"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:""}for(var r="",i=!1,s=!1,n="",l=-1,h=0;h<=t.length-1;h++){var o=t.substr(h,1);if(i)if(s){if(n==o){var a=t.substr(l,h-l);if(null!=e)if("server="==e.substr(0,7)){if(-1!=a.indexOf("data:"))return t;a=t.substr(0,l)+this.common.fullHttpUrl(e.substr(7),a)+t.substr(h)}else if("dir="==e.substr(0,4)){if(-1!=a.indexOf("data:"))return t;a=t.substr(0,l)+e.substr(4)+this.common.getUrlFileName(a)+t.substr(h)}else-1==a.indexOf("data:")&&(a=t.substr(0,l)+e+t.substr(h));return a}}else""!=o&&('"'==o||"'"==o?(s=!0,n=o,-1==l&&(l=h+1)):" "!=o&&(s=!0,n=")",-1==l&&(l=h)));else if("("==o){a=r.trim().toLowerCase();if("url"==a.substr(a.length-3,3))i=!0;else if(null==e)return""}else r+=o}return t},this.after=function(t,e){if(null!=t){t=this.handleDomList(t);var r=this.toType(e);if("function"==r){for(var i=this.each(t,e),s=0;s<i.length;s++)i[s]&&this.after(i[s],i[s].value);return!1}if("undefined"!=r){null==e?e="":e+="";for(s=0;s<t.length;s++){var n=this.cssArr[t[s].index];null!=n&&null!=e&&(n.downHtml+=e)}return this}}},this.before=function(t,e){if(null!=t){t=this.handleDomList(t);var r=this.toType(e);if("function"==r){for(var i=this.each(t,e),s=0;s<i.length;s++)i[s]&&this.before(i[s],i[s].value);return!1}if("undefined"!=r){null==e?e="":e+="";for(s=0;s<t.length;s++){var n=this.cssArr[t[s].index];null!=n&&null!=e&&(n.upHtml+=e)}return this}}},this.handleCssCharset=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var r=this.cssArr[e];if(null!=r)if("@charset"==r.label)return null!=t?(r.html='@charset "'+t+'";',""):r.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase()}return""},this.handleCssImport=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var r=this.cssArr[e];if(null!=r&&"@import"==r.label){if(null!=t)return r.html='@import url("'+t+'");',"";r=(r=r.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase();return r=this.handleClearBackground(r)}}return""},this.setConfig=function(t){if(null==t)return this.config;if(null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir,null!=t.cssdir)){for(var e=t.cssdir.split("/"),r="",i=0;i<=e.length-2;i++)r+="../";this.config.parentdir=r}null!=t.parentdir&&(this.config.parentdir=t.parentdir)},this.printCss=function(t){for(var e="",r=0;r<=this.cssArr.length-1;r++){var i,s=this.cssArr[r];null!=s&&(i=s.upHtml+s.html+s.downHtml,"zip"==t?i="/*"==s.label?"":i.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(i=i.trim()+"\n"),""!=i&&(e+=i))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.cssArr)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])}}),_xytcss=new _XIYUETACSS,xiyuetaCss=function(t,e,r){return new xiyuetaCss.fn.init(t,e,r)};xiyuetaCss.fn=xiyuetaCss.prototype={length:0,selector:"",docList:void 0,x:null,y:null},xiyuetaCss.extend=xiyuetaCss.fn.extend=function(){var t,e,r,i=arguments[0]||{},s=1,n=arguments.length;for(s===n&&(i=this,s--);s<n;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&i!==r&&void 0!==r&&(i[e]=r);return i},(init=xiyuetaCss.fn.init=function(t,e,r){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=r,this.domListArray=[],0<_xytcss.cssArr.length&&("string"==typeof t?(this.domList=_xytcss.getDocument(t,e,r),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector=""))}).prototype=xiyuetaCss.fn,(xiyuetaCSS=$xytcss=$css=xiyuetaCss).fn.extend({parse:function(t){var e;return _xytcss.cssParse(t),0<_xytcss.cssArr.length&&"string"==typeof this.selector&&(e=(t=_xytcss.getDocument(this.selector,this.x,this.y)).split(","),this.length=e.length-1,_xytcss.domList=this.domList=t),this},each:function(t){return _xytcss.each(this.domList,t),this},text:function(t){return 1<=arguments.length?(_xytcss.text(this.domList,t),this):_xytcss.text(this.domList)},html:function(t){return 1<=arguments.length?(_xytcss.html(this.domList,t),this):_xytcss.html(this.domList)},htmlwrap:function(t){return 1<=arguments.length?(_xytcss.htmlwrap(this.domList,t),this):_xytcss.htmlwrap(this.domList)},css:function(t,e){return 2<=arguments.length?(_xytcss.css(this.domList,t,e),this):_xytcss.css(this.domList,t)},background:function(t){return 1<=arguments.length?(_xytcss.getBackground(this.domList,t),this):_xytcss.getBackground(this.domList)},remove:function(){return _xytcss.remove(this.domList),this},getsrc:function(t){return _xytcss.getsrc(this.domList,t)},setsrc:function(t){return _xytcss.setsrc(this.domList,t),this},after:function(t){return _xytcss.after(this.domList,t),this},before:function(t){return _xytcss.before(this.domList,t),this},print:function(t){return _xytcss.printCss(t)},debug:function(t){return _xytcss.debug(t)}}),xiyuetaCSS.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,r=[],i=0;i<this.domList.length;i++)i%2==0&&((t=this.domList[i]).index=++e,r.push(t));return this.domList=r,this.length=r.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,r=[],i=0;i<this.domList.length;i++)i%2==1&&((t=this.domList[i]).index=++e,r.push(t));return this.domList=r,this.length=r.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this}}),xiyuetaCSS.debug=function(t){return xiyuetaCSS().debug(t)},xiyuetaCSS.load=function(t,e){return xiyuetaCSS().parse(t,e),this},xiyuetaCSS.html=function(t){return _xytcss.printCss(t)},xiyuetaCSS.charset=function(t){return _xytcss.handleCssCharset(t)},xiyuetaCSS.config=function(t){return _xytcss.setConfig(t)},xiyuetaCSS.lv=function(){return _xytcss.lv},XiyuetaCommon.prototype.handleFileUrl=function(t){var e="",r=t.indexOf("://");if(-1!=r&&(e=t.substr(0,r+3),t=t.substr(r+3)),-1!=(t=-1!=(t=t.replace(/\/\//g,"/")).indexOf("/./")?t.replace(/\/.\//g,"/"):t).indexOf("/../")){for(var i=[],s=0,n=t.split("/"),l=0;l<=n.length-1;l++)".."==(h=n[l])?(0==s?s=l-1:--s,0<=s&&delete i[s]):(i.push(h),s=0);for(t="",l=0;l<=i.length-1;l++){var h=i[l];null!=i[l]&&(""!=t&&(t+="/"),t+=i[l])}}return e+t},XiyuetaCommon.prototype.fullHttpUrl=function(t,e){if(null==e)return"";if(""==(e=(e+="").replace(/\\/g,"/").trim())||"./"==e)return"";var r,i="",s="",n="",l=t.indexOf("://");return s=-1!=l?(i=t.substr(0,l+3),l=(r=t.substr(l+3)).lastIndexOf("/"),n=i+r.substr(0,l+1),l=r.indexOf("/"),i+r.substr(0,l+1)):(l=t.lastIndexOf("/"),n=t.substr(0,l+1),l=t.indexOf("/"),t.substr(0,l+1)),"//"==e.substr(0,2)?e="http:"+e:-1==e.indexOf("://")&&(e="/"==e.substr(0,1)?s+e:n+e),this.handleFileUrl(e)},XiyuetaCommon.prototype.getUrlDir=function(t,e){return"string"!=typeof t?"":(-1<(t=t.trim()).indexOf("://")&&(r=t.indexOf("://",1),-1!=(t=t.substring(r+3,t.length)).indexOf("/")&&(t=t.substr(t.indexOf("/")+1))),-1!=(t=-1!=(t=-1!=(t="/"==t.substr(0,1)?t.substr(1):t).indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")?t.substr(0,t.indexOf("#")):t).indexOf("/")?"fz"==e?(t=t.substr(0,t.lastIndexOf("/"))).replace(/\//g,"_")+"_":t.substr(0,t.lastIndexOf("/")+1):"");var r},XiyuetaCommon.prototype.getUrlFileName=function(t,e){if(null==e&&(e=""),""==t||null==t)return"";var r,t=(t=t.replace(/\\/g,"/").trim()).split("/"),t=t[t.length-1],i="",s="";return-1!=(t=-1!=(t=-1!=t.indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")?t.substr(0,t.indexOf("#")):t).indexOf(".")?(r=t.lastIndexOf("."),i=t.substr(0,r),s=t.substr(r+1).toLowerCase()):i=t,""==i?"":("image"==e?""==s?t+=".jpg":-1=="|bmp|jpg|jpeg|gif|png|".indexOf("|"+s+"|")&&(t=i+".jpg"):"css"==e?""==s?t+=".css":-1=="|css|".indexOf("|"+s+"|")&&(t=i+".css"):"js"==e?""==s?t+=".js":-1=="|js|".indexOf("|"+s+"|")&&(t=i+".js"):(t=i,""!=s&&(t+="."+s)),t)},XiyuetaCommon.prototype.setFileNameA=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"pie")).replace(/\//g,"la")).replace(/:/g,"maohao")).replace(/\*/g,"xin")).replace(/\?/g,"wen")).replace(/"/g,"yinhao")).replace(/</g,"zou")).replace(/>/g,"you")).replace(/\|/g,"heng")).replace(/\./g,"juhao")).replace(/,/g,"douhao")).replace(/&nbsp;/g," ")).replace(/&quot;/g,"shuang")).replace(/\n/g,"")},XiyuetaCommon.prototype.checkUrl=function(t){return!!/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i.test(t=null==t?"":t)},XiyuetaCommon.prototype.getDomain=function(t){return"string"==typeof t&&-1<t.indexOf("//")?(e=t.indexOf("//",1),t=(e=t.substring(e+1,t.length)).indexOf("/",1),e.substring(1,t)):"";var e},_XIYUETA.prototype.cutLabel=function(t,e){t=this.handleDomList(t);for(var r="",i=0;i<this.htmlArr.length;i++)(l=this.htmlArr[i])&&("/style"==l.label?r+=l.upHtml:"link"==l.label&&"stylesheet"==(this.attr(l,"rel")+"").toLowerCase().trim()&&(r+=l.content));if(0<t.length){var s="",n=new _XIYUETACSS;n.cssParse(r);for(var l,i=0;i<n.cssArr.length;i++)(l=n.cssArr[i])&&this.checkCssInHtml(t,l.label)&&1==l.lv&&(s+=l.html+"\n");xiyuetaCSS().parse(s),""!=(s=xiyuetaCSS().print("format"))&&(s="<style>"+s+"\n</style>\n");var h=xiyueta(t).htmlwrap();return xiyueta.load(h),s+this.printHTML("format")}return""},_XIYUETA.prototype.checkCssInHtml=function(t,e){var r=(t=this.handleDomList(t))[0].x,i=t[0].y,t=e.indexOf("{");e=","+(e=-1<t?e.substr(0,t):e)+",";for(var s=r;s<i;s++){var n=this.htmlArr[s];if(n&&"/"!=n.label.substr(0,1)){var l=",*,",h=",* ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;l=",body,",h=",body ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;l=","+n.label+",",h=","+n.label+" ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;var o=this.handleLabelParam(n,"id");if(null!=o){l=",#"+o+",",h=",#"+o+" ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0}if(null!=(f=this.handleLabelParam(n,"class")))for(var a=f.split(" "),u=0;u<a.length;u++){var f,l=",."+(f=a[u])+",",h=",."+f+" ",m=",."+f+"[";if(-1!=e.indexOf(l)||-1!=e.indexOf(h)||-1!=e.indexOf(m))return!0}}return!1}},xiyueta.fn.extend({cutlabel:function(t){return _xyt.cutLabel(this.domList,t)}});