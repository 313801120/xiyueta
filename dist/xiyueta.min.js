<<<<<<< HEAD
/*! xiyueta v1.3.7 | Author xiyueta Adream http://xiyueta.com/ | Released under the MIT license  */
var _XIYUETA=function(){"use strict";this.version="1.3.7",this.htmlSource="",this.htmlArr=[],this.lv=0,this.isHtmlErr=!1,this.common=new XiyuetaCommon,this.config={httpurl:"",serverurl:"/api/downWeb/default.asp",jsdir:"js/",cssdir:"css/",imagesdir:"images/",urlToNameList:"",urlDefaultFileName:"default"},this.tplConfig={type:"xiyuetacms",minrow:4},this.singleLabelList="|br|hr|img|link|meta|param|input|!doctype|rect|line|col|wbr|base|basefont|area|";for(var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),i=0;i<t.length;i++){var r=t[i];e["[object "+r+"]"]=r.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.parseHTML=function(t){this.htmlSource=t+="";var e="",i="",r="",s="",l=!(this.htmlArr=[]),n=!1,a=!1,h=!1,o=!1,u=!1,f=0,c=-1;this.isHtmlErr=!1;for(var m=0;m<this.htmlSource.length;m++){var d,p,g,b,x=e,e=this.htmlSource.substr(m,1);l?(r+=e,h?">"==e&&"--\x3e"==r.substr(r.length-3,3)&&(a=l=h=!1,this.htmlArr.push({_index:++c,lv:f+1,label:"!--",upHtml:s,downHtml:"",html:r,tagpair:1}),s=r=""):n&&"\x3c!--"==r?h=!0:o?">"==e&&"%"==x&&(a=l=o=!1,r=s+r,s=""):n&&"<%"==r?o=!0:u?">"==e&&"?"==x&&(a=l=u=!1,r=s+r,s=""):n&&"<?"==r?u=!0:-1!=" \n\t".indexOf(e)&&n?n=!1:"<"==e?"%"==(b=this.htmlSource.substr(m+1,1).toLowerCase())?0<(d=this.htmlSource.substr(m+1).indexOf("%>"))&&(r+=this.htmlSource.substr(m+1).substr(0,d+2),m+=d+2):"?"==b?0<(d=this.htmlSource.substr(m+1).indexOf("?>"))&&(r+=this.htmlSource.substr(m+1).substr(0,d+2),m+=d+2):(l=n=!1,r=s,m--):">"==e&&(l=n=!1,x=2,"/"==i.substr(0,1)?a=!0:(f++,"/"!=i.substr(i.length-1,1)&&-1==this.singleLabelList.indexOf("|"+i.toLowerCase()+"|")||(a=!0,x=1,i=i.replace(/\//g,"").trim())),p=i.toLowerCase(),this.htmlArr.push({_index:++c,lv:f,label:p,upHtml:s,downHtml:"",html:r,tagpair:x}),f<1&&(this.isHtmlErr=!0),s=r="",a&&(f--,a=!1),"script"==p?(g=this.htmlSource.substr(m+1).toLowerCase().indexOf("<\/script>"),r=this.htmlSource.substr(m+1,g),m+=g):"style"==p?(g=this.htmlSource.substr(m+1).toLowerCase().indexOf("</style>"),r=this.htmlSource.substr(m+1,g),m+=g):"textarea"==p&&(g=this.htmlSource.substr(m+1).toLowerCase().indexOf("</textarea>"),r=this.htmlSource.substr(m+1,g),m+=g)),n&&(i+=e)):"<"==e?(b=this.htmlSource.substr(m+1,1).toLowerCase(),-1!="abcdefghijklmnopqrstuvwxyz!/%?".indexOf(b)?(s=r,r=e,a=!(n=l=!0),i=""):r+=e):r+=e}""!=r&&this.htmlArr.push({_index:++c,lv:f,label:"",upHtml:s,html:r,downHtml:""}),this.lv=f},this.handleLabelParam=function(t,e,i){if(null==t)return"";if(null==i){if(null!=t[e])return t[e]}else i+="";for(var r=!1,s=!1,l="",n="",a=!1,h="",o=!1,u=!0,f=0,c=0,m=!1,d=t.label.length+1;d<t.html.length;d++){var p,g,b,x,y=t.html.substr(d,1);if(a)if(o)if(m)">"==y&&(m=!1),n+=y;else if(y==h||">"==y){if(t[l=l.toLowerCase()]=n,o=a=!1,h="",e==l)return null==i?n:(""==i?(b=t.html.substr(0,c-1).trim(),">"!=(x=t.html.substr(d+1).trim()).substr(0,1)&&(x=" "+x),t.html=b+x,t[l]=void 0):(p=(g=f)+n.length,u&&(g++,p++),b=t.html.substr(0,g),x=t.html.substr(p),t.html=b+i+x,t[l]=i),t);if(">"==y&&null!=i)return""!=i&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+i+'">'),t[e]=i,t}else"<"==y&&(m=!0),n+=y;else'"'==y||"'"==y?(h=y,f=d,u=o=!0):" "!=y&&(h=" ",f=d,n=y,u=!(o=!0));else{if(">"==y&&0==r)return null==i?void 0:(""!=i&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+i+'">',t[e]=i),t);if(r){if("="==y)a=!(r=!1),h=n="";else if(0==s)-1!=" \t\n".indexOf(y)?s=!0:l+=y;else if(-1==" \t\n".indexOf(y)){if(e==l)return null==i?"":(""==i?(b=t.html.substr(0,c).trim(),">"!=(x=t.html.substr(d).trim()).substr(0,1)&&(x=" "+x),t.html=b+x,t[l]=void 0):(g=c+l.length,b=t.html.substr(0,g),x=t.html.substr(g),t.html=b+'="'+i+'"'+x,t[l]=i),t);r=!1,l=""}}else-1==" \t\n".indexOf(y)&&(s=!(r=!0),l=y,c=d)}}},this.getDocument=function(t,e,i,r,s){if(null==t&&(t=""),null==r&&(r=!1),0==this.htmlArr.length)return console.log("%c 需要先解析一段html文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf(",")){for(var l=[],n=t.split(","),a=0;a<n.length;a++){var h=this.getDocument(n[a],e,i,r);l=l.concat(h)}return l=this.delDomListDuplicate(l)}if(""==(t=t.trim()))return"";null==e&&(e=0),null==i&&(i=this.htmlArr.length-1);var o=-1.1,u=-1.1,f=-1.1,c=-1.1,m=-1.1,d="",p=!1,g="",b="",x="",y="",v="",L="";if("number"==this.toType(s)&&(u=s),-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var A=!1,L="",a=0;a<t.length;a++){var w=t.substr(a,1);0!=A||"'"!=w&&'"'!=w&&"("!=w?1==A&&(" "==w?w="-Space-":"'"!=w&&'"'!=w&&")"!=w||(A=!1,"'"!=w&&'"'!=w||(w=""))):(A=!0,"'"!=w&&'"'!=w||(w="")),L+=w}t=L}var s=t.indexOf(">"),_=t.indexOf(" "),O=" ",C=_;-1!=s&&(s<_||-1==_)&&(O=">",C=s),-1<C&&(g=t.substr(C+1).trim(),t=t.substr(0,C));-1!=(C=t.indexOf(":"))&&(s=_="",j=(w=t.substr(C+1)).indexOf("("),S=w.indexOf(")"),-1!=j&&-1!=S?(_=w.substr(0,j).toLowerCase(),S=(s=w.substr(j+1)).indexOf(")"),s=s.substr(0,S).replace(/-Space-/g," ").trim()):_=w.toLowerCase(),"first"==_?o=0:"last"==_?o=-1:"even"==_?f=0:"odd"==_?f=1:"eq"==_?(o=0,(o=""!=s?parseInt(s):o)+""=="NaN"&&(o=-.1,t="")):"lv"==_?(u=1,(u=""!=s?parseInt(s):u)+""=="NaN"&&(u=-.1,t="")):"gt"==_?""!=s&&(c=parseInt(s))+""=="NaN"&&(c=-.1,t=""):"lt"==_?""!=s&&(m=parseInt(s))+""=="NaN"&&(m=-.1,t=""):"header"==_?p=!0:"contains"==_?d=s:console.log(t,"没有动作 "+_),""!=(t=t.substr(0,C))||-.1==o&&-.1==u||(t="*"));var U=[];if(-1!=t.indexOf("["))for(a=0;a<10;a++)if(-1!=(C=t.indexOf("["))){var T,S=(w=t.substr(C+1)).indexOf("]"),H=(v=y=x=b="",-1==(w=w.substr(0,S)).indexOf("=")?(b=w,x="*"):(b=(T=w.split("="))[0],x=T[1].replace(/-Space-/g," "),T=b.substr(b.length-1),-1!="!^$*~|".indexOf(T)&&(b=b.substr(0,b.length-1),y=T)),-1!=b.indexOf("|")&&(b=(T=b.split("|"))[0],"NOUL"==T[1]&&(x=x.toLowerCase(),v=T[1])),U.push({name:b,value:x,action:y,myaction:v}),t.substr(w.length+C+2));if(t=t.substr(0,C),-1!=H.indexOf("[")&&(t+=H),""==t&&(t="*"),-1==H.indexOf("["))break}if("#"==t.substr(0,1)){if(0<o)return"";o=0}var D,j={type:"",name:"",nFocus:-1.1},l=(-1<(C=t.substr(1).lastIndexOf("."))?(t=(D=t).substr(0,C+1),j={type:".",name:D.substr(C+2).toLowerCase()}):-1<(C=t.substr(1).lastIndexOf("#"))&&(t=(D=t).substr(0,C+1),j={type:"#",name:D.substr(C+2).toLowerCase()}),this.serchDocument(t,e,i,j,U));if(0<l.length)if(-1.1!=o)l=o<0?[l[l.length+o]]:[l[o]];else if(-1.1!=u){for(var F=[],a=0;a<l.length;a++)(I=this.htmlArr[l[a].x]).lv==u&&F.push(l[a]);l=F}else if(-1.1!=f){for(F=[],a=0;a<l.length;a++)a%2==f&&F.push(l[a]);l=F}else if(-1.1!=c){for(F=[],a=c+1;a<l.length;a++)F.push(l[a]);l=F}else if(-1.1!=m){m>l.length&&(m=l.length);for(F=[],a=0;a<m;a++)F.push(l[a]);l=F}else if(""!=d){for(var I,F=[],a=0;a<l.length;a++)(I=l[a]).x!=I.y&&-1!=this.text(I).indexOf(d)&&F.push(l[a]);l=F}else if(p){for(F=[],n="h1,h2,h3,h4,h5,h6,,h7,h8,h9".split(","),a=0;a<l.length;a++)for(var e=l[a].x,i=l[a].y,h=this.getDocument(t+" "+n[a],e,i,r),k=0;k<h.length;k++)F.push(h[k]);l=F}if(""!=g&&0<l.length){for(var N,F=[],a=0;a<l.length;a++)(e=l[a].x)!=(i=l[a].y)&&(N="",">"==O&&(N=this.htmlArr[e].lv+1),h=this.getDocument(g,e+1,i-1,!0,N),F=F.concat(h));l=F}return l=0==r?this.delDomListDuplicate(l):l},this.delDomListDuplicate=function(t){if(t.length<=1)return t;for(var e="",i=-1,r=[],s=0;s<t.length;s++){var l,n=t[s];null!=n&&n&&(l=n.x+"|"+n.y,-1==(","+e+",").indexOf(","+l+",")&&(e+=","+l,i++,n.index=i,r.push(n)))}return r},this.domListAsc=function(t){for(var e=[],i=-1,r=0;r<t.length;r++){for(var s,l=void 0,n=0;n<t.length;n++){var a=t[n];null!=a&&(null==l||a.x<l.x)&&(l=a,s=n)}i++,l.index=i,e.push(l),t[s]=void 0}return e},this.serchDocument=function(t,e,i,r,s){for(var l=!1,n=[],a=0,h=0,o=!1,u=e;u<=i;u++){var f=this.htmlArr[u];if(null!=f)if(l&&this.checkEndSelector(f,t)&&a==f.lv){l=!1,o&&(n[n.length-1].y=u);for(var o=!1,c=this.serchDocument(t,h+1,u,r,s),m=0;m<c.length;m++)n.push(c[m])}else if(this.checkStartSelector(f,t,r)&&0==l){2==f.tagpair&&(l=!0,a=f.lv);for(var h=u,d=!0,m=0;m<s.length;m++){var p=s[m].name,g=s[m].value,b=s[m].action,x=s[m].myaction;if(""!=p&&(p=this.handleLabelParam(f,p),"NOUL"==x&&null!=p&&(p=p.toLowerCase()),"^"==b?null!=p&&p.substr(0,g.length)==g||(d=!1):"|"==b?null!=p&&(p+"-").substr(0,g.length+1)==g+"-"||(d=!1):"$"==b?null!=p&&p.substr(-1*g.length)==g||(d=!1):"~"==b?null!=p&&-1!=(" "+p+" ").indexOf(" "+g+" ")||(d=!1):"*"==b?null!=p&&-1!=p.indexOf(g)||(d=!1):"!"==b?p==g&&(d=!1):null!=p&&"*"==g?d=!0:p!=g&&(d=!1)),0==d)break}d&&(n.push({index:n.length,x:u,y:u}),2==f.tagpair&&(o=!0))}}return n},this.checkStartSelector=function(t,e,i){if(""==t.label)return!1;var r=e+" ",s=t.label.substr(0,1),l=e.substr(0,1);if("/"==s)return!1;if("*"==l)return"."==i.type?null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(h=this.handleLabelParam(t,"id"))&&h.toLowerCase()==i.name;if("#"==l){var n=e.substr(1,r.indexOf(" ")-1);if(this.handleLabelParam(t,"id")==n)return""==i||("."==i.type?null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(h=this.handleLabelParam(t,"id"))&&h.toLowerCase()==i.name)}else if("."==l){var a,h,n=e.substr(1,r.indexOf(" ")-1).toLowerCase();if(null==(a=" "+this.handleLabelParam(t,"class")+" "))return!1;if(-1!=(a=a.toLowerCase()).indexOf(" "+n+" "))return""==i||("."==i.type?null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(h=this.handleLabelParam(t,"id"))&&h.toLowerCase()==i.name)}else if(t.label+" "==e.substr(0,t.label.length+1).toLowerCase()+" ")return"."==i.type?null!=(a=this.handleLabelParam(t,"class"))&&-1!=(" "+a.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(h=this.handleLabelParam(t,"id"))&&h.toLowerCase()==i.name;return!1},this.checkEndSelector=function(t,e){t.label.substr(0,1);var i=e.substr(0,1);return"*"==i||("#"==i||"."==i||t.label=="/"+e.substr(0,t.label.length-1).toLowerCase())},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:null!=t._index?[{index:0,x:t._index,y:t._index}]:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r],l=e.call(s,r,s);if(s.value=l,i.push(s),"boolean"==typeof l&&0==l)break}return i},this.find=function(t,e){if(t=this.handleDomList(t=null==t?[]:t),"object"==this.toType(e)){for(var i=e.domList,r=[],s=0;s<i.length;s++)for(var l=i[s].x,n=i[s].y,a=0;a<t.length;a++){var h=t[a].x,o=t[a].y;h<=l&&l<=o&&r.push(i[s])}return this.delDomListDuplicate(r)}for(var u,r=[],a=0;a<t.length;a++)(l=t[a].x)!=(n=t[a].y)&&(u=this.getDocument(e,l,n),r=r.concat(u));return this.delDomListDuplicate(r)},this.add=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;e=t.concat(i);return e=this.delDomListDuplicate(e),this.domListAsc(e)},this.not=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;for(var r=[],s=0,l=0;l<t.length;l++){for(var n=t[l],a=!0,h=0;h<i.length;h++){var o=i[h];if(o.x==n.x&&o.y==n.y){a=!1;break}}a&&(n.index=s++,r.push(n))}return r},this.is=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return!1;if(null==e)return!1;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return!1;for(var r=0;r<t.length;r++)for(var s=t[r],l=0;l<i.length;l++){var n=i[l];if(n.x==s.x&&n.y==s.y)return!0}return!1},this.text=function(t,e){var i="get",t=this.handleTextHtml(t,e,"text",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.html=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"html",i)},this.htmlwrap=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"htmlwrap",i)},this.handleTextHtml=function(t,e,i,r){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var l=this.each(t,e),n=0;n<l.length;n++)l[n]&&this.handleTextHtml(l[n],l[n].value,i,r);return!1}if("set"==r){if("undefined"==s)return;null==e?e="":e+="","text"==i&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}for(var a="",n=0;n<t.length;n++)if(null!=t[n])for(var h=t[n].x,o=t[n].y,u=h;u<=o;u++){var f=this.htmlArr[u];if(f)if("text"==i)u==h?"get"==r&&(a+=f.downHtml):u<o?"set"==r?delete this.htmlArr[u]:a+=f.upHtml+f.downHtml:u==o&&("get"==r?a+=f.upHtml:f.upHtml=e);else if(u==h)"get"==r?("htmlwrap"==i&&(a+=f.html),a+=f.downHtml):"htmlwrap"==i&&(f.html="",u==o&&(f.upHtml=e));else if(u<o)"set"==r?delete this.htmlArr[u]:a+=f.upHtml+f.html+f.downHtml;else if(u==o)if("get"==r){if(a+=f.upHtml,"htmlwrap"==i&&(a+=f.html),"get"==r)return a}else f.upHtml=e,"htmlwrap"==i&&(f.html="")}return"get"==r?a:void 0}},this.handleCssParam=function(t,e,i){var r,s,l;if(null==i)return s="a{"+(l=null==(l=this.attr(t,"style"))?"":l)+"}",$xytcss("a").parse(s).css(e);i+="",r=l=null==(l=this.attr(t,"style"))?"":l,s="a{"+l+"}",$xytcss("a").parse(s).css(e,i),l=(l=$xytcss().print()).substr(2,l.length-3).trim(),r.trim()!=l&&(2<=l.split(";").length&&(l=l.replace(/ /g,"").replace(/:/g,": ").replace(/;/g,"; ").trim()),this.attr(t,"style",l))},this.css=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"css",r)},this.attr=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"attr",r)},this.prop=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"prop",r)},this.handleCssAttr=function(t,e,i,r,s){if("function"==this.toType(i)){for(var l=this.each(t,i),n=0;n<l.length;n++)l[n]&&this.handleCssAttr(l[n],e,l[n].value,r,s);return!1}if("object"==this.toType(e)){for(var a in e)this.handleCssAttr(t,a,e[a],r,s);return this}if(null!=t&&null!=e&&""!=(e=(e+="").trim())){t=this.handleDomList(t);for(n=0;n<t.length;n++){var h=t[n];if("attr"==r){if("get"==s)return this.handleLabelParam(this.htmlArr[h.x],e);this.handleLabelParam(this.htmlArr[h.x],e,i)}else if("prop"==r){var o=this.htmlArr[h.x],u=this.checkTagAttrExist(o.label,e);if("get"==s)return 0==u?void 0:this.handleLabelParam(o,e);u&&this.handleLabelParam(o,e,i)}else{if("get"==s)return this.handleCssParam(h,e);this.handleCssParam(h,e,i)}}}},this.data=function(t,e,i){if(null==t||null==e)return!1;if(""!=e.trim()){e="data_"+e;var r="get",s=(t=this.handleDomList(t)).length;"get"==(r=3<=arguments.length?"set":r)&&(s=1);for(var l=0;l<s;l++){var n=this.htmlArr[t[l].x];if(n){if("get"==r)return n[e];n[e]=i}}}},this.removeAttr=function(t,e){if(null==t||null==e)return!1;if(""==e.trim())return!1;t=this.handleDomList(t);for(var i=e.split(" "),r=0;r<i.length;r++){var s=i[r];""!=s&&this.attr(t,s,"")}return!0},this.val=function(t,e){if(null!=t){var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.val(r[s],r[s].value);return!1}t=this.handleDomList(t);var l="get";if(2<=arguments.length){if(l="set","undefined"==i)return;null==e?e="":e+=""}if("get"==l){if(h=0<t.length?this.htmlArr[t[0].x]:h){if("textarea"==h.label)return this.html(t[0]);if("select"!=h.label)return this.handleLabelParam(h,"value");for(var n=(c=this.getDocument("option",o,u)).length,a=0;a<n;a++)c[a].x==c[a].y||null==this.attr(c[a],"selected")&&null!=f||(f=this.attr(c[a],"value"));return f}}else for(s=0;s<t.length;s++)if(null!=t[s]){var h,o=t[s].x,u=t[s].y;if(h=this.htmlArr[o])if(o!=u)if("textarea"==h.label)this.html(t[s],e);else if("select"==h.label)for(var f,c=this.getDocument("option",o,u),a=0;a<c.length;a++)c[a].x!=c[a].y&&(this.attr(c[a],"value")==e?this.attr(c[a],"selected","selected"):this.attr(c[a],"selected",null));else this.attr(t[s],"value",e);else this.attr(t[s],"value",e)}}},this.remove=function(t,e,i){var r="",s=!1;if(2==arguments.length?"string"==typeof e?r=e:"boolean"==typeof e&&(s=e):3==arguments.length&&("string"==typeof e&&(r=e),"boolean"==typeof i&&(s=i)),null!=t){if(null==(t=this.handleDomList(t)))return"";null==r||-1!=(e=r.indexOf(":"))&&(a=i="",e=(r=r.substr(e+1)).indexOf("("),n=r.indexOf(")"),-1!=e&&-1!=n?(i=r.substr(0,e).toLowerCase(),n=(a=r.substr(e+1)).indexOf(")"),("'"==(e=(a=a.substr(0,n).replace(/-Space-/g," ").trim()).trim()).substr(0,1)&&"'"==e.substr(e.length-1,1)||'"'==e.substr(0,1)&&'"'==e.substr(e.length-1,1))&&(a=e.substr(1,e.length-2))):i=r.toLowerCase(),"contains"==i&&(l=a));var l,n,a,h=[];if(null!=l){for(var o=0;o<t.length;o++)(u=t[o]).x!=u.y&&-1!=this.text(u).indexOf(l)&&h.push(u);t=h}for(o=0;o<t.length;o++)for(var u,f=t[o].x,c=t[o].y,m=f;m<=c;m++)(u=this.htmlArr[m])&&(m==f?(u.html="",u.label="",s&&(u.upHtml="")):delete this.htmlArr[m]);return t}},this.addClass=function(t,e){var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.addClass(r[s],r[s].value);return!1}if(null!=t){if(t=this.handleDomList(t),"number"==i)return!1;if(null==t||null==e)return!1;if(this.common.isArray(e))var l=e;else{if(""==(e=(e+"").trim()))return!1;l=e.split(" ")}for(s=0;s<t.length;s++){for(var n=t[s],a=null!=(a=this.attr(n,"class"))?a.trim():"",h=0;h<l.length;h++)""!=l[h]&&-1==(" "+a+" ").indexOf(" "+l[h]+" ")&&(""!=a&&(a+=" "),a+=l[h]);this.attr(n,"class",a)}}},this.hasClass=function(t,e){if("number"==typeof e)return!1;if(null==t||null==e)return!1;if(""==(e=e.trim()))return!1;if(null==t)return!1;t=this.handleDomList(t);for(var i=0;i<t.length;i++){var r=null!=(r=this.attr(t[i],"class"))?r.trim():"";if(""!=r&&-1!=(" "+r+" ").indexOf(" "+e+" "))return!0}return!1},this.removeClass=function(t,e){if("function"==this.toType(e)){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.removeClass(i[r],i[r].value);return!1}if(null!=t){if(t=this.handleDomList(t),"array"==this.toType(e))var s=e;else{if(null==t||null==e)return!1;if(""==(e=(e+"").trim()))return!1;s=e.split(" ")}for(r=0;r<t.length;r++){var l=t[r];if(null!=(n=this.attr(l,"class"))){for(var n=" "+(n=n.trim())+" ",a=0;a<=s.length-1;a++)""!=s[a]&&(n=n.replace(" "+s[a]+" "," "));this.attr(l,"class",n.trim())}}}},this.wrap=function(t,e,i){if(null!=t){t=this.handleDomList(t);for(var r=0;r<t.length;r++){var s=t[r].x,l=t[r].y;this.htmlArr[s].upHtml+=e,this.htmlArr[l].downHtml+=i}return this}},this.unwrap=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){for(var i=t[e].x,r=t[e].y,s=this.htmlArr[i].lv-1,l=i;0<=l;l--){var n=this.htmlArr[l];if("object"==typeof n&&this.htmlArr[l].lv==s){n.html="";break}}for(l=r;l<=this.htmlArr.length-1;l++){n=this.htmlArr[l];if("object"==typeof n&&this.htmlArr[l].lv==s){n.html="";break}}}return this}},this.append=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.append(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++){var s=t[r].x,l=t[r].y;s!=l?this.htmlArr[l]&&(this.htmlArr[l].upHtml+=e):this.htmlArr[s]&&(this.htmlArr[s].downHtml+=e)}return this},this.prepend=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.prepend(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++){var s=this.htmlArr[t[r].x];s.downHtml=e+s.downHtml}return this},this.after=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.after(i[r],i[r].value);return!1}"object"==this.toType(t)&&(t=[t]);for(r=0;r<t.length;r++){var s=this.htmlArr[t[r].y];s.downHtml=e+s.downHtml}return this},this.before=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.before(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++)this.htmlArr[t[r].x].upHtml+=e;return this},this.next=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var i=this.htmlArr[t[e].x],r=-1,s=i._index+1;s<=this.htmlArr.length-1;s++){var l=this.htmlArr[s];if(l){if(l.lv<i.lv)break;if(-1!=r){if(i.lv==l.lv&&"/"==l.label.substr(0,1))return{index:0,x:r,y:l._index}}else if(i.lv==l.lv&&"/"!=l.label.substr(0,1)){if(1==l.tagpair)return{index:0,x:l._index,y:l._index};r=l._index}}}return[]},this.nextAll=function(t){t=this.handleDomList(t);for(var e=[],i=-1,r=0;r<t.length;r++)for(var s=this.htmlArr[t[r].x],l=-1,n=s._index+1;n<=this.htmlArr.length-1;n++){var a=this.htmlArr[n];if(a){if(a.lv<s.lv)break;-1!=l?s.lv==a.lv&&"/"==a.label.substr(0,1)&&(e.push({index:++i,x:l,y:a._index}),l=-1):s.lv==a.lv&&"/"!=a.label.substr(0,1)&&(1==a.tagpair?e.push({index:++i,x:a._index,y:a._index}):l=a._index)}}return e},this.prev=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var i=this.htmlArr[t[e].x],r=-1,s=i._index-1;0<=s;s--){var l=this.htmlArr[s];if(l){if(l.lv<i.lv)break;if(-1!=r){if(i.lv==l.lv&&"/"!=l.label.substr(0,1))return{index:0,x:l._index,y:r}}else if(i.lv==l.lv&&"/"==l.label.substr(0,1)){if(1==l.tagpair)return{index:0,x:l._index,y:l._index};r=l._index}}}return[]},this.prevAll=function(t,e){t=this.handleDomList(t),null==e&&(e="desc");for(var i=[],r=0;r<t.length;r++)for(var s=this.htmlArr[t[r].x],l=-1,n=s._index-1;0<=n;n--){var a=this.htmlArr[n];if(a){if(a.lv<s.lv)break;-1!=l?s.lv==a.lv&&"/"!=a.label.substr(0,1)&&(i.push({index:0,x:a._index,y:l}),l=-1):s.lv==a.lv&&"/"==a.label.substr(0,1)&&(1==a.tagpair?i.push({x:a._index,y:a._index}):l=a._index)}}return i="asc"==e?this.domListAsc(i):i},this.parent=function(t){t=this.handleDomList(t);for(var e=[],i=0;i<t.length;i++){for(var r=this.htmlArr[t[i].x],s=-1,l=-1,n=r._index-1;0<=n;n--){var a=this.htmlArr[n];if(a&&r.lv-1==a.lv&&"/"!=a.label.substr(0,1)){s=a._index;break}}for(n=r._index+1;n<=this.htmlArr.length-1;n++){a=this.htmlArr[n];if(a&&r.lv-1==a.lv&&"/"==a.label.substr(0,1)){l=a._index;break}}-1!=s&&e.push({x:s,y:l})}return e},this.parents=function(t){t=this.handleDomList(t);for(var e=[],i=0;i<t.length;i++){for(var r=this.htmlArr[t[i].x],s=-1,l=-1,n=r._index-1;0<=n;n--){var a=this.htmlArr[n];if(a&&r.lv-1==a.lv&&"/"!=a.label.substr(0,1)){s=a._index;break}}for(n=r._index+1;n<=this.htmlArr.length-1;n++){a=this.htmlArr[n];if(a&&r.lv-1==a.lv&&"/"==a.label.substr(0,1)){l=a._index;break}}-1!=s&&(e.push({x:s,y:l}),e=e.concat(this.parents([{x:s,y:l}])))}return this.delDomListDuplicate(e)},this.children=function(t){t=this.handleDomList(t);for(var e,i=[],r=0,s=0;s<t.length;s++){var l=t[s].x,n=t[s].y;if(l!=n)for(var a=this.htmlArr[l],h=l+1;h<n;h++){var o=this.htmlArr[h];o&&a&&o.lv-a.lv==1&&(2!=o.tagpair||-1!=o.label.indexOf("/")?i.push({index:r++,x:e,y:o._index}):e=o._index)}}return i},this.closest=function(t,e){t=this.handleDomList(t);for(var i=[],r=0,s=0;s<t.length;s++){var l=t[s].x,n=(t[s].y,this.htmlArr[l]);if("string"==typeof e)for(var a=this.getDocument(e),h=a.length-1;0<=h;h--){var o=a[h].x,u=a[h].y;if(o!=u){var f=this.htmlArr[o];if(o<l&&f.lv-n.lv==-1){i.push({index:r++,x:o,y:u});break}}}}return i},this.filter=function(t,e){t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r].x,l=t[r].y;this.htmlArr[s];"string"==typeof e&&(s=this.getDocument(e,s,l),i=i.concat(s))}return this.delDomListDuplicate(i)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])},this.slice=function(t,e,i){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];if(null==e&&null==i)return t;if(isNaN(e)?e=0:(e=parseInt(e))<0&&(e=t.length- -1*e),null==i?i=t.length:isNaN(i)?i=-1:(i=parseInt(i))<0&&(i=t.length- -1*i),e+""=="NaN"||i+""=="NaN")return t;for(var r=[],s=0;s<t.length;s++)e<=s&&s<i&&r.push(t[s]);return r},this.show=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.x!=i.y&&this.css(i,"display","")}return this},this.hide=function(t){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var e=0;e<t.length;e++){var i=t[e];i.x!=i.y&&this.css(i,"display","none")}return[]},this.dom=function(t,e,i,r){1!=(i=null==i?-1:i)&&2!=i&&(i=-1),""!=e&&(e="|"+e+"|");var s=(r=null==r?"":r).split(" ");if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var l="",n=0;n<t.length&&!(0<n);n++){var a=t[n].x,h=t[n].y;if(a!=h)for(var o=a;o<=h;o++){var u=this.htmlArr[o];if(u){var f="";if(-1!=e.indexOf("label"))for(var c=0;c<=s.length-1;c++){var m,d=s[c];""==d||null!=(m=this.attr(u,d))&&(f+=" "+d+'="'+m+'"')}i!=u.tagpair&&-1!=i||(o==a||o==h?-1!=e.indexOf("all")&&(-1!=e.indexOf("label")?""!=u.label&&(l+="<"+u.label+f+">"):l+=u.html):o<h&&(-1!=e.indexOf("label")?""!=u.label&&(l+="<"+u.label+f+">"):l+=u.html))}}}return l},this.getlv=function(t){if(t=this.handleDomList(t),"array"==this.toType(t)&&1<=t.length){t=this.htmlArr[t[0].x];if(t)return t.lv}},this.getLabel=function(t){if(t=this.handleDomList(t),"array"==this.toType(t)&&1<=t.length){t=this.htmlArr[t[0].x];if(t)return t.label}},this.printHTML=function(t){for(var e="",i=0,r=-1!=(t=","+(t=null==t?"":t).replace(/\|/g,",").replace(/\s/g,"")+",").indexOf(",color,")?"<br>":"\n",s=-1!=t.indexOf(",color,")?"&nbsp;&nbsp;&nbsp;&nbsp;":"    ",l=0;l<=this.htmlArr.length-1;l++){var n,a,h,o,u=this.htmlArr[l];u&&(-1!=t.indexOf(",format,")?(n=u.upHtml.trim(),a=u.downHtml.trim(),h=u.html.trim(),-1!=t.indexOf(",color,")&&(n=this.htmlColor(n),a=this.htmlColor(a),h=this.htmlColor(h)),"html"==u.label?i=-1:"head"!=u.label&&"body"!=u.label||(n+=r),""!=h&&(o=!0,2==u.tagpair?"/"==u.label.substr(0,1)&&(o=this.upCheckThisLabel(u)):-1!=this.singleLabelList.indexOf("|"+u.label+"|")&&(o=!1),o&&(h=r+this.common.copyStr(s,u.lv-1+i)+h)),e+=n+h+a):-1!=t.indexOf(",zip,")?e+=u.upHtml.trim()+u.html.trim()+u.downHtml.trim():-1!=t.indexOf(",color,")?e+=this.htmlColor(u.upHtml)+this.htmlColor(u.html)+this.htmlColor(u.downHtml):e+=u.upHtml+u.html+u.downHtml)}return-1!=t.indexOf(",format,")&&(e=e.trim()),e=-1!=t.indexOf(",color,")?"<div style='font-family: Menlo, Monaco, Consolas, \"Courier New\", monospace;padding: 0.2em;margin: 0;font-size: 14px;'>"+e+"</div>":e},this.upCheckThisLabel=function(t){if("/head"==t.label||"/body"==t.label)return!0;for(var e=t._index-1;0<=e;e--){var i=this.htmlArr[e];if(i){if(i.lv==t.lv)return!1;if(2==i.tagpair||"img"==i.label)return!0;if(-1!=(i.upHtml+i.downHtml).indexOf("\n"))return!0}}return!1},this.getDelHtml=function(){for(var t="",e=0;e<=this.htmlArr.length-1;e++){var i=this.htmlArr[e];i&&("/"!=i.label.substr(0,1)&&(t+=i.upHtml.trim()),t+=i.downHtml.trim())}return t},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.htmlArr)},this.info=function(){console.log("%c xiyueta%c v"+_xyt.version+" website: www.xiyueta.com ","font-size:22px;color:#00bbee","color:#000")}},_xyt=new _XIYUETA,xiyueta=(_xyt.info(),function(t,e,i){return new xiyueta.fn.init(t,e,i)}),init=(xiyueta.fn=xiyueta.prototype={length:0,selector:"",domList:void 0,x:null,y:null,domListIndex:0},xiyueta.extend=xiyueta.fn.extend=function(){var t,e,i,r=arguments[0]||{},s=1,l=arguments.length;for(s===l&&(r=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&void 0!==i&&(r[e]=i);return r},xiyueta.fn.init=function(t,e,i){this.length=0,this.selector=t,this.domList=[],this.x=e,this.y=i,this.domListArray=[],0<_xyt.htmlArr.length&&("string"==typeof t?(this.domList=_xyt.getDocument(t,e,i),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector="")),null==this.selector&&(this.selector="")}),_XIYUETACSS=(init.prototype=xiyueta.fn,($=$xyt=xiyueta).fn.extend({parse:function(t,e){return _xyt.parseHTML(t),1==(e=null!=e||0==_xyt.lv&&1!=_xyt.isHtmlErr?e:!0)&&0<(t=this.repair(!1)).err&&""!=t.errList&&1==t.state&&(_xyt.parseHTML(this.print()),this.repairHTML=!0),0<_xyt.htmlArr.length&&"string"==typeof this.selector&&(this.domList=_xyt.getDocument(this.selector,this.x,this.y),this.length=this.domList.length),this},find:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.find(this.domList,t),this.length=this.domList.length,this.selector="",this},add:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.add(this.domList,t),this.length=this.domList.length,this.selector="",this},not:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.not(this.domList,t),this.length=this.domList.length,this.selector="",this},is:function(t){return _xyt.is(this.domList,t)},text:function(t){return 1<=arguments.length?(_xyt.text(this.domList,t),this):_xyt.text(this.domList)},html:function(t){return 1<=arguments.length?(_xyt.html(this.domList,t),this):_xyt.html(this.domList)},attr:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.attr(this.domList,t,e),this):""!=t.trim()?_xyt.attr(this.domList,t):void 0},prop:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.prop(this.domList,t,e),this):""!=t.trim()?_xyt.prop(this.domList,t):void 0},data:function(t,e){if(null!=t)return 2<=arguments.length?(_xyt.data(this.domList,t,e),this):_xyt.data(this.domList,t)},removeAttr:function(t){return _xyt.removeAttr(this.domList,t),this},val:function(t){return null==t?_xyt.val(this.domList):(_xyt.val(this.domList,t),this)},remove:function(t){t=_xyt.remove(this.domList,t);return t!=this.domList&&(this.domList=t,this.length=this.domList.length),this},each:function(t){return _xyt.each(this.domList,t),this},css:function(t,e){return null==e&&"object"!=typeof t?_xyt.css(this.domList,t):(_xyt.css(this.domList,t,e),this)},print:function(t){return _xyt.printHTML(t)},debug:function(t){return _xyt.debug(t),this}}),xiyueta.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==0&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==1&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this},addClass:function(t){return _xyt.addClass(this.domList,t),this},hasClass:function(t){return _xyt.hasClass(this.domList,t)},removeClass:function(t){return _xyt.removeClass(this.domList,t),this},wrap:function(t,e){if("function"==typeof t){for(var i=_xyt.each(this.domList,t),r=0;r<=i.length-1;r++)(u=i[r])&&this.wrap(u.value,u.domList);return this}var s=new _XIYUETA,l=0,n=(s.parseHTML(t),s.repairHTML(!1),s.printHTML());t!=n&&s.parseHTML(n);for(r=0;r<=s.htmlArr.length-1;r++)(u=s.htmlArr[r]).lv>l&&2==u.tagpair&&(l=u.lv);for(var a="",h="",o=!1,r=0;r<=s.htmlArr.length-1;r++){var u,f=(u=s.htmlArr[r]).upHtml;"/"==u.label.substr(0,1)&&u.lv==l&&(o=!0,a+=f,f=""),0==o?a+=f+u.html:h+=f+u.html}return null==e&&(e=this.domList),_xyt.wrap(e,a,h),this},unwrap:function(){return _xyt.unwrap(this.domList),this},append:function(t){return _xyt.append(this.domList,t),this},prepend:function(t){return _xyt.prepend(this.domList,t),this},after:function(t){return _xyt.after(this.domList,t),this},before:function(t){return _xyt.before(this.domList,t),this},show:function(){return _xyt.show(this.domList),this},hide:function(){return _xyt.hide(this.domList),this},next:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.next(this.domList),this.length=this.domList.length,this},nextAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.nextAll(this.domList),this.length=this.domList.length,this},prev:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prev(this.domList),this.length=this.domList.length,this},prevAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList),this.length=this.domList.length,this},siblings:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList,"asc").concat(_xyt.nextAll(this.domList)),this.length=this.domList.length,this},parent:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parent(this.domList),this.length=this.domList.length,this},parents:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parents(this.domList),this.length=this.domList.length,this},children:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.children(this.domList),this.length=this.domList.length,this},closest:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.closest(this.domList,t),this.length=this.domList.length,this},filter:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.filter(this.domList,t),this.length=this.domList.length,this},replaceWith:function(t){var e;return"object"==typeof(t=null==t?"":t)&&null!=t.domList&&(e=t.domList,t=_xyt.htmlwrap(t.domList,""),_xyt.remove(e)),this.htmlwrap(t),this},index:function(){return("array"==_xyt.toType(this.domList)?this.domList[0]:this.domList).index},get:function(t){var e;return 1<=arguments.length?(e=[],"array"==_xyt.toType(this.domList)?e=this.domList:e.push(this.domList),e[t=t<0?e.length+t:t]):0!=this.domList.length?this.domList:void 0},toArray:function(){return this.domList},empty:function(){return this.html("")},htmlwrap:function(t){return 1<=arguments.length?(_xyt.htmlwrap(this.domList,t),this):_xyt.htmlwrap(this.domList)},dom:function(t){return _xyt.dom(this.domList,"",t)},domwrap:function(t){return _xyt.dom(this.domList,"all",t)},domlabel:function(t,e){return _xyt.dom(this.domList,"label|",t,e)},domlabelwrap:function(t,e){return _xyt.dom(this.domList,"all|label",t,e)},getlabel:function(){return _xyt.getLabel(this.domList)},getlv:function(){return _xyt.getlv(this.domList)},findlv:function(t){return this.find(":lv("+t+")"),this}}),function(t){"use strict";this.cssSource=t=null==t?"":t,this.cssArr=[],this.common=new XiyuetaCommon,this.lv=0,this.config={parentdir:"../",imagesdir:"images/"};for(var e={},i="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),r=0;r<i.length;r++){var s=i[r];e["[object "+s+"]"]=s.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.cssParse=function(t){null!=t&&(this.cssSource=t,this.cssArr=[]);for(var e,i="",r="",s="",l="",n=!1,a=!1,h=!1,o=!1,u=!1,f=0,c=-1,m=0;m<=this.cssSource.length-1;m++)e=i,i=this.cssSource.substr(m,1),n?(s+=i,h?"/"==i&&"*"==e&&(n=h=!1,this.cssArr.push({_index:++c,lv:1,label:"/*",upHtml:l,downHtml:"",html:s}),l=s=""):a&&"*"==i&&"/"==e?h=!0:o?!u||";"!=i&&"\n"!=i?" "==i&&a?"@charset "==s.toLowerCase()||"@import "==s.toLowerCase()?a=!(u=!0):"@font-face "==s.toLowerCase()&&(o=!1):"{"==i&&("@font-face{"==s.toLowerCase()?o=!1:(o=n=a=!1,this.cssArr.push({_index:++c,lv:1,label:this.handleClsCssLabel(r),upHtml:l,downHtml:"",html:s}),f++,l=s="")):(o=n=a=u=!1,this.cssArr.push({_index:++c,lv:1,label:this.handleClsCssLabel(r),upHtml:l,downHtml:"",html:s}),l=s=""):"{"==i&&a?a=!1:"}"==i&&(n=a=!1,this.cssArr.push({_index:++c,lv:f+1,label:this.handleClsCssLabel(r),upHtml:l,downHtml:"",html:s}),l=s=""),a&&(r+=i)):" "!=i&&";"!=i&&"\n"!=i&&"\t"!=i?"}"==i&&1==f?(this.cssArr.push({_index:++c,lv:f,label:"}",upHtml:l,downHtml:"",html:"}"}),l=s="",f--):(l=s,a=n=!0,"@"==(r=s=i)&&(o=!0)):s+=i;""!=s&&this.cssArr.push({_index:++c,lv:f,label:"",upHtml:"",downHtml:"",html:s}),this.lv=f},this.handleClsCssLabel=function(t){for(var e=0;e<9&&-1!=(t=t.replace(/  /g," ")).indexOf("  ");e++);return(t=t.replace(/\n/g,"")).toLowerCase().trim()},this.handleLabelParam=function(t,e,i){if(null==e&&(e="(all)"),null==i&&null!=t[e])return t[e];var r,s="";-1!=e.indexOf("|")&&(e=(r=e.split("|"))[0],s=r[1],""==e&&(e="(all)"));for(var l=!1,n="",a="",h=!1,o="",u=!1,f=!0,c=0,m=0,d=!1,p="",g=t.html.indexOf("{")+1;g<=t.html.length-1;g++){var b=t.html.substr(g,1);if(h)if(u){if(0!=(d=1==d&&")"==b?!1:d)||b!=o&&"}"!=b&&g!=t.html.length-1)a+=b,"("==b&&(d=!0);else if(t[n=n.toLowerCase().trim()]=a,u=h=!1,o="",e==n||"(all)"==e)if(null==i){if("url"!=s)return a;""!=(a=this.cssSrcUrl(a))&&(""!=p&&(p+="\n"),p+=a)}else{if(""==i)return v=t.html.substr(0,m),L=-1<(L=t.html.substr(g).indexOf(";"))?t.html.substr(g+L+1):t.html.substr(g),t.html=v+L,t;var x=c,y=c+a.length,v=(f&&(x++,y++),t.html.substr(0,x)),L=t.html.substr(y);if("url"!=s)return t.html=v+i+L,t[n]=i,t;x=this.cssSrcUrl(a,i);if(""!=x)return""!=p&&(p+="\n"),p+=x,t.html=v+x+L,g=(v+(t[n]=x)).length,t}}else" "!=b&&(o=";",c=g,f=!(u=!0),a=b);else l?":"==b?(h=!(l=!1),o=a=""):" "!=b&&(n+=b):" "!=b&&(l=!0,n=b,m=g)}if(null!=i&&""!=i&&""==s){for(var A=e+": "+i+";",w=t.html.length-1;0<=w;w--)if(" "!=(b=t.html.substr(w,1))&&"}"!=b){if(";"==b)break;if("{"==b)break;A="; "+A;break}t.html=t.html.replace("}",A+"}")}return p=""==p?void 0:p},this.getDocument=function(t,e,i){null==e&&(e=0),null==i&&(i=this.cssArr.length-1);var r=-1.1,s=-1.1,l=-1.1,n=-1.1,a="",h="",o="",u="",f="";if(t=(t=null==t?"":t).trim(),0==this.cssArr.length)return console.log("%c 需要先解析一段css文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var c=!1,m="",d=0;d<=t.length;d++){var p=t.substr(d,1);0!=c||"'"!=p&&'"'!=p&&"("!=p&&")"!=p?1==c?" "==p?p="-Space-":"'"!=p&&'"'!=p&&"("!=p&&")"!=p||(c=!1,"'"!=p&&'"'!=p||(p="")):" "==p&&(p=""):(c=!0,"'"!=p&&'"'!=p||(p="")),m+=p}t=m}var g,b,x,y,v=t.indexOf(":");-1!=v&&(x=y="",b=(p=t.substr(v+1)).indexOf("("),g=p.indexOf(")"),-1!=b&&-1!=g?(y=p.substr(0,b).toLowerCase(),g=(x=p.substr(b+1)).indexOf(")"),x=x.substr(0,g).replace(/-Space-/g," ").trim()):y=p.toLowerCase(),"first"==y?r=0:"last"==y?r=-1:"even"==y?s=1:"odd"==y?s=0:"eq"==y?(r=0,(r=""!=x?parseInt(x):r)+""=="NaN"&&(r=-.1,t="")):"gt"==y?""!=x&&(l=parseInt(x)):"lt"==y?""!=x&&(n=parseInt(x)):"contains"==y?a=x:console.log(t,"没有动作 "+y),""==(t=t.substr(0,v))&&-.1!=r&&(t="(all)")),-1!=(v=t.indexOf("["))&&(g=(p=t.substr(v+1)).indexOf("]"),-1==(p=p.substr(0,g)).indexOf("=")?(h=p,o="*"):(h=(b=p.split("="))[0],o=b[1].replace(/-Space-/g," "),x=h.substr(h.length-1),-1!="!^$*~|".indexOf(x)&&(h=h.substr(0,h.length-1),u=x)),-1!=h.indexOf("|")&&(h=(y=h.split("|"))[0],"NOUL"==y[1]&&(o=o.toLowerCase(),f=y[1])),""==(t=t.substr(0,v))&&(t="(all)"));for(d=0;d<10&&-1!=t.indexOf("  ");d++)t=t.replace(/  /g," ");for(m="",d=e;d<=i;d++){var L=this.cssArr[d];null!=L&&(t==L.label||"(all)"==t&&""!=L.label)&&(m+=","+d)}if(""!=m&&-1.1!=r){var A=m.split(",");""!=(m=r<0?A[A.length+r]:A[r+1])&&(m=","+m)}else if(""!=m&&-1.1!=s){A=m.split(",");m="";for(d=1;d<=A.length-1;d++)d%2==s&&(m+=","+A[d])}else if(""!=m&&-1.1!=l){A=m.split(",");m="";for(d=l+2;d<=A.length-1;d++)m+=","+A[d]}else if(""!=m&&-1.1!=n){A=m.split(",");m="",n>A.length-1&&(n=A.length-1);for(d=1;d<=n;d++)m+=","+A[d]}else if(""!=m&&""!=a){A=m.split(",");m="";for(d=1;d<=A.length-1;d++){p=A[d];-1!=this.text(","+p).indexOf(a)&&(m+=","+A[d])}}else if(""!=h){A=m.split(",");m="";for(d=1;d<=A.length-1;d++){var w=A[d],_=!0,p=this.css(domList=","+w);"NOUL"==f&&null!=p&&(p=p.toLowerCase()),"^"==u?null!=p&&p.substr(0,o.length)==o||(_=!1):"|"==u?null!=p&&(p+"-").substr(0,o.length+1)==o+"-"||(_=!1):"$"==u?null!=p&&p.substr(-1*o.length)==o||(_=!1):"~"==u?null!=p&&-1!=(" "+p+" ").indexOf(" "+o+" ")||(_=!1):"*"==u?null!=p&&-1!=p.indexOf(o)||(_=!1):"!"==u?p==o&&(_=!1):null!=p&&"*"==o?_=!0:p!=o&&(_=!1),_&&(m+=","+w)}}for(var O=m.split(","),C=[],d=0;d<O.length;d++)""!=O[d]&&C.push({index:O[d],x:O[d],y:O[d]});return C},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:null!=t._index?[{index:t._index,x:t._index,y:t._index}]:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r],l=e.call(s,r,s);if(s.value=l,i.push(s),"boolean"==typeof l&&0==l)break}return i},this.text=function(t,e){var i="get",t=this.handleHtmlText(t,e,"text",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.html=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"html",i)},this.htmlwrap=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"htmlwrap",i)},this.getBackground=function(t,e){var i="get",t=this.handleHtmlText(t,e,"background",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.handleHtmlText=function(t,e,i,r){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var l=this.each(t,e),n=0;n<l.length;n++)l[n]&&this.handleHtmlText(l[n],l[n].value,i,r);return!1}if("set"==r){if("undefined"==s)return;null==e?e="":e+=""}for(var a="",n=0;n<t.length;n++){var h=this.cssArr[t[n].index];if(null!=h)if("htmlwrap"==i){if("get"==r)return h.html;h.html=e}else if("background"==i){var o,u=this.css(h,"background");"get"==r?null!=u&&(o=this.cssSrcUrl(u),a+=this.handleClearBackground(o)):null!=u&&(o=u,"server="==e.substr(0,7)?(o=this.handleClearBackground(o),e=this.common.fullHttpUrl(e.substr(7),o)):"dir="==e.substr(0,4)&&(o=this.handleClearBackground(o),e=e.substr(4)+this.common.getUrlFileName(o)),e=this.cssSrcUrl(u,e),this.css(h,"background",e))}else if("@charset"==h.label)if("get"==r){if(a+=h.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim(),"html"==i)return a}else h.html='@charset "'+e+'";';else if("@import"==h.label)if("get"==r){u=(u=h.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim();if(a+=u=this.handleClearBackground(u),"html"==i)return a}else h.html='@import url("'+e+'");';else{var f=h.html.indexOf("{"),c=h.html.indexOf("}");if("get"==r){if(-1!=f&&-1!=c&&(a+=h.html.substr(f+1,c-f-1)),"html"==i)return a}else h.html=h.html.substr(0,f+1)+e+"}"}}return a}},this.css=function(t,e,i){if(null!=t){t=this.handleDomList(t);var r=this.toType(i);if("function"==r){for(var s=this.each(t,i),l=0;l<s.length;l++)s[l]&&this.css(s[l],e,s[l].value);return!1}var n=3<=arguments.length?"set":"get";if("set"==n){if("undefined"==r)return;null==i?i="":i+=""}for(l=0;l<t.length;l++){var a=this.cssArr[t[l].index];if(null!=a){if("get"==n)return this.handleLabelParam(a,e);this.handleLabelParam(a,e,i)}}}},this.remove=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){var i=this.cssArr[t[e].index];null!=i&&(i.html="",i.label="<del>")}return this}},this.getsrc=function(t,e){if(null!=t){t=this.handleDomList(t);for(var i="",r=0;r<t.length;r++){var s=this.cssArr[t[r].index];if(null!=s){var s=this.text(s),l=this.cssSrcUrl(s),l=this.handleClearBackground(l);if(null!=e)for(var n=l.split(","),a=0;a<=n.length-1;a++)""!=(l=n[a])&&("server="==e.substr(0,7).toLowerCase()?l=this.common.fullHttpUrl(e.substr(7),l):"dir="==e.substr(0,4).toLowerCase()?l=e.substr(4)+this.common.getUrlFileName(l):"filename"==e.substr(0,8).toLowerCase()&&(l=this.common.getUrlFileName(l)),""!=i&&(i+=","),i+=l);else""!=l&&(""!=i&&(i+=","),i+=l)}}return i}},this.setsrc=function(t,e,i){if(null!=t){t=this.handleDomList(t);var r=this.toType(e);if("function"==r){for(var s=this.each(t,e),l=0;l<s.length;l++)s[l]&&this.setsrc(s[l],s[l].value);return!1}if("undefined"!=r){null==e?e="":e+="";for(l=0;l<t.length;l++){var n=this.cssArr[t[l].index];if(null!=n){for(var a="",h=this.text(n),o=h.split(";"),u=0;u<=o.length-1;u++){var f=o[u];""!=a&&(a+=";"),a+=this.cssSrcUrl(f,e)}h!=a&&this.text(n,a)}}return this}}},this.handleClearBackground=function(t){var e=t.indexOf("(");if(-1==(t=-1!=(e=(t=-1!=e?t.substr(e+1):t).indexOf(")"))?t.substr(0,e):t).indexOf("'")&&-1==t.indexOf('"')&&-1==t.indexOf("("))return t;for(var i=!1,r="",s=0;s<=t.length;s++){var l=t.substr(s,1);0!=i||"'"!=l&&'"'!=l&&"("!=l&&")"!=l?1==i?"'"!=l&&'"'!=l&&"("!=l&&")"!=l||(i=!1,"'"!=l&&'"'!=l||(l="")):" "==l&&(l=""):(i=!0,"'"!=l&&'"'!=l||(l="")),r+=l}return r.trim()},this.cssSrcUrl=function(t,e){if(-1==t.indexOf(","))return this.handleCssSrcUrl(t,e);for(var i=t.split(","),r="",s=0;s<i.length;s++){var l=i[s];""!=(l=this.handleCssSrcUrl(l,e))&&(""!=r&&(r+=","),r+=l)}return r},this.handleCssSrcUrl=function(t,e){if(null==t)return"";if(null==e){if(-1==t.indexOf("(")||-1==t.indexOf(")"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:"";if(-1==t.toLowerCase().indexOf("url"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:""}for(var i="",r=!1,s=!1,l="",n=-1,a=0;a<=t.length-1;a++){var h=t.substr(a,1);if(r)if(s){if(l==h){var o=t.substr(n,a-n);if(null!=e)if("server="==e.substr(0,7)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+this.common.fullHttpUrl(e.substr(7),o)+t.substr(a)}else if("dir="==e.substr(0,4)){if(-1!=o.indexOf("data:"))return t;o=t.substr(0,n)+e.substr(4)+xiyueta.getUrlToFileName(o)+t.substr(a)}else-1==o.indexOf("data:")&&(o=t.substr(0,n)+e+t.substr(a));return o}}else""!=h&&('"'==h||"'"==h?(s=!0,l=h,-1==n&&(n=a+1)):" "!=h&&(s=!0,l=")",-1==n&&(n=a)));else if("("==h){o=i.trim().toLowerCase();if("url"==o.substr(o.length-3,3))r=!0;else if(null==e)return""}else i+=h}return t},this.after=function(t,e){if(null!=t){t=this.handleDomList(t);var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.after(r[s],r[s].value);return!1}if("undefined"!=i){null==e?e="":e+="";for(s=0;s<t.length;s++){var l=this.cssArr[t[s].index];null!=l&&null!=e&&(l.downHtml+=e)}return this}}},this.before=function(t,e){if(null!=t){t=this.handleDomList(t);var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.before(r[s],r[s].value);return!1}if("undefined"!=i){null==e?e="":e+="";for(s=0;s<t.length;s++){var l=this.cssArr[t[s].index];null!=l&&null!=e&&(l.upHtml+=e)}return this}}},this.handleCssCharset=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var i=this.cssArr[e];if(null!=i)if("@charset"==i.label)return null!=t?(i.html='@charset "'+t+'";',""):i.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase()}return""},this.handleCssImport=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var i=this.cssArr[e];if(null!=i&&"@import"==i.label){if(null!=t)return i.html='@import url("'+t+'");',"";i=(i=i.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase();return i=this.handleClearBackground(i)}}return""},this.setConfig=function(t){if(null==t)return this.config;if(null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir,null!=t.cssdir)){for(var e=t.cssdir.split("/"),i="",r=0;r<=e.length-2;r++)i+="../";this.config.parentdir=i}null!=t.parentdir&&(this.config.parentdir=t.parentdir)},this.printCss=function(t){for(var e="",i=0;i<=this.cssArr.length-1;i++){var r,s=this.cssArr[i];null!=s&&(r=s.upHtml+s.html+s.downHtml,"zip"==t?r="/*"==s.label?"":r.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(r=r.trim()+"\n"),""!=r&&(e+=r))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.cssArr)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])}}),_xytcss=new _XIYUETACSS,xiyuetaCss=function(t,e,i){return new xiyuetaCss.fn.init(t,e,i)};xiyuetaCss.fn=xiyuetaCss.prototype={length:0,selector:"",docList:void 0,x:null,y:null},xiyuetaCss.extend=xiyuetaCss.fn.extend=function(){var t,e,i,r=arguments[0]||{},s=1,l=arguments.length;for(s===l&&(r=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&void 0!==i&&(r[e]=i);return r};(init=xiyuetaCss.fn.init=function(t,e,i){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=i,this.domListArray=[],0<_xytcss.cssArr.length&&("string"==typeof t?(this.domList=_xytcss.getDocument(t,e,i),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector="")),null==this.selector&&(this.selector="")}).prototype=xiyuetaCss.fn,(xiyuetaCSS=$xytcss=$css=xiyuetaCss).fn.extend({parse:function(t){return _xytcss.cssParse(t),0<_xytcss.cssArr.length&&"string"==typeof this.selector&&(this.domList=_xytcss.getDocument(this.selector,this.x,this.y),this.length=this.domList.length),this},each:function(t){return _xytcss.each(this.domList,t),this},text:function(t){return 1<=arguments.length?(_xytcss.text(this.domList,t),this):_xytcss.text(this.domList)},html:function(t){return 1<=arguments.length?(_xytcss.html(this.domList,t),this):_xytcss.html(this.domList)},htmlwrap:function(t){return 1<=arguments.length?(_xytcss.htmlwrap(this.domList,t),this):_xytcss.htmlwrap(this.domList)},css:function(t,e){return 2<=arguments.length?(_xytcss.css(this.domList,t,e),this):_xytcss.css(this.domList,t)},background:function(t){return 1<=arguments.length?(_xytcss.getBackground(this.domList,t),this):_xytcss.getBackground(this.domList)},remove:function(){return _xytcss.remove(this.domList),this},getsrc:function(t){return _xytcss.getsrc(this.domList,t)},setsrc:function(t){return _xytcss.setsrc(this.domList,t),this},after:function(t){return _xytcss.after(this.domList,t),this},before:function(t){return _xytcss.before(this.domList,t),this},print:function(t){return _xytcss.printCss(t)},debug:function(t){return _xytcss.debug(t)}}),xiyuetaCSS.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==0&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==1&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this}}),xiyuetaCSS.debug=function(t){return xiyuetaCSS().debug(t)},xiyuetaCSS.load=function(t,e){return xiyuetaCSS().parse(t,e),this},xiyuetaCSS.html=function(t){return _xytcss.printCss(t)},xiyuetaCSS.charset=function(t){return _xytcss.handleCssCharset(t)},xiyuetaCSS.config=function(t){return _xytcss.setConfig(t)},xiyuetaCSS.lv=function(){return _xytcss.lv};var _XIYUETAASP=function(t){"use strict";this.aspSource=t=null==t?"":t,this.aspArr=[],this.common=new XiyuetaCommon,this.config={},this.phpPublicObjectList="",this.phpPublicFunList="",this.aspParse=function(t){null!=t&&(this.aspSource=t,this.aspArr=[]);for(var e="",i="",r="",s="",l="",n="",a="",h=!1,o=!1,u=0,f="",c=0,m=(this.aspSource=this.aspSource.replace(/\t/g,"  "),this.aspSource.split("\n")),d=0;d<=m.length-1;d++){for(var p,g,b,x=0;x<=m[d].length;x++)if(i=e,e=m[d].substr(x,1),r=m[d].substr(x+1,1),b=m[d].substr(x+1,2),0==h)"%"==e&&"<"==i?(h=!0,this.aspArr.push({lv:u,type:"<asp>",label:"<%",upHtml:a.substr(0,a.length-1),downHtml:"",html:"<%",tagpair:2}),s=a=n="",u++):a+=e;else if("%"==e&&">"==r)h=!1,u--,this.aspArr.push({lv:u,type:"<asp>",label:"%>",upHtml:a,downHtml:"",html:"%>",tagpair:2}),s=a=n="",x++,i=e,e=m[d].substr(x,1),r=m[d].substr(x+1,1);else if(n+=e,'"'==e||""!=f)'"'==e&&c++,c%2==0&&'"'!=r?(f+=e,this.aspArr.push({lv:u,type:"<str>",label:s,upHtml:a,downHtml:"",html:f,tagpair:2}),c=0,s=a=n=f=""):f+=e;else if("("==e)u++,this.aspArr.push({lv:u,type:"<(>",label:e,upHtml:a,downHtml:"",html:n,tagpair:2}),s=a=n="";else if(")"==e)this.aspArr.push({lv:u,type:"<)>",label:e,upHtml:a,downHtml:"",html:n,tagpair:2}),s=a=n="",u--;else if(-1!="|&|,|+|-|*|/|=|:|>|<|".indexOf("|"+e+"|"))this.aspArr.push({lv:u,type:"<fuhao>",label:e,upHtml:a,downHtml:"",html:n,tagpair:1}),"="!=e&&">"!=e||">"!=(g=this.aspArr[this.aspArr.length-2]).label&&"<"!=g.label||(g.label+=e,g.html+=" "+e,this.aspArr.pop()),s=a=n="";else{if("'"==e){this.aspArr.push({lv:u,type:"<note>",label:e,upHtml:n,downHtml:"",html:m[d].substr(x+1),tagpair:1}),s=a=n="";break}""==e||" "==e||"\t"==e||-1=="' ()+-*/=><&,:".indexOf(r)&&x!=m[d].length&&"%>"!=b?" "!=e&&"\t"!=e&&(s+=e.toLowerCase()):(s+=e.toLowerCase(),l=-1!="0123456789".indexOf(s.substr(0,1))?"<int>":"("==r||-1!=",not,strcomp,vbtextcompare,step,dim,if,then,elseif,else,end,function,sub,sele/ct,case,call,for,to,next,set,nothing,do,while,loop,and,true,false,vbcrlf,in,class,new,mod,byval,byref,or,exit,rnd,lcase,ucse,asc,".indexOf(","+s+",")||-1!=s.indexOf(".")?"<fun>":"<var>",this.aspArr.push({lv:u,type:l,label:s,upHtml:a,downHtml:"",html:n,tagpair:2}),"function"==s?"end"==(p=this.aspArr[this.aspArr.length-2]).label?(u--,p.lv--,p.label+="function",p.html+=" function",this.aspArr.pop()):"exit"==p.label?(p.label+="function",p.html+=" function",this.aspArr.pop()):u++:"sub"==s?"end"==(p=this.aspArr[this.aspArr.length-2]).label?(u--,p.lv--,p.label+="sub",p.html+=" sub",this.aspArr.pop()):"exit"==p.label?(p.label+="sub",p.html+=" sub",this.aspArr.pop()):u++:"if"==s?"end"==(p=this.aspArr[this.aspArr.length-2]).label?(u--,p.lv--,p.label+="if",p.html+=" if",this.aspArr.pop()):u++:"else"==s||"elseif"==s||"then"==s?(this.aspArr[this.aspArr.length-1].lv--,"else"==s&&"case"==(p=this.aspArr[this.aspArr.length-2]).label&&(p.lv,p.label+="else",p.html+=" else",this.aspArr.pop())):"select"==s?"end"==(p=this.aspArr[this.aspArr.length-2]).label?(u--,p.lv--,p.label+="select",p.html+=" select",this.aspArr.pop(),o&&(o=!1,u--,p.lv--)):u++:"case"==s?"select"==(g=this.aspArr[this.aspArr.length-2]).label?(g.label+="case",g.html+=" case",this.aspArr.pop()):o?this.aspArr[this.aspArr.length-1].lv--:(u++,o=!0):"class"==s?"end"==(p=this.aspArr[this.aspArr.length-2]).label?(u--,p.lv--,p.label+="class",p.html+=" class",this.aspArr.pop()):u++:"each"==s?"for"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="each",g.html+=" each",this.aspArr.pop()):"while"==s?("do"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="while",g.html+=" while",this.aspArr.pop()),u++):"do"==s?"exit"==(g=this.aspArr[this.aspArr.length-2]).label&&(g.label+="do",g.html+=" do",this.aspArr.pop()):"loop"==s?(u--,this.aspArr[this.aspArr.length-1].lv--):"for"==s?"exit"==(g=this.aspArr[this.aspArr.length-2]).label?(g.label+="for",g.html+=" for",this.aspArr.pop()):u++:"next"==s?(g=this.aspArr[this.aspArr.length-2],b=this.aspArr[this.aspArr.length-4],"resume"==g.label?(b.label+="errorresumenext",b.html+=" error resume next",this.aspArr.pop(),this.aspArr.pop(),this.aspArr.pop()):(u--,this.aspArr[this.aspArr.length-1].lv--)):"goto"==s&&(g=this.aspArr[this.aspArr.length-2],b=this.aspArr[this.aspArr.length-3],"error"==g.label&&(b.label+="errorgoto",b.html+=" error goto",this.aspArr.pop(),this.aspArr.pop())),l=s=a=n="")}d+1<m.length&&(this.aspArr.push({lv:u,type:"<br>",label:"\n",upHtml:a,downHtml:"",html:"\n",tagpair:1}),a="")}""!=a&&this.aspArr.push({lv:u,type:"<html>",label:"",upHtml:a,downHtml:"",html:"",tagpair:1})},this.tophp=function(){for(var t="",e="",i=[],r=[],s=[],l=0,n=!1,a=!1,h=!1,o="",u="",f="++",c="",m=!1,d=-1,p=-1,g=!1,b=-1,x="",y=",",v=","+this.phpPublicFunList,L=","+this.phpPublicObjectList,A=-1,w=[],_=!0,O="",C="",T=",",S=!1,H=0;H<=this.aspArr.length-1;H++){var D,_=!0;A==H&&(":"==(i=this.aspArr[H]).label?(e+=":",H++):e+=":",A=-1),0<H&&(r=this.aspArr[H-1]),i=this.aspArr[H],s={},H<this.aspArr.length-1&&(s=this.aspArr[H+1]),null!=w[i.lv]&&(e=w[i.lv]+"\n"+e,w[i.lv]=void 0),"<br>"==r.type&&(e+=this.common.copyStr("    ",i.lv+l)),1!=i.phpDel&&("<%"==i.label?(e+=i.upHtml+"<?",l--,"="!=s.label&&(e+="PHP","<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type&&(e+=" "))):"%>"==i.label?e+="?>":"<br>"==i.type?(a&&(e+="}",a=!1),e+=i.upHtml+"\n"):"<note>"==i.type?e+="//"+i.html:"<html>"==i.type?e+=i.upHtml+i.html:"<var>"==i.type?"onerrorresumenext"!=i.label&&("onerrorgoto"==i.label?e+="$"+i.label:(!h&&0!=S||""==O||(T+=i.label+","),-1!=v.indexOf(","+i.label+",")?"class"==r.label?(_=!1,e+=i.label+"{"):"new"==r.label?e+=i.label+"()":"="==s.label?(e+="return ",H++):(e+=i.label,"<(>"!=s.type&&(e+="()")):0==h&&-1==T.indexOf(","+i.label+",")&&S?e+="$GLOBALS['"+i.label+"']":(e+="$"+i.label,h&&(e+="=''")),e+=this.getAddFenHao(e,s,a))):"<fuhao>"==i.type||"<int>"==i.type||"<(>"==i.type||"<)>"==i.type?n&&"="==i.label?e+="==":"&"==i.label?e+=".":"("==i.label?d==i.lv?e+="[":e+="(":")"==i.label?(d==i.lv?(e+="]","("!=s.label&&(d=-1)):b==i.lv?(t+=e+","+x+")",b=-1,x=e=""):p==i.lv?(p=-1,e+="){",""!=O&&(S=!0,"function"==C&&(e+="\n"+this.common.copyStr("    ",i.lv+l-1)+"$"+O+"=''"))):e+=")",e+=this.getAddFenHao(e,s,a)):","==i.label?m?(e+="]=",m=!1):b==i.lv?(x=e,e=""):h?(e+=";","<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type||(h=!1)):e+=",":":"==i.label?(";"!=e.substr(e.length-1)&&(e+=";"),h=!1):"<>"==i.label?e+="!=":"<int>"==i.type?(e+=i.label,-1!=A||"selectcase"==c||"<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type||(e+=";")):e+=i.label:"<str>"==i.type?e=(e+="'"+i.html.substr(1,i.html.length-2).replace(/""/g,'"').replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'")+this.getAddFenHao(e,s,a):"<fun>"==i.type&&("response.write"==i.label?e+="echo":"response.end"==i.label?e+="die":"request.querystring"==i.label?e+="querystring":"request.form"==i.label?e+="form":"request.servervariables"==i.label?e+="servervariables":"err.number"==i.label?e+="0":"err.clear"==i.label?e+="echo('');":"nothing"==i.label?e+="null":"step"==i.label?(e+=";",f="+="+s.label,s.phpDel=!0):"byref"==i.label?e+="&":"isnumeric"==i.label?e+="is_numeric":"strcomp"==i.label?e+="aspStrComp":"vbtextcompare"==i.label?e+="''":"chr"==i.label?e+="aspchr":"hex"==i.label?e+="dechex":"and"==i.label?e+=" && ":"or"==i.label?e+=" || ":"mod"==i.label?e+=" % ":"not"==i.label?e+="!":"exitfor"==i.label?e+="break":"ubound"==i.label?e+="count":"split"==i.label?(y+=this.aspArr[H-2].label+".add,",t+=e+="explode(",e="",b=i.lv+1,H++):"new"==i.label?e+="new ":"function"==i.label||"sub"==i.label?(p=this.aspArr[H+2].lv,e+="function ",-1==v.indexOf(","+s.label+",")&&(v+=s.label+","),O=s.label,C=i.label):"endfunction"==i.label||"endsub"==i.label?("endsub"==i.label?e+=this.common.copyStr("    ",i.lv)+"return '';\n}":e+=this.common.copyStr("    ",i.lv)+"return @$"+O+";\n}",C=O="",S=!(T=",")):"exitfunction"==i.label?e+="return ''":"if"==i.label?(e+=i.label+"(",n=!0):"elseif"==i.label?(e+="}else if(",n=!0):"then"==i.label?(e+="){","<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type&&(a=!0),n=!1):"else"==i.label?e+="}else{":"endif"==i.label?(e+="}",a=!1):"selectcase"==i.label?(e+="switch ","("!=s.label&&(e+="("),c="selectcase"):"endselect"==i.label?(null!=w[i.lv+1]&&(e=w[i.lv+1]+"\n"+e,w[i.lv+1]=void 0),e+="}",0):"caseelse"==i.label?(e+="default ",w[i.lv]=this.common.copyStr("    ",i.lv)+"break;",A=H+1,_=!!0):"case"==i.label?(e+=i.label+" ",w[i.lv]=this.common.copyStr("    ",i.lv)+"break;",A=H+2):"vbcrlf"==i.label?e+='"\\n"':"createobject"==i.label?(0<H-1&&(y+=this.aspArr[H-2].label+".add,"),H+1<this.aspArr.length&&'"scripting.dictionary"'==this.aspArr[H+2].html.toLowerCase()&&(e+="array();",H+=3)):-1!=y.indexOf(","+i.label+",")?(-1!=i.label.indexOf(".")?e+="$"+i.label.substr(0,i.label.indexOf("."))+"[":(e+="$"+i.label,d=s.lv),","==this.aspArr[H+2].label&&(m=!0)):-1!=y.indexOf(","+i.label+".")?(e+="$"+i.label,d=s.lv):"do"==i.label?e+="for(;;) {":"exitdo"==i.label?e+="break":"dowhile"==i.label?(e+="while","("!=s.label&&(e+="("),g=!0):"loop"==i.label?e+="}":"class"==i.label?(e+="class ",-1==v.indexOf(","+s.label+",")&&(v+=s.label+","),-1==L.indexOf(","+s.label+",")&&(L+=s.label+",")):"endclass"==i.label?e+="}":"foreach"==i.label?(D=this.aspArr[H+1],e+="foreach($"+this.aspArr[H+3].label+" as $key=>$"+D.label+"){",H+=3):"for"==i.label?(e+=i.label,"("!=s.label&&(e+="("),o="for",u=s.label,f="++"):"for"==o&&"to"==i.label?(D=this.aspArr[H+1],"ubound"==s.label?e+=";$"+u+"<":e+=";$"+u+"<=",o="forto"):"next"==i.label?e+="}":"dim"==i.label?h=!0:-1!=i.label.indexOf(".")?e+="$"+i.label.replace(/\./g,"->"):-1==",call,set,byval,".indexOf(","+i.label+",")&&(-1!=v.indexOf(","+i.label+",")?(O==i.label&&"function"!=r.label&&"sub"!=r.label&&(e+="$"),"class"==r.label?e+=i.label+"{":"new"==r.label?e+=i.label+"()":(e+=i.label,"<(>"!=s.type&&O!=i.label&&(e+="()"))):e+=i.label),"<br>"!=s.type&&"<note>"!=s.type||!_||-1==",endfunction,then,endif,next,else,endselect,endclass,".indexOf(","+i.label+",")&&0==g&&(e+=";"))),"forto"!=o||"<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type||"to"==i.label?"selectcase"!=c||"<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type||"selectcase"==i.label?!g||"<br>"!=s.type&&"<note>"!=s.type&&"<asp>"!=s.type||(")"!=r.label&&(e+=")"),e+="{",n=g=!1):(c="",")"!=r.label&&(e+=")"),e+="{"):(e+="$"+u+f,u=o="",")"!=r.label&&(e+=")"),e+="{"),"<br>"==i.type&&(h=!1,t+=e,e="")}return t+e},this.getAddFenHao=function(t,e,i){return("<br>"==e.type||"<note>"==e.type||"<asp>"==e.type)&&"{"!=t.substr(t.length-1,1)||i&&"else"==e.label?";":""},this.aspBeautify=function(t){for(var e=0;e<=this.aspArr.length-1;e++){var i=this.aspArr[e];if("class"==i.label)e<this.aspArr.length&&(r=this.aspArr[e+1],this.phpPublicObjectList+=r.label+",",this.phpPublicFunList+=r.label+",");else if("then"==i.label){var r={};if("<br>"!=(r=e<this.aspArr.length-1?this.aspArr[e+1]:r).type&&"<note>"!=r.type&&"<asp>"!=r.type)for(var s=e+1;s<=this.aspArr.length-1;s++)--this.aspArr[s].lv}else if("sub"==i.label||"function"==i.label)e<this.aspArr.length-1&&(r=this.aspArr[e+1],this.phpPublicFunList+=r.label+",");else if("do"==i.label){if("<br>"==(r=this.aspArr[e+1]).type)for(s=e+1;s<=this.aspArr.length-1;s++)(i=this.aspArr[s]).lv++}else"echo"==i.label?i.label=i.html="aspEcho":"die"==i.label?i.label=i.html="aspDie":"print"==i.label&&(i.label=i.html="aspPrint")}if(""!=this.phpPublicFunList)for(var l=","+this.phpPublicFunList+",",e=0;e<=this.aspArr.length-1;e++)"<var>"==(i=this.aspArr[e]).type&&-1!=l.indexOf(","+i.label+",")&&(i.type="<fun>")},this.printASP=function(t){for(var e="",i=0;i<=this.aspArr.length-1;i++){var r,s=this.aspArr[i];null!=s&&(r=s.upHtml+s.html+s.downHtml,"zip"==t?r="/*"==s.label?"":r.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(r=r.trim()+"\n"),""!=r&&(e+=r))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.aspArr)}},_xytasp=new _XIYUETAASP;function XiyuetaCommon(){this.copyStr=function(t,e){for(var i="",r=1;r<=e;r++)i+=t;return i},this.timeFormat=function(t,e){var i,r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return e},this.secondToDate=function(t){t=parseFloat(t)/1e3;return t=null!=t&&""!=t?60<t&&t<3600?parseInt(t/60)+" 分钟 "+parseInt(60*(parseFloat(t/60)-parseInt(t/60)))+" 秒 ":3600<=t&&t<86400?parseInt(t/3600)+" 小时 "+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+" 分钟 "+parseInt(60*(parseFloat(60*(parseFloat(t/3600)-parseInt(t/3600)))-parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))))+" 秒 ":parseInt(t)+" 秒 ":t},this.bystesLength=function(t){for(var e=0,i=0;i<t.length;i++)255<t.charCodeAt(i)?e+=2:e++;return e},this.getFileSize=function(t){return t<1048576?(t/1024).toFixed(2)+"KB":1048576==t?"1MB":1048576<t&&t<1073741824?(t/1048576).toFixed(2)+"MB":1048576<t&&1073741824==t?"1GB":1073741824<t&&t<1099511627776?(t/1073741824).toFixed(2)+"GB":"文件超过1TB"},this.renderSize=function(t){if(null==t||""==t)return"0 Bytes";var e=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),t=parseFloat(t),i=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,i)).toFixed(2)+e[i]},this.isArray=function(t){return"object"==typeof t&&t.constructor==Array}}(xiyuetaASP=$xytasp=$asp=function(t){return{parse:function(t){return _xytasp.aspParse(t),this},beautify:function(){return _xytasp.aspBeautify(t),this},tophp:function(t){return this.beautify(),((t=null==t?!1:t)?'<?PHP include_once "ASP.php" ?>\n':"")+_xytasp.tophp()},print:function(t){return _xytasp.printASP(t)},debug:function(t){return _xytasp.debug(t)}}}).load=function(t){return xiyuetaASP().parse(t),this},xiyuetaASP.html=function(t){return xiyuetaASP().tophp(t)},_XIYUETA.prototype.checkTagAttrExist=function(t,e){null==this.tagNameAttrArr&&(this.tagNameAttrArr=[{name:"|a|",value:"|id|class|name|style|href|title|type|shape|coords|target|",count:1},{name:"|map|",value:"|id|class|name|style|title|",count:1},{name:"|area|",value:"|id|class|style|href|title|alt|shape|coords|target|",count:1},{name:"|img|",value:"|id|class|name|style|src|title|alt|width|height|border|",count:1},{name:"|audio|",value:"|id|class|style|src|title|loop|",count:1},{name:"|base|",value:"|id|class|style|href|title|target|",count:1},{name:"|body|",value:"|id|class|style|title|background|",count:1},{name:"|basefont|",value:"|id|class|style|title|color|size|",count:1},{name:"|button|",value:"|id|class|name|style|title|type|",count:1},{name:"|video|",value:"|id|class|style|src|title|loop|width|height|",count:1},{name:"|input|",value:"|id|class|name|style|src|title|alt|type|width|height|",count:1},{name:"|select|",value:"|id|class|name|style|title|size|",count:1},{name:"|form|",value:"|id|class|name|style|title|action|method|target|",count:1},{name:"|table|table|",value:"|id|class|style|title|width|border|",count:2},{name:"|ol|ul|li|",value:"|id|class|style|title|type|",count:3},{name:"|td|canvas|th|td|",value:"|id|class|style|title|width|height|",count:4},{name:"|abbr|acronym|address|div|span|b|p|br|tr|article|h1|h2|h3|h4|h5|h6|h7|h8|h9|aside|head|title|bdi|bdo|big|blockquote|caption|center|cite|em|strong|dfn|code|samp|kbd|var|wbr|",value:"|id|class|style|title|",count:37}]);for(var i=0;i<this.tagNameAttrArr.length;i++){var r=this.tagNameAttrArr[i];if(-1<r.name.indexOf("|"+t+"|")&&-1<r.value.indexOf("|"+e+"|"))return!0}return-1<"|id|class|title|style|".indexOf("|"+e+"|")},_XIYUETA.prototype.swap=function(t,e){if(null==t||null==e)return!1;"object"==this.toType(t)&&(t=[t]);var i=[],i="object"==this.toType(i)?null!=i.domList?i.domList:[i]:this.getDocument(e);if(0==t.length||0==i.length||t==i)return!1;var e=t[0],t=i[0],i=this.htmlwrap(e),r=this.htmlwrap(t);return this.htmlwrap(e,r),this.htmlwrap(t,i),!0},_XIYUETA.prototype.getItem=function(t,e){if(null==t)return"";null==e&&(e=""),"object"==this.toType(t)&&(t=[t]);for(var i=[],r=0;r<t.length;r++){obj=t[r];var s=!0;""!=e?(obj.value=this.handleLabelParam(this.htmlArr[obj.x],e),null==obj.value&&(s=!1)):obj.value=this.htmlwrap(obj),s&&i.push(obj)}return i},_XIYUETA.prototype.setConfig=function(t){if(null==t)return this.config;null!=t.httpurl&&(this.config.httpurl=t.httpurl),null!=t.serverurl&&(this.config.serverurl=t.serverurl),null!=t.jsdir&&(this.config.jsdir=t.jsdir),null!=t.cssdir&&(this.config.cssdir=t.cssdir),null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir),null!=t.urlToNameList&&(this.config.urlToNameList=t.urlToNameList),null!=t.urlDefaultFileName&&(this.config.urlDefaultFileName=t.urlDefaultFileName)},_XIYUETA.prototype.charset=function(t){for(var e=0;e<=this.htmlArr.length-1;e++){var i=this.htmlArr[e];if(null!=i)if("meta"==i.label)if(-1!=i.html.toLowerCase().indexOf("charset=")){var r=this.handleLabelParam(i,"charset");if(null!=(r=null!=r?r.toLowerCase().trim():r))return null!=t&&this.handleLabelParam(i,"charset",t),r;if(-1!=(r=null!=(r=this.handleLabelParam(i,"content"))?r.toLowerCase().trim():r).indexOf("utf-8"))return null!=t?(this.handleLabelParam(i,"content","text/html; charset="+t),""):"utf-8";if(-1!=r.indexOf("gb2312"))return null!=t?(this.handleLabelParam(i,"content","text/html; charset="+t),""):"gb2312"}}},_XIYUETA.prototype.getHandleSrc=function(t,e,i,r){for(var s="",l=!0,n=0;n<=this.htmlArr.length-1;n++){var a,h,o,u=this.htmlArr[n];null!=u&&-1!=("|"+t+"|").indexOf("|"+u.label+"|")&&(null==(a=this.handleLabelParam(u,e))&&(a=""),"link"!=u.label||"dns-prefetch"!=(h=(h=null==(h=this.handleLabelParam(u,"rel"))?"":h).trim().toLowerCase())&&"alternate"!=h||(a=""),-1!=("|"+i+"|").indexOf("clean")?(l=!0,""!=a&&-1==a.indexOf("apps.bdimg.com/")&&(o=a=this.common.fullHttpUrl(r,a),-1!=("|"+i+"|").indexOf("web")&&""!=(a=this.common.getUrlFileName(a,u.label))&&("img"==u.label?a=this.config.imagesdir+a:"script"==u.label?a=this.config.jsdir+a:"link"==u.label?-1!=(h=(h=null==(h=this.handleLabelParam(u,"rel"))?"":h).trim().toLowerCase()).indexOf("shortcut icon")?a=this.config.imagesdir+a:-1!=h.indexOf("stylesheet")?a=this.config.cssdir+a:(a="",l=!1):(l=!1,a="")),l&&""!=a&&(-1!=("|"+i+"|").indexOf("down")?(""!=s&&(s+="[,]"),s+=o+"[|]"+a):(""!=s&&(s+="[,]"),s+=a)),this.handleLabelParam(u,e,a))):""!=a&&(""!=s&&(s+="[,]"),s+=a))}return s},_XIYUETA.prototype.replace=function(t,e,i,r){for(var s,l=this.getDocument(t),n=l.split(","),a=1;a<=n.length-1;a++)s=-1!=(l=n[a]).indexOf("|")?(s=l.split("|"),this.htmlArr[s[0]]):this.htmlArr[l],""!=e&&(l=this.handleLabelParam(s,e))==i&&this.handleLabelParam(s,e,r)},_XIYUETA.prototype.repairHTML=function(t,e){null==t&&(t=!1),null==e&&(e=0);var i=0,r=!1,s="",l=0,n=",";if(1<=this.htmlArr.length&&"no"==(a=this.htmlArr[0]).isFindDom)return!1;for(var a,h=0;h<=this.htmlArr.length-1;h++)(a=this.htmlArr[h])&&2==a.tagpair&&("/"==a.label.substr(0,1)?(f=a.label.substr(1),-1!=(","+n+",").indexOf(","+f+",")?n=n.replace(","+f+",",","):n+=a.label+","):n+=a.label+",");for(var o=n,h=0;h<this.htmlArr.length;h++)if((a=this.htmlArr[h])&&2==a.tagpair&&"/"==a.label.substr(0,1)){var u,f=a.label.substr(1),r=!0;if(null!=(u=this.upFindSameLvObj(h,a))&&(a.label=="/"+u.label?(r=!1,this.setNoFindDom(u._index,a._index),1==e&&console.log(" 找(Lv1) "+a.label+" "+u.label+"("+a._index+"-"+u._index+")")):0==this.lv||1==u.lv&&1==a.lv&&-1==n.indexOf(","+a.label+",")?1==r&&(s="",t&&(s="\x3c!--xiyueta提示: 原标签(LV) "+a.label+" 替换成 /"+u.label+"--\x3e"),a.html="</"+u.label+">"+s,i+=2,l+=2,r=!1,this.setNoFindDom(u._index,a._index),1!=e&&2!=e||console.log(" 找(Lv2) LV整体层级正确或两标签都为第一层  "+a.label+" 替换成 /"+u.label+" ("+a._index+"-"+u._index+")")):1==e&&console.log(" 找(Lv else) 没找到，交给下面找同名 "+a.label+" ("+a._index+")")),1==r)if(null==(u=this.upFindSameNameObj(h,a)))a.html=t?"\x3c!---xiyueta提示: 有多余结束标签 "+a.label+" --\x3e":"",l++,i++,this.setNoFindDom(a._index,a._index),this.reairHtmlLv(a,1),1!=e&&2!=e||console.log(" 找(Name 出错) 有多余结束标签 "+a.label+" ("+a._index+")"),r=!1,n=n.replace(","+a.label+",",",");else{s="",t&&(u.html+="\x3c!---xiyueta提示: 有问题标签开始位置--\x3e",a.html="\x3c!---xiyueta提示: 有问题标签结束位置--\x3e"+a.html),1!=e&&2!=e||console.log(" 找(Name2 有问题) "+a.label+" 与 "+u.label+"("+a._index+"-"+u._index+") 之间有问题 ");var c="",m=(this.setNoFindDom(u._index,a._index),u.lv-a.lv);this.reairHtmlLv(a,m);for(var d=u._index+1;d<=a._index;d++){var g=this.htmlArr[d];if(g&&"/"!=g.label.substr(0,1)&&2==g.tagpair){var b=!1;for(p=g._index+1;p<=a._index;p++){var x=this.htmlArr[p];if(x&&2==x.tagpair&&"/"==x.label.substr(0,1)&&x.lv==g.lv){b=!0;break}}0==b&&(c+="</"+g.label+">",t&&(c+="\x3c!--xiyueta提示: 追加 /"+g.label+" --\x3e"),1!=e&&2!=e||console.log(" 找(Name3)  追加结束标签 /"+g.label+" ("+g._index+")"),l++,i++,n=n.replace(","+g.label+",",","))}}a.upHtml+=c}}var y=n.split(",");if(y.length>i){c="";for(h=0;h<y.length;h++)""!=y[h]&&"/"!=y[h].substr(0,1)&&(s="",t&&(s="\x3c!--xiyueta提示: 追加 /"+y[h]+" --\x3e"),c="</"+y[h]+">"+s+c,l++,i++,1!=e&&2!=e||console.log(" 最后  追加结束标签 /"+y[h]));this.htmlArr[this.htmlArr.length-1]&&(this.htmlArr[this.htmlArr.length-1].downHtml+=c)}return{lv:this.lv,err:l,repair:i,state:l==i,errList:o=","==o?"":o}},_XIYUETA.prototype.setNoFindDom=function(t,e){for(var i=t;i<=e;i++){var r=this.htmlArr[i];r&&(r.isFindDom="no")}return null},_XIYUETA.prototype.upFindSameLvObj=function(t,e){for(var i=t-1;0<=i;i--){var r=this.htmlArr[i];if(r&&"no"!=r.isFindDom&&e.lv==r.lv)return r}return null},_XIYUETA.prototype.upFindSameNameObj=function(t,e){for(var i=t-1;0<=i;i--){var r=this.htmlArr[i];if(r&&"no"!=r.isFindDom&&e.label=="/"+r.label)return r}return null},_XIYUETA.prototype.reairHtmlLv=function(t,e){for(var i=t._index;i<=this.htmlArr.length-1;i++)(t=this.htmlArr[i])&&(t.lv+=e)},_XIYUETA.prototype.htmlColor=function(t){if("</"==t.substr(0,2))return"<font color='#800000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";if("<"!=t.substr(0,1))return"<font color='#000000'>"+t+"</font>";if("\x3c!--"==t.substr(0,4))return"<font color='#008000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";for(var e="",i="",r="",s=!1,l="",n="",a="",h=0;h<=t.length-1;h++){var o=t.substr(h,1);"findValueStart"==l?(s?o==r||">"==o?(n+=a+"<font color='#0000FF'>"+i+a+"</font>",s=!1,a=r=a="",l="findParamStart"):i+=o:'"'==o||"'"==o?(a+=o,r=o,s=!0):" "!=o?(r=" ",i=o,s=!0):a+="&nbsp;",">"==o&&(n+="<font color='#800000'>&gt;</font>")):"<"==o?(a="&lt;",l="findLabel"):"findLabel"==l?" "==o?(n+="<font color='#800000'>"+a+"</font> ",a="",l="findParamStart"):">"==o?n+="<font color='#800000'>"+a+"&gt;</font>":a+=o:">"==o?n+="<font color='#800000'>&gt;</font>":"findParamEnd"==l?"="==o?(l="findValueStart",n+="<font color='#FF0000'>"+e+"</font><font color='#000000'>=</font>",e=r=i=""):e+=o=" "==o?"&nbsp;":o:(l="findParamEnd",e+=o=" "==o?"&nbsp;":o)}return n},xiyueta.fullurl=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.resolve=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.getUrlDir=function(t,e){return _xyt.common.getUrlDir(t,e)},xiyueta.getUrlFileName=function(t,e){return _xyt.common.getUrlFileName(t,e)},xiyueta.setFileNameA=function(t,e){return _xyt.common.setFileNameA(t,e)},xiyueta.getUrlToFileName=function(t,e,i){return _xyt.common.getUrlToFileName(t,e,i)},xiyueta.getUrlParam=function(t,e){return _xyt.common.getUrlParam(t,e)},xiyueta.bystesLength=function(t){return _xyt.common.bystesLength(t)},xiyueta.renderSize=function(t){return _xyt.common.renderSize(t)},xiyueta.secondToDate=function(t){return _xyt.common.secondToDate(t)},xiyueta.timeFormat=function(t,e){var i=new Date,r="yyyy-MM-dd hh:mm:ss";return 1==arguments.length?"object"==typeof t?i=t:"string"==typeof t&&(r=t):2==arguments.length&&("object"==typeof t&&(i=t),"string"==typeof e&&(r=e)),_xyt.common.timeFormat(i,r)},xiyueta.getDomain=function(t){return _xyt.common.getDomain(t)},xiyueta.htmlColor=function(t){return _xyt.htmlColor(t)},xiyueta.lv=function(){return _xyt.lv},xiyueta.htmlerr=function(){return _xyt.isHtmlErr},xiyueta.config=function(t){t=_xyt.setConfig(t);return null==t?this:t},xiyueta.charset=function(t){return null==t?_xyt.charset():(_xyt.charset(t),this)},xiyueta.toType=function(t){return _xyt.toType(t)},xiyueta.delHtml=function(t){var e=new _XIYUETA;return e.parseHTML(t),e.getDelHtml()},xiyueta.debug=function(t){return xiyueta().debug(t)},xiyueta.load=function(t,e){return xiyueta().parse(t,e),this},xiyueta.html=function(t){return _xyt.printHTML(t)},xiyueta.log=function(t,e){if(null==e&&(e="<br>"),"object"==typeof t)for(var i in t){var r;-1==(t[i]+"").indexOf("function")&&(r=(r=t[i]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(r="object"==typeof t[i]?xiyueta.log(t[i]," , "):r)?document.write(i+e):document.write(i+":  "+r+e))}else t+="",document.write(t.replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")+e)},xiyueta.fn.extend({swap:function(t){return _xyt.swap(this.domList,t),this},item:function(t){return _xyt.getItem(this.domList,t)},handle:function(t,e,i){return _xyt.getHandleSrc(this.selector,t,e,i)},replace:function(t,e,i){return _xyt.replace(this.selector,t,e,i)},clear:function(){return this},repair:function(t,e){return _xyt.repairHTML(t,e)}}),_XIYUETA.prototype.scan=function(t){t="|"+(t=null==t?"":t)+"|";for(var e=0,i=[],r=!1,s="",l="",n=[],t=this.charset(),s=(s+="网页编码="+(t=null==t?"":t)+"\n")+("网页大小="+this.common.getFileSize(this.common.bystesLength(this.htmlSource))+"\n"),a=0;a<=this.htmlArr.length-1;a++)(f=this.htmlArr[a])&&"/"!=f.label.substr(0,1)&&""!=f.label&&(-1==("|"+l+"|").indexOf("|"+f.label+"|")?(""!=l&&(l+="|"),l+=f.label,n[f.label]=1):n[f.label]++);for(var h=l.split("|"),o="",a=0;a<=h.length-1;a++){var u=h[a];o+=u+"("+n[u]+") "}for(var f=this.repairHTML(),c=(s=(s=(s=(s=(s+="网页LV="+this.lv+"\n")+("网页错误标签数="+f.err+"\n"))+("网页错误标签为="+f.errList+"\n"))+("网页错误标签是否可修复="+f.state+"\n"))+("网页类型标签数="+h.length+"种 "+o+"\n"),this.config.downcss=0,xiyueta("link[rel|NOUL=stylesheet]").item("href")),m=xiyueta("script").item("src"),a=0;a<=this.htmlArr.length-1;a++)null!=(f=this.htmlArr[a])&&("body"==f.label?(e=f.lv,r=!0):0==r&&-1!="|div|span|table|ul|".indexOf("|"+f.label+"|")?(i.push(f.html),r=!0):r&&f.lv-e==1&&2==f.tagpair&&"/"!=f.label.substr(0,1)&&"!--"!=f.label&&"script"!=f.label.substr(0,6)&&i.push(f.html),"link"==f.label&&"stylesheet"==this.attr(f,"rel").toLowerCase().trim()&&(d=this.common.fullHttpUrl(this.config.httpurl,f.href)));if(s=(s=(s+="共有CSS文件 "+c.length+" 条\n")+("共有JS文件 "+m.length+" 条\n"))+("一层标签共 "+i.length+" 条\n")+"\n",""!=c){s+="CSS列表("+c.length+"):\n";for(a=0;a<c.length;a++){var d=c[a].value,p=xiyueta.getUrlFileName(d);patt_swiper=/swiper[-|0-9|(bundle)|\.]*(min|source|)*.css/gi,patt_animate=/animate[-|0-9|(bundle)|\.]*(min|source|)*.css/gi,1==patt_swiper.test(p)?d+="     (swiper=移动端触摸滑动)":1==patt_animate.test(p)&&(d+="     (animate=使用CSS3的animation制作的动画效果的CSS集合)"),s+=d+"\n"}}if(""!=m){s+="\n\nJS列表("+m.length+"):\n";for(a=0;a<=m.length-1;a++){d=m[a].value,p=xiyueta.getUrlFileName(d);patt_JQuery=/jquery[-|0-9|\.]*(min|source|).js/gi,patt_SuperSlide=/(jquery\.|jquery-|)SuperSlide[-|0-9|\.]*(min|source|)*.js/gi,patt_swiper=/swiper[-|0-9|(bundle)|\.]*(min|source|)*.js/gi,patt_kxbdmarquee=/(jquery\.|jquery-|)kxbdmarquee[-|0-9|\.]*(min|source|)*.js/gi,patt_clipboard=/clipboard[-|0-9|(bundle)|\.]*(min|source|)*.js/gi,patt_wow=/wow[-|0-9|\.]*(min|source|).js/gi,1==patt_JQuery.test(p)?d+="     (jQuery=操作网页DOM)":1==patt_SuperSlide.test(p)?d+="     (SuperSlide=网站特效展示)":1==patt_swiper.test(p)?d+="     (swiper=移动端触摸滑动)":1==patt_kxbdmarquee.test(p)?d+="     (kxbdmarquee=无缝滚动效果)":1==patt_clipboard.test(p)?d+="     (clipboard=浏览器内容复制到系统剪贴板)":1==patt_wow.test(p)&&(d+="     (wow=动画效果，配合animate.css一起使用)"),s+=d+"\n"}}if(""!=i){s+="\n\n一层标签列表("+i.length+"):\n";for(a=0;a<=i.length-1;a++)s+=i[a]+"\n"}return s},xiyueta.fn.extend({scan:function(t){return _xyt.scan(t)}}),_XIYUETA.prototype.cutLabel=function(t,e){t=this.handleDomList(t);for(var i="",r=0;r<this.htmlArr.length;r++)(o=this.htmlArr[r])&&("/style"==o.label?i+=o.upHtml:"link"==o.label&&"stylesheet"==(this.attr(o,"rel")+"").toLowerCase().trim()&&(i+=o.content));if(0<t.length){var s="",l=!1,n="",a="",h=new _XIYUETACSS;h.cssParse(i),h.debug();for(var o,u,r=0;r<h.cssArr.length;r++)(o=h.cssArr[r])&&(u=o.label.toLowerCase(),0==l&&1==o.lv&&-1!=u.indexOf(" screen ")?(l=!0,s+=a,a="",n=o.label+"{\n"):1==l&&1==o.lv&&"}"==o.label?(l=!1,""!=a&&(s+=n+a+"}\n"),a=""):this.checkCssInHtml(t,o.label)&&(a+=o.html+"\n"));s+=a,xiyuetaCSS().parse(s),""!=(s=xiyuetaCSS().print("format"))&&(s="<style>"+s+"\n</style>\n");var f=xiyueta(t).htmlwrap();return xiyueta.load(f),s+this.printHTML("format")}return""},_XIYUETA.prototype.checkCssInHtml=function(t,e){t=this.handleDomList(t);var i=e,r=e.indexOf("{");if(""==(e=-1<r?e.substr(0,r):e))return!1;for(var s=e.split(" "),l="",n=0;n<s.length;n++){for(var a=s[n],h=0;h<9;h++)a=this.extractCssStyleName(a,a.lastIndexOf(".")),a=this.extractCssStyleName(a,a.lastIndexOf(":")),a=this.extractCssStyleName(a,a.lastIndexOf("["));""!=l&&(l+=" "),l+=a}e=l,console.log("显示",i,"=",e);var r=","+e+",",a=",*,",i=",* ";if(-1!=r.indexOf(a)||-1!=r.indexOf(i))return!0;a=",html,",i=",html ";if(-1!=r.indexOf(a)||-1!=r.indexOf(i))return!0;a=",body,",i=",body ";if(-1!=r.indexOf(a)||-1!=r.indexOf(i))return!0;r=t[0].x,i=t[0].y;return 0<xiyueta(e,r,i).length},_XIYUETA.prototype.extractCssStyleName=function(t,e){var i,r,s;return 0<e&&(s=t.substr(0,e),i=(e=t.substr(e+1)).indexOf(" "),r=e.indexOf(","),t=s,-1==i&&-1==r||(s=99,-1!=i&&i<s&&(s=i),t+=e.substr(s=-1!=r&&r<s?r:s))),t},xiyueta.fn.extend({cutlabel:function(t){return _xyt.cutLabel(this.domList,t)}}),XiyuetaCommon.prototype.handleFileUrl=function(t){var e="",i=t.indexOf("://");if(-1!=i&&(e=t.substr(0,i+3),t=t.substr(i+3)),-1!=(t=-1!=(t=t.replace(/\/\//g,"/")).indexOf("/./")?t.replace(/\/.\//g,"/"):t).indexOf("/../")){for(var r=[],s=0,l=t.split("/"),n=0;n<=l.length-1;n++)".."==(a=l[n])?(0==s?s=n-1:--s,0<=s&&delete r[s]):(r.push(a),s=0);for(t="",n=0;n<=r.length-1;n++){var a=r[n];null!=r[n]&&(""!=t&&(t+="/"),t+=r[n])}}return e+t},XiyuetaCommon.prototype.fullHttpUrl=function(t,e){if(null==e)return"";if(""==(e=(e+="").replace(/\\/g,"/").trim())||"./"==e)return"";var i,r="",s="",l="",n=t.indexOf("://");return s=-1!=n?(r=t.substr(0,n+3),n=(i=t.substr(n+3)).lastIndexOf("/"),l=r+i.substr(0,n+1),n=i.indexOf("/"),r+i.substr(0,n+1)):(n=t.lastIndexOf("/"),l=t.substr(0,n+1),n=t.indexOf("/"),t.substr(0,n+1)),"//"==e.substr(0,2)?e="http:"+e:-1==e.indexOf("://")&&(e="/"==e.substr(0,1)?s+e:l+e),this.handleFileUrl(e)},XiyuetaCommon.prototype.getUrlDir=function(t,e){if("string"!=typeof t)return"";var i;-1<(t=t.replace(/\\/g,"/").trim()).indexOf("://")&&(i=t.indexOf("://",1),t=-1!=(t=t.substring(i+3,t.length)).indexOf("/")?t.substr(t.indexOf("/")+1):""),-1!=(t=-1!=(t="/"==t.substr(0,1)?t.substr(1):t).indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")&&(t=t.substr(0,t.indexOf("#")));for(var r=1;r<9&&-1!=t.indexOf("//");r++)t=t.replace(/\/\//g,"/");return-1!=t.indexOf("/")?"fz"==e?(t=t.substr(0,t.lastIndexOf("/"))).replace(/\//g,"_"):t.substr(0,t.lastIndexOf("/")+1):""},XiyuetaCommon.prototype.getUrlFileName=function(t,e){if("string"!=typeof t)return"";-1<(t=t.replace(/\\/g,"/").trim()).indexOf("://")&&(r=t.indexOf("://",1),t=-1!=(t=t.substring(r+3,t.length)).indexOf("/")?t.substr(t.indexOf("/")+1):"");var i,r=t.split("/"),t=r[r.length-1],r="",s="";return-1!=(t=-1!=(t=-1!=t.indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")?t.substr(0,t.indexOf("#")):t).indexOf(".")?(i=t.lastIndexOf("."),r=t.substr(0,i),s=t.substr(i+1).toLowerCase()):r=t,""==r?"":("image"==e?""==s?t+=".jpg":-1=="|bmp|jpg|jpeg|gif|png|svg|".indexOf("|"+s+"|")&&(t=r+".jpg"):"css"==e?""==s?t+=".css":-1=="|css|".indexOf("|"+s+"|")&&(t=r+".css"):"js"==e?""==s?t+=".js":-1=="|js|".indexOf("|"+s+"|")&&(t=r+".js"):"html"==e?""==s?t+=".html":-1=="|html|htm|".indexOf("|"+s+"|")&&(t=r+".html"):(t=r,""!=s&&(t+="."+s)),t)},XiyuetaCommon.prototype.setFileNameA=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"pie")).replace(/\//g,"la")).replace(/:/g,"maohao")).replace(/\*/g,"xin")).replace(/\?/g,"wen")).replace(/"/g,"yinhao")).replace(/</g,"zou")).replace(/>/g,"you")).replace(/\|/g,"heng")).replace(/\./g,"juhao")).replace(/,/g,"douhao")).replace(/&nbsp;/g," ")).replace(/&quot;/g,"shuang")).replace(/\n/g,"")},XiyuetaCommon.prototype.checkUrl=function(t){return!!/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i.test(t=null==t?"":t)},XiyuetaCommon.prototype.getDomain=function(t){return"string"==typeof t&&-1<t.indexOf("//")?(e=t.indexOf("//",1),t=(e=t.substring(e+1,t.length)+"/").indexOf("/",1),e.substring(1,t)):"";var e},XiyuetaCommon.prototype.getUrlToFileName=function(t,e){var i=xiyueta.config().urlToNameList,r=(null!=e&&""!=e||(e="txt"),t.indexOf("?")),s=(-1!=(r=(t=-1!=r?t.substr(0,r):t).indexOf("#"))&&(t=t.substr(0,r)),""),l="\r\n"+i+"|";if(""==(s=-1!=(r=l.indexOf("\r\n"+t+"|"))?l.substr(r).split("|")[1]:s)){""==(s=this.getUrlFileName(t,e))&&""==(s="_"==(s=this.getUrlDir(t+"/","fz")).substr(s.length-1,1)?s.substr(0,s.length-1):s)&&(s=xiyueta.config().urlDefaultFileName+"."+e),""!=e&&-1==s.indexOf(".")&&(s+="."+e);for(var n=s,a=1;a<9&&-1!=i.indexOf("|"+s+"|");a++)s=n.substr(0,n.length-e.length-1)+"_"+a+"."+e}return s},XiyuetaCommon.prototype.getUrlParam=function(t,e){if(e+="",1<(i=(t+="").split("?")).length)for(var i=i[1].split("&"),r=0;r<i.length;r++){var s,l=i[r].split("=");if(l[0]==e)return 1<(s=l[1].split("#")).length?s[0]:l[1]}return""},_XIYUETA.prototype.setTplConfig=function(t){if(null==t)return this.tplConfig;"object"==typeof t&&(null!=t.type&&(this.tplConfig.type=t.type),null!=t.minrow&&(this.tplConfig.minrow=t.minrow),this.tplConfig.nav={},this.tplConfig.subnav={},this.tplConfig.news={},this.tplConfig.link={},this.tplConfig.list={},"dedecms"==this.tplConfig.type?(this.tplConfig.webTitle="{dede:global.cfg_webname/}",this.tplConfig.webKeywords="{dede:global.cfg_keywords/}",this.tplConfig.webDescription="{dede:global.cfg_description/}",this.tplConfig.nav.for="{dede:channel type='top' row='{%row%}'}\n",this.tplConfig.nav.title="[field:typename/]",this.tplConfig.nav.url="[field:typeurl/]",this.tplConfig.nav.end="{/dede:channel}",this.tplConfig.news.for="{dede:arclist titlelen='60' row='{%row%}'}\n",this.tplConfig.news.title="[field:title/]",this.tplConfig.news.url="[field:arcurl/]",this.tplConfig.news.image="[field:image/]",this.tplConfig.news.about="[field:title/]",this.tplConfig.news.body="[field:title/]",this.tplConfig.news.time="[field:pubdate function=\"MyDate('Y-m-d H:i',@me)\"/]",this.tplConfig.news.time1="[field:pubdate function=\"MyDate('Y-m-d',@me)\"/]",this.tplConfig.news.end="{/dede:arclist}"):(this.tplConfig.webTitle="<%=webTitle%>",this.tplConfig.webKeywords="<%=webKeywords%>",this.tplConfig.webDescription="<%=webDescription%>",this.tplConfig.nav.for='<%rs.open "select * from " & db_PREFIX & "webcolumn where parentid=-1 and isthrough=1 and flags like\'%{%navtype%}%\' order by sortrank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.nav.for2='<%rs.open "select * from " & db_PREFIX & "webcolumn where parentid in("& getNameToAllId("{%did%}") &") order by sortrank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.nav.focus="<%if isFocusNav(rs) then%>\n",this.tplConfig.nav.focus2='<%=IIF(isFocusNav(rs),"{%focus%}","{%default%}")%>',this.tplConfig.nav.title='<%=uTitle & rs("columnname")%>',this.tplConfig.nav.url='<%=getNavUrl(rs("id"),rs("columntype"))%>',this.tplConfig.nav.end="<%rs.movenext:next:rs.close%>",this.tplConfig.subnav.for='<%rsx.open "select * from " & db_PREFIX & "webcolumn where parentid="& rs("id") &" and isthrough=1  order by sortrank asc" ,conn,1,1\nfor j=1 to 99\nif rsx.eof then exit for\n%>\n',this.tplConfig.subnav.for2='<%rsx.open "select * from " & db_PREFIX & "webcolumn where parentid in("& getNameToAllId("{%did%}") &") order by sortrank asc" ,conn,1,1\nfor j=1 to 99\nif rsx.eof then exit for\n%>\n',this.tplConfig.subnav.focus="<%if isFocusNav(rsx) then%>\n",this.tplConfig.subnav.focus2='<%=IIF(isFocusNav(rsx),"{%focus%}","{%default%}")%>',this.tplConfig.subnav.title='<%=uTitle & rsx("columnname")%>',this.tplConfig.subnav.url='<%=getNavUrl(rsx("id"),rsx("columntype"))%>',this.tplConfig.subnav.end="<%rsx.movenext:next:rsx.close%>",this.tplConfig.news.for='<%rs.open "select * from " & db_PREFIX & "articledetail where parentId in("& getNameToAllId("{%did%}") &") order by sortrank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.news.focus="<%if i=1 then%>\n",this.tplConfig.news.focus2='<%=IIF(i=1,"{%focus%}","{%default%}")%>',this.tplConfig.news.title='<%=uTitle & rs("title")%>',this.tplConfig.news.url='detail.asp?id=<%=rs("id")%>',this.tplConfig.news.image='<%=rs("smallimage")%>',this.tplConfig.news.about='<%=rs("aboutContent")%>',this.tplConfig.news.body='<%=cutStr(rs("bodyContent"),260,"...")%>',this.tplConfig.news.time='<%=rs("createTime")%>',this.tplConfig.news.time1='<%=format_Time(rs("createTime"),2)%>',this.tplConfig.news.end="<%rs.movenext:next:rs.close%>",this.tplConfig.list.for='<%rs.open "select * from " & db_PREFIX & "webcolumn where isthrough=1 AND parentId="& getNavNameToID("","{%did%}") &" order by sortrank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.list.focus="<%if isFocusNav(rs) then%>\n",this.tplConfig.list.focus2='<%=IIF(isFocusNav(rs),"{%focus%}","{%default%}")%>',this.tplConfig.list.title='<%=rs("columnname")%>',this.tplConfig.list.image='<%=rs("smallimage")%>',this.tplConfig.list.url='<%=getNavUrl(rs("id"),rs("columntype"))%>',this.tplConfig.list.end="<%rs.movenext:next:rs.close%>",this.tplConfig.link.for='<%rs.open "select * from " & db_PREFIX & "friendlink where isthrough=1 order by sortrank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.link.focus="<%if i=1 then%>\n",this.tplConfig.link.title='<%=rs("title")%>',this.tplConfig.link.url='<%=rs("httpurl")%>',this.tplConfig.link.image='<%=rs("smallimage")%>',this.tplConfig.link.body='<%=cutStr(rs("bodyContent"),260,"...")%>',this.tplConfig.link.time='<%=rs("createTime")%>',this.tplConfig.link.time1='<%=format_Time(rs("createTime"),2)%>',this.tplConfig.link.end="<%rs.movenext:next:rs.close%>"))},_XIYUETA.prototype.myReplaceTplLabel=function(t,e){return null!=t&&"<a>abc</a>"==xiyueta(t).domlabel(2)},_XIYUETA.prototype.replaceTplLabel=function(t,e){if(null==t)return!1;if(1==this.myReplaceTplLabel(t,e))return!0;var i,r=xiyueta(t).domlabel(2);"<a></a>"==r?((i=xiyueta(t).find("a")).attr("href",e.url),null!=i.attr("title")&&i.attr("title",e.title),i.html(e.title)):""==r?"a"==xiyueta(t).getlabel()?(xiyueta(t).attr("href",e.url),null!=xiyueta(t).attr("title")&&xiyueta(t).attr("title",e.title),xiyueta(t).html(e.title)):(this.handleLabelBlock("img",xiyueta(t).find("img"),e),console.log("sDom(children)",r,t,xiyueta(t).htmlwrap())):"<a></a><span></span>"==r?((i=xiyueta(t).find("a")).attr("href",e.url),null!=i.attr("title")&&i.attr("title",e.title),i.html(e.title),this.replaceTplTime(xiyueta(t).find("span"),e)):"<a><div></div><span></span></a>"==r?(this.handleLabelBlock("a",xiyueta(t).find("a"),e),this.handleLabelBlock("img",xiyueta(t).find("img"),e),this.handleLabelBlock("span",xiyueta(t).find("span"),e)):"<a><div></div></a>"==r||"<div></div>"==r?(this.handleLabelBlock("a",xiyueta(t).find("a"),e),this.handleLabelBlock("img",xiyueta(t).find("img"),e)):"<a><span></span></a>"==r?(this.handleLabelBlock("a",xiyueta(t).find("a"),e),this.handleLabelBlock("span",xiyueta(t).find("span"),e)):(console.log("sDom(root)",r),this.handleLabelBlock("a",xiyueta(t).find("a"),e))},_XIYUETA.prototype.handleLabelBlock=function(t,e,i){var r,s;"a"==t?(null!=e.attr("href")&&e.attr("href",i.url),null!=e.attr("title")&&e.attr("title",i.title),r=e.text().trim(),s=e.children().length,e.end(),""!=r&&0==s&&e.html(i.title)):"img"==t?(null!=e.attr("src")&&e.attr("src",i.image),null!=e.attr("alt")&&e.attr("alt",i.title)):"span"==t&&(r=e.text().trim(),s=e.children().length,e.end(),""!=r&&0==s&&e.html(i.title))},_XIYUETA.prototype.replaceTplTime=function(t,e){var i=xiyueta(t).text().trim(),r="",s="",l=!1,n=-1;""!=i&&("["==i.substr(0,1)&&(r="[",i=i.substr(1)),"]"==i.substr(i.length-1,1)&&(s="]",i=i.substr(0,i.length-1)));new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/).test(i)&&(l=!0,n=2),l&&(i=e.time,i=r+(i=0<n?e.time1:i)+s,xiyueta(t).html(i))},_XIYUETA.prototype.replaceCnToEn=function(t){return t=(t+"").trim(),-1!="|关于我们|".indexOf(t="|"+t+"|")?"about us":-1!="|公司简介|".indexOf(t)?"company":-1!="|公司风采|".indexOf(t)?"company style":-1!="|公司荣誉|".indexOf(t)?"company honor":-1!="|公司致辞|".indexOf(t)?"company speech":-1!="|新闻展示|".indexOf(t)?"news":-1!="|新闻中心|".indexOf(t)?"news center":-1!="|公司新闻|".indexOf(t)?"company news":-1!="|行业新闻|".indexOf(t)?"industry news":-1!="|通知公告|".indexOf(t)?"announcement":-1!="|产品中心|".indexOf(t)?"product center":-1!="|产品展示|".indexOf(t)?"product":-1!="|联系我们|".indexOf(t)?"contact us":-1!="|新闻资讯|".indexOf(t)?"news and information":-1!="|案例展示|".indexOf(t)?"case presentation":-1!="|网站首页|首页|".indexOf(t)?"home":""},xiyueta.replaceCnToEn=function(t){return _xyt.replaceCnToEn(t)},xiyueta.tplconfig=function(t){return _xyt.setTplConfig(t)},xiyueta.findNav=function(){var e="";return xiyueta("a").each(function(){var t;if(-1<xiyueta(this).text().trim().indexOf("首页"))return 0<xiyueta(this).parent().children().findWithItem(4).length?console.log("相连","<a href=>首页</a><a href=>新闻</a>"):0<xiyueta(this).parent().parent().children().findWithItem(4).length&&(console.log("上一级","<li><a></a></li>"),t=xiyueta(this).parent().parent().parent().domList[0],e+="xiyueta({x:"+t.x+",y:"+t.y+"}).cutlabel()\n",console.log("xiyueta({x:"+t.x+",y:"+t.y+"}).cutlabel()")),!1}),e},xiyueta.autoFindTpl=function(t,e,i){var r,s,l,n,a=!1,h=!1,o=xiyueta.tplconfig().minrow,u=(null!=t&&(null!=t.isnav&&(a=t.isnav),null!=t.issubnav&&(h=t.issubnav),null!=t.minrow&&(o=t.minrow)),"number"!=typeof e&&(e=6),"");return"object"!=this.toType(i)?(r=xiyueta("body").getlv(),u+=s=null!=r?"body :lv("+(r+1)+")":":lv(1)",0<xiyueta(s).findWithItem(o).length?(n=((n=xiyueta(s).findWithItem(o).find("a").text())+"").toLocaleLowerCase(),""!=u&&(u+=" "),l=xiyueta(s).findWithItem(o).getlabel(),-1<n.indexOf("首页")||-1<n.indexOf("home")||1==a?1==h?(xiyueta(s).findWithItem(o).subnav(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(xiyueta(s),">"+l)+".subnav()",x:xiyueta(s).x,y:xiyueta(s).y})):(xiyueta(s).findWithItem(o).nav(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(xiyueta(s),">"+l)+".nav()",x:xiyueta(s).x,y:xiyueta(s).y})):(xiyueta(s).findWithItem(o).news(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(xiyueta(s),">"+l)+".nav()",x:xiyueta(s).x,y:xiyueta(s).y}))):0<e&&xiyueta(s).each(function(){u=xiyueta.autoFindTpl(t,--e,this,s)})):0<xiyueta(i).children().findWithItem(o).length?(""!=u&&(u+=" "),l=xiyueta(i).children().findWithItem(o).getlabel(),u+=l,-1<(n=((n=xiyueta(i).children().findWithItem(o).find("a").text())+"").toLocaleLowerCase()).indexOf("首页")||-1<n.indexOf("home")||1==a?1==h?(xiyueta(i).children().findWithItem(o).subnav(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(i,">"+l)+".subnav()",x:i.x,y:i.y})):(xiyueta(i).children().findWithItem(o).nav(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(i,">"+l)+".nav()",x:i.x,y:i.y})):(xiyueta(i).children().findWithItem(o).news(),xiyueta.autoFindObjArr.push({s:this.findObjOnly(i,">"+l)+".news()",x:i.x,y:i.y}))):0<e&&xiyueta(i).children().each(function(){u=xiyueta.autoFindTpl(t,--e,this,s)}),u},xiyueta.findObjOnly=function(t,e){if("object"!=this.toType(t))return"";var i="",r=xiyueta(t).getlabel(),s=xiyueta(t).attr("id");if(null!=s){if(1==xiyueta(r+(l="[id='"+s+"']")).length)return'xiyueta("'+r+l+e+'")';i+=l}var l,s=xiyueta(t).attr("class");if(null!=s){if(1==xiyueta(r+(l="[class='"+s+"']")).length)return'xiyueta("'+r+l+e+'")';i+=l}return 1==xiyueta(r+i).length?'xiyueta("'+r+i+e+'")':'xiyueta("'+r+e+'",'+t.x+","+t.y+")"},xiyueta.fn.extend({findWithItem:function(t,e){for(var i,r,s,l,n="|div|span|ul|li|tr|a|",a=_xyt.tplConfig.minrow,h=(1==arguments.length?"string"==typeof t?n="|"+t.replace(/\s+/g,"").replace(/,/g,"|")+"|":"number"==typeof t&&(a=t):2==arguments.length&&("string"==typeof t&&(n="|"+t.replace(/\s+/g,"").replace(/,/g,"|")+"|"),"number"==typeof e&&(a=e)),[]),o=0;o<this.domList.length;o++)(u=this.domList[o]).x!=u.y&&(r=xiyueta(u).getlabel(),-1!=n.indexOf("|"+r+"|")&&(s=xiyueta(u).domlabel(2),null==i?(i=s,h.push({count:1,label:r,domList:[u]})):i==s?(h[h.length-1].count++,h[h.length-1].domList.push(u)):(h.push({count:1,label:r,domList:[u]}),i=s)));for(o=0;o<h.length;o++){var u=h[o];(null==l||u.count>l.count)&&(l=u)}return this.domList=[],this.length=0,null==l||l.domList.length<a||(this.domList=l.domList,this.length=this.domList.length),this},news:function(t){return this.nav(t,"news")},list:function(t){return this.nav(t,"list")},link:function(t){return this.nav(t,"link")},page:function(t){if(0<this.domList.length){for(var e="单页默认标题",i=("object"==typeof t&&null!=t.did&&(e=t.did),""),r=0;r<this.domList.length;r++){var s=this.domList[r],l=(xiyueta(s).find("!--").remove(),xiyueta(s).html()),n=l.replace(/ /g,"").replace(/\t/g,""),n='<%=getOnePageBody("'+e+'","'+(l=""==i||i!=n?(i=n,(l=l.replace(/"/g,'""').replace(/\r\n/g,'"& vbCrlf &"')).replace(/\r/g,'"& vbCrlf &"').replace(/\n/g,'"& vbCrlf &"')):"")+'")%>';xiyueta(s).html(n)}return!0}return!1},foot:function(t){if(0<this.domList.length){for(var e="",i=0;i<this.domList.length;i++){var r=this.domList[i],s=(xiyueta(r).find("!--").remove(),xiyueta(r).html()),l=s.replace(/ /g,"").replace(/\t/g,""),l='<%=getWebFoot("'+(s=""==e||e!=l?(e=l,(s=s.replace(/"/g,'""').replace(/\r\n/g,'"& vbCrlf &"')).replace(/\r/g,'"& vbCrlf &"').replace(/\n/g,'"& vbCrlf &"')):"")+'")%>';xiyueta(r).html(l)}return!0}return!1},webqrcode:function(t){if(0<this.domList.length){for(var e=0;e<this.domList.length;e++){var i=this.domList[e],r='<%=getWebQrcode("'+xiyueta(i).attr("src")+'")%>';xiyueta(i).attr("src",r)}return!0}return!1},navahref:function(t){var e="联系我们";if("object"==typeof t&&null!=t.did&&(e=t.did),0<this.domList.length){for(var i=0;i<this.domList.length;i++){var r=this.domList[i];xiyueta(r).attr("href",'<%=getNavUrl(getNavNameToID("","'+e+'"),"") %>')}return!0}return!1},webcopyright:function(t){if(0<this.domList.length){for(var e=0;e<this.domList.length;e++){var i=this.domList[e];xiyueta(i).html("<%=webcopyright%>")}return!0}return!1},subnav:function(t){return this.nav(t,"subnav")},nav:function(o,u){var t,e,i,r,s,l,n="产品中心",a="top",f=("object"==typeof o?(xiyueta.tplconfig(o),null!=o.row&&(l=o.row),null!=o.did&&(n=o.did),null!=o.navtype&&(a=o.navtype)):null==xiyueta.tplconfig().webTitle&&xiyueta.tplconfig([]),"news"==u?s=(t=xiyueta.tplconfig().news).for:"link"==u?s=(t=xiyueta.tplconfig().link).for:"list"==u?s=(t=xiyueta.tplconfig().list).for:"subnav"==u&&"xiyuetacms"==xiyueta.tplconfig().type?s=(t=xiyueta.tplconfig().subnav).for:(s=(t=xiyueta.tplconfig().nav).for,"object"==typeof o&&null!=o.did&&(s=t.for2)),{obj:void 0,html:"",count:0}),c={obj:void 0,html:"",count:0},m={obj:void 0,css:"",count:0},d={obj:void 0,css:"",count:0},p=0,g="",h=(this.each(function(t,e){var i,r,s,l,n=xiyueta(this).domlabelwrap(2),a=xiyueta(this).attr("class"),h=!1;""!=u&&null!=u&&"nav"!=u||(i=xiyueta.autoFindObjArr,xiyueta.autoFindObjArr=[],minrow=xiyueta.tplconfig().minrow,"object"==typeof o?((l=o).isnav=!0,l.issubnav=!0,l.minrow=2):l={isnav:!0,issubnav:!0,minrow:2},xiyueta.autoFindTpl(l,6,e),1==xiyueta.autoFindObjArr.length&&(r=xiyueta.autoFindObjArr[0].x,s=xiyueta.autoFindObjArr[0].y,l=xiyueta("*",r,s).domlabelwrap(2),n=(n=xiyueta(this).domlabelwrap(2)).replace(l,""),h=!0,g=xiyueta("*",r,s).htmlwrap()),xiyueta.autoFindObjArr=i,xiyueta.tplconfig({isnav:!1,issubnav:!1,minrow:minrow})),null==f.obj?(f.obj=this,f.html=n,f.count=1,r=this.x):f.html==n?(f.count++,1==h&&(f=this)):null==c.obj?(c.obj=this,c.html=n,c.count=1):c.html==n?(c.count++,1==h&&(c=this)):(console.log("itemA.html",f.html),console.log("itemB.html",c.html),console.log("html",n),console.log("NO Html为空"," xiyueta('nav').children('li').nav()  请用这种方法",n),alert(" NO html(可能是子导航列表与主导航列表一样，搜索带上.children('li')方法)="+n)),s=this.y,p++,null==a&&(a=""),null==m.obj?(m.obj=this,m.css=a,m.count=1):m.css==a?m.count++:null==d.obj?(d.obj=this,d.css=a,d.count=1):d.css==a&&d.count++}),null==c.obj?e=f.obj:i=f.count>c.count?(e=f.obj,c.obj):(e=c.obj,f.obj),_xyt.replaceTplLabel(e,t),null==l&&(l=p),s.replace("{%row%}",l).replace("{%did%}",n).replace("{%navtype%}",a));return null!=i?(_xyt.replaceTplLabel(i,t),h+=t.focus+xiyueta(i).append(g).htmlwrap()+"\n<%else%>\n"+xiyueta(e).append(g).htmlwrap()+"\n<%end if%>"):((""!=m.css||""!=d.css)&&m.css!=d.css&&0<d.count&&(s=m.count<d.count?(r=m.css,d.css):(r=d.css,m.css),l=t.focus2.replace("{%focus%}",r).replace("{%default%}",s),xiyueta(e).attr("class",l),console.log("cssA,cssB",m,d,m.count,d.count)),h+=xiyueta(e).append(g).htmlwrap()),h+="\n"+t.end,this.each(function(t,e){0==t?xiyueta(this).htmlwrap(h):xiyueta(this).remove(!0)}),h},webtpl:function(t,e){var i,r;if(xiyueta.autoFindObjArr=[],1==arguments.length?"object"==typeof t?i=t:"number"==typeof t&&(r=t):2==arguments.length&&("object"==typeof t&&(i=t),"number"==typeof e&&(r=e)),xiyueta.tplconfig(i),0==this.domList.length)xiyueta.autoFindTpl(i,r,"");else for(var s=0;s<this.domList.length;s++){var l=this.domList[s];l.x,l.y;xiyueta.tplconfig(i),xiyueta.autoFindTpl(i,r,l)}return xiyueta.autoFindObjArr}});
=======
/*! xiyueta v1.3.6 | Author xiyueta Adream http://xiyueta.com/ | Released under the MIT license  */
var _XIYUETA=function(){"use strict";this.version="1.3.6_10",this.htmlSource="",this.htmlArr=[],this.lv=0,this.isHtmlErr=!1,this.common=new XiyuetaCommon,this.config={httpurl:"",serverurl:"/api/downWeb/default.asp",jsdir:"js/",cssdir:"css/",imagesdir:"images/",urlToNameList:"",urlDefaultFileName:"default"},this.tplConfig={type:"xiyuetacms",minrow:4},this.singleLabelList="|br|hr|img|link|meta|param|input|!doctype|rect|line|col|wbr|base|basefont|area|";for(var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),i=0;i<t.length;i++){var r=t[i];e["[object "+r+"]"]=r.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.parseHTML=function(t){this.htmlSource=t+="";var e="",i="",r="",s="",n=!(this.htmlArr=[]),l=!1,h=!1,o=!1,a=!1,u=!1,f=0,m=-1;this.isHtmlErr=!1;for(var d=0;d<this.htmlSource.length;d++){var c,g,p,x,y=e,e=this.htmlSource.substr(d,1);n?(r+=e,o?">"==e&&"--\x3e"==r.substr(r.length-3,3)&&(h=n=o=!1,this.htmlArr.push({_index:++m,lv:f+1,label:"!--",upHtml:s,downHtml:"",html:r,tagpair:1}),s=r=""):l&&"\x3c!--"==r?o=!0:a?">"==e&&"%"==y&&(h=n=a=!1,r=s+r,s=""):l&&"<%"==r?a=!0:u?">"==e&&"?"==y&&(h=n=u=!1,r=s+r,s=""):l&&"<?"==r?u=!0:-1!=" \n\t".indexOf(e)&&l?l=!1:"<"==e?"%"==(x=this.htmlSource.substr(d+1,1).toLowerCase())?0<(c=this.htmlSource.substr(d+1).indexOf("%>"))&&(r+=this.htmlSource.substr(d+1).substr(0,c+2),d+=c+2):"?"==x?0<(c=this.htmlSource.substr(d+1).indexOf("?>"))&&(r+=this.htmlSource.substr(d+1).substr(0,c+2),d+=c+2):(n=l=!1,r=s,d--):">"==e&&(n=l=!1,y=2,"/"==i.substr(0,1)?h=!0:(f++,"/"!=i.substr(i.length-1,1)&&-1==this.singleLabelList.indexOf("|"+i.toLowerCase()+"|")||(h=!0,y=1,i=i.replace(/\//g,"").trim())),g=i.toLowerCase(),this.htmlArr.push({_index:++m,lv:f,label:g,upHtml:s,downHtml:"",html:r,tagpair:y}),f<1&&(this.isHtmlErr=!0),s=r="",h&&(f--,h=!1),"script"==g?(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("<\/script>"),r=this.htmlSource.substr(d+1,p),d+=p):"style"==g?(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("</style>"),r=this.htmlSource.substr(d+1,p),d+=p):"textarea"==g&&(p=this.htmlSource.substr(d+1).toLowerCase().indexOf("</textarea>"),r=this.htmlSource.substr(d+1,p),d+=p)),l&&(i+=e)):"<"==e?(x=this.htmlSource.substr(d+1,1).toLowerCase(),-1!="abcdefghijklmnopqrstuvwxyz!/%?".indexOf(x)?(s=r,r=e,h=!(l=n=!0),i=""):r+=e):r+=e}""!=r&&this.htmlArr.push({_index:++m,lv:f,label:"",upHtml:s,html:r,downHtml:""}),this.lv=f},this.handleLabelParam=function(t,e,i){if(null==t)return"";if(null==i){if(null!=t[e])return t[e]}else i+="";for(var r=!1,s=!1,n="",l="",h=!1,o="",a=!1,u=!0,f=0,m=0,d=!1,c=t.label.length+1;c<t.html.length;c++){var g,p,x,y,b=t.html.substr(c,1);if(h)if(a)if(d)">"==b&&(d=!1),l+=b;else if(b==o||">"==b){if(t[n=n.toLowerCase()]=l,a=h=!1,o="",e==n)return null==i?l:(""==i?(x=t.html.substr(0,m-1).trim(),">"!=(y=t.html.substr(c+1).trim()).substr(0,1)&&(y=" "+y),t.html=x+y,t[n]=void 0):(g=(p=f)+l.length,u&&(p++,g++),x=t.html.substr(0,p),y=t.html.substr(g),t.html=x+i+y,t[n]=i),t);if(">"==b&&null!=i)return""!=i&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+i+'">'),t[e]=i,t}else"<"==b&&(d=!0),l+=b;else'"'==b||"'"==b?(o=b,f=c,u=a=!0):" "!=b&&(o=" ",f=c,l=b,u=!(a=!0));else{if(">"==b&&0==r)return null==i?void 0:(""!=i&&(t.html=t.html.substr(0,t.html.length-1)+" "+e+'="'+i+'">',t[e]=i),t);if(r){if("="==b)h=!(r=!1),o=l="";else if(0==s)-1!=" \t\n".indexOf(b)?s=!0:n+=b;else if(-1==" \t\n".indexOf(b)){if(e==n)return null==i?"":(""==i?(x=t.html.substr(0,m).trim(),">"!=(y=t.html.substr(c).trim()).substr(0,1)&&(y=" "+y),t.html=x+y,t[n]=void 0):(p=m+n.length,x=t.html.substr(0,p),y=t.html.substr(p),t.html=x+'="'+i+'"'+y,t[n]=i),t);r=!1,n=""}}else-1==" \t\n".indexOf(b)&&(s=!(r=!0),n=b,m=c)}}},this.getDocument=function(t,e,i,r,s){if(null==t&&(t=""),null==r&&(r=!1),0==this.htmlArr.length)return console.log("%c 需要先解析一段html文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf(",")){for(var n=[],l=t.split(","),h=0;h<l.length;h++){var o=this.getDocument(l[h],e,i,r);n=n.concat(o)}return n=this.delDomListDuplicate(n)}if(""==(t=t.trim()))return"";null==e&&(e=0),null==i&&(i=this.htmlArr.length-1);var a=-1.1,u=-1.1,f=-1.1,m=-1.1,d=-1.1,c="",g=!1,p="",x="",y="",b="",v="",L="";if("number"==this.toType(s)&&(u=s),-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var _=!1,L="",h=0;h<t.length;h++){var A=t.substr(h,1);0!=_||"'"!=A&&'"'!=A&&"("!=A?1==_&&(" "==A?A="-Space-":"'"!=A&&'"'!=A&&")"!=A||(_=!1,"'"!=A&&'"'!=A||(A=""))):(_=!0,"'"!=A&&'"'!=A||(A="")),L+=A}t=L}var w,s=t.indexOf(">"),C=t.indexOf(" "),O=" ",T=C;if(-1!=s&&(s<C||-1==C)&&(O=">",T=s),-1<T&&(p=t.substr(T+1).trim(),t=t.substr(0,T)),-1!=(T=t.indexOf(":"))&&(s=C="",w=(A=t.substr(T+1)).indexOf("("),S=A.indexOf(")"),-1!=w&&-1!=S?(C=A.substr(0,w).toLowerCase(),S=(s=A.substr(w+1)).indexOf(")"),s=s.substr(0,S).replace(/-Space-/g," ").trim()):C=A.toLowerCase(),"first"==C?a=0:"last"==C?a=-1:"even"==C?f=0:"odd"==C?f=1:"eq"==C?(a=0,(a=""!=s?parseInt(s):a)+""=="NaN"&&(a=-.1,t="")):"lv"==C?(u=1,(u=""!=s?parseInt(s):u)+""=="NaN"&&(u=-.1,t="")):"gt"==C?""!=s&&(m=parseInt(s))+""=="NaN"&&(m=-.1,t=""):"lt"==C?""!=s&&(d=parseInt(s))+""=="NaN"&&(d=-.1,t=""):"header"==C?g=!0:"contains"==C?c=s:console.log(t,"没有动作 "+C),""!=(t=t.substr(0,T))||-.1==a&&-.1==u||(t="*")),-1!=(T=t.indexOf("["))&&(S=(A=t.substr(T+1)).indexOf("]"),-1==(A=A.substr(0,S)).indexOf("=")?(x=A,y="*"):(x=(w=A.split("="))[0],y=w[1].replace(/-Space-/g," "),s=x.substr(x.length-1),-1!="!^$*~|".indexOf(s)&&(x=x.substr(0,x.length-1),b=s)),-1!=x.indexOf("|")&&(x=(C=x.split("|"))[0],"NOUL"==C[1]&&(y=y.toLowerCase(),v=C[1])),""==(t=t.substr(0,T))&&(t="*")),"#"==t.substr(0,1)){if(0<a)return"";a=0}var D,S={type:"",name:"",nFocus:-1.1},n=(-1<(T=t.substr(1).lastIndexOf("."))?(t=(D=t).substr(0,T+1),S={type:".",name:D.substr(T+2).toLowerCase()}):-1<(T=t.substr(1).lastIndexOf("#"))&&(t=(D=t).substr(0,T+1),S={type:"#",name:D.substr(T+2).toLowerCase()}),this.serchDocument(t,e,i,x,y,b,v,S));if(0<n.length)if(-1.1!=a)n=a<0?[n[n.length+a]]:[n[a]];else if(-1.1!=u){for(var H=[],h=0;h<n.length;h++)(I=this.htmlArr[n[h].x]).lv==u&&H.push(n[h]);n=H}else if(-1.1!=f){for(H=[],h=0;h<n.length;h++)h%2==f&&H.push(n[h]);n=H}else if(-1.1!=m){for(H=[],h=m+1;h<n.length;h++)H.push(n[h]);n=H}else if(-1.1!=d){d>n.length&&(d=n.length);for(H=[],h=0;h<d;h++)H.push(n[h]);n=H}else if(""!=c){for(var I,H=[],h=0;h<n.length;h++)(I=n[h]).x!=I.y&&-1!=this.text(I).indexOf(c)&&H.push(n[h]);n=H}else if(g){for(H=[],l="h1,h2,h3,h4,h5,h6,,h7,h8,h9".split(","),h=0;h<n.length;h++)for(var e=n[h].x,i=n[h].y,o=this.getDocument(t+" "+l[h],e,i,r),N=0;N<o.length;N++)H.push(o[N]);n=H}if(""!=p&&0<n.length){for(var F,H=[],h=0;h<n.length;h++)(e=n[h].x)!=(i=n[h].y)&&(F="",">"==O&&(F=this.htmlArr[e].lv+1),o=this.getDocument(p,e+1,i-1,!0,F),H=H.concat(o));n=H}return n=0==r?this.delDomListDuplicate(n):n},this.delDomListDuplicate=function(t){for(var e="",i=-1,r=[],s=0;s<t.length;s++){var n,l=t[s];null!=l&&(n=l.x+"|"+l.y,-1==(","+e+",").indexOf(","+n+",")&&(e+=","+n,i++,l.index=i,r.push(l)))}return r},this.domListAsc=function(t){for(var e=[],i=-1,r=0;r<t.length;r++){for(var s,n=void 0,l=0;l<t.length;l++){var h=t[l];null!=h&&(null==n||h.x<n.x)&&(n=h,s=l)}i++,n.index=i,e.push(n),t[s]=void 0}return e},this.serchDocument=function(t,e,i,r,s,n,l,h){null==r&&(r=""),null==s&&(s=""),null==n&&(n=""),null==l&&(l="");for(var o=!1,a=[],u=0,f=0,m=!1,d=e;d<=i;d++){var c,g,p=this.htmlArr[d];if(null!=p)if(o&&this.checkEndSelector(p,t)&&u==p.lv){o=!1,m&&(a[a.length-1].y=d);for(var m=!1,x=this.serchDocument(t,f+1,d,r,s,n,l,h),y=0;y<x.length;y++)a.push(x[y])}else this.checkStartSelector(p,t,h)&&0==o&&(2==p.tagpair&&(o=!0,u=p.lv),f=d,c=!0,""!=r&&(g=this.handleLabelParam(p,r),"NOUL"==l&&null!=g&&(g=g.toLowerCase()),"^"==n?null!=g&&g.substr(0,s.length)==s||(c=!1):"|"==n?null!=g&&(g+"-").substr(0,s.length+1)==s+"-"||(c=!1):"$"==n?null!=g&&g.substr(-1*s.length)==s||(c=!1):"~"==n?null!=g&&-1!=(" "+g+" ").indexOf(" "+s+" ")||(c=!1):"*"==n?null!=g&&-1!=g.indexOf(s)||(c=!1):"!"==n?g==s&&(c=!1):null!=g&&"*"==s?c=!0:g!=s&&(c=!1)),c&&(a.push({index:a.length,x:d,y:d}),2==p.tagpair&&(m=!0)))}return a},this.checkStartSelector=function(t,e,i){if(""==t.label)return!1;var r=e+" ",s=t.label.substr(0,1),n=e.substr(0,1);if("/"==s)return!1;if("*"==n)return"."==i.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==i.name;if("#"==n){var l=e.substr(1,r.indexOf(" ")-1);if(this.handleLabelParam(t,"id")==l)return""==i||("."==i.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==i.name)}else if("."==n){var h,o,l=e.substr(1,r.indexOf(" ")-1).toLowerCase();if(null==(h=" "+this.handleLabelParam(t,"class")+" "))return!1;if(-1!=(h=h.toLowerCase()).indexOf(" "+l+" "))return""==i||("."==i.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==i.name)}else if(t.label+" "==e.substr(0,t.label.length+1).toLowerCase()+" ")return"."==i.type?null!=(h=this.handleLabelParam(t,"class"))&&-1!=(" "+h.toLowerCase()+" ").indexOf(" "+i.name+" "):"#"!=i.type||null!=(o=this.handleLabelParam(t,"id"))&&o.toLowerCase()==i.name;return!1},this.checkEndSelector=function(t,e){t.label.substr(0,1);var i=e.substr(0,1);return"*"==i||("#"==i||"."==i||t.label=="/"+e.substr(0,t.label.length-1).toLowerCase())},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r],n=e.call(s,r,s);if(s.value=n,i.push(s),"boolean"==typeof n&&0==n)break}return i},this.find=function(t,e){if(t=this.handleDomList(t=null==t?[]:t),"object"==this.toType(e)){for(var i=e.domList,r=[],s=0;s<i.length;s++)for(var n=i[s].x,l=i[s].y,h=0;h<t.length;h++){var o=t[h].x,a=t[h].y;o<=n&&n<=a&&r.push(i[s])}return this.delDomListDuplicate(r)}for(var u,r=[],h=0;h<t.length;h++)(n=t[h].x)!=(l=t[h].y)&&(u=this.getDocument(e,n,l),r=r.concat(u));return this.delDomListDuplicate(r)},this.add=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;e=t.concat(i);return e=this.delDomListDuplicate(e),this.domListAsc(e)},this.not=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return t;if(null==e)return t;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return t;for(var r=[],s=0,n=0;n<t.length;n++){for(var l=t[n],h=!0,o=0;o<i.length;o++){var a=i[o];if(a.x==l.x&&a.y==l.y){h=!1;break}}h&&(l.index=s++,r.push(l))}return r},this.is=function(t,e){t=this.handleDomList(t=null==t?[]:t);var i=[];if("number"==typeof e||"function"==typeof e)return!1;if(null==e)return!1;if(""==(i="object"==this.toType(e)?null!=e.domList?e.domList:[e]:this.getDocument(e+="")))return!1;for(var r=0;r<t.length;r++)for(var s=t[r],n=0;n<i.length;n++){var l=i[n];if(l.x==s.x&&l.y==s.y)return!0}return!1},this.text=function(t,e){var i="get",t=this.handleTextHtml(t,e,"text",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.html=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"html",i)},this.htmlwrap=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleTextHtml(t,e,"htmlwrap",i)},this.handleTextHtml=function(t,e,i,r){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var n=this.each(t,e),l=0;l<n.length;l++)n[l]&&this.handleTextHtml(n[l],n[l].value,i,r);return!1}if("set"==r){if("undefined"==s)return;null==e?e="":e+="","text"==i&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}for(var h="",l=0;l<t.length;l++)if(null!=t[l])for(var o=t[l].x,a=t[l].y,u=o;u<=a;u++){var f=this.htmlArr[u];if(f)if("text"==i)u==o?"get"==r&&(h+=f.downHtml):u<a?"set"==r?delete this.htmlArr[u]:h+=f.upHtml+f.downHtml:u==a&&("get"==r?h+=f.upHtml:f.upHtml=e);else if(u==o)"get"==r?("htmlwrap"==i&&(h+=f.html),h+=f.downHtml):"htmlwrap"==i&&(f.html="",u==a&&(f.upHtml=e));else if(u<a)"set"==r?delete this.htmlArr[u]:h+=f.upHtml+f.html+f.downHtml;else if(u==a)if("get"==r){if(h+=f.upHtml,"htmlwrap"==i&&(h+=f.html),"get"==r)return h}else f.upHtml=e,"htmlwrap"==i&&(f.html="")}return"get"==r?h:void 0}},this.handleCssParam=function(t,e,i){var r,s,n;if(null==i)return s="a{"+(n=null==(n=this.attr(t,"style"))?"":n)+"}",$xytcss("a").parse(s).css(e);i+="",r=n=null==(n=this.attr(t,"style"))?"":n,s="a{"+n+"}",$xytcss("a").parse(s).css(e,i),n=(n=$xytcss().print()).substr(2,n.length-3).trim(),r.trim()!=n&&(2<=n.split(";").length&&(n=n.replace(/ /g,"").replace(/:/g,": ").replace(/;/g,"; ").trim()),this.attr(t,"style",n))},this.css=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"css",r)},this.attr=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"attr",r)},this.prop=function(t,e,i){var r=3<=arguments.length?"set":"get";return this.handleCssAttr(t,e,i,"prop",r)},this.handleCssAttr=function(t,e,i,r,s){if("function"==this.toType(i)){for(var n=this.each(t,i),l=0;l<n.length;l++)n[l]&&this.handleCssAttr(n[l],e,n[l].value,r,s);return!1}if("object"==this.toType(e)){for(var h in e)this.handleCssAttr(t,h,e[h],r,s);return this}if(null!=t&&null!=e&&""!=(e=(e+="").trim())){t=this.handleDomList(t);for(l=0;l<t.length;l++){var o=t[l];if("attr"==r){if("get"==s)return this.handleLabelParam(this.htmlArr[o.x],e);this.handleLabelParam(this.htmlArr[o.x],e,i)}else if("prop"==r){var a=this.htmlArr[o.x],u=this.checkTagAttrExist(a.label,e);if("get"==s)return 0==u?void 0:this.handleLabelParam(a,e);u&&this.handleLabelParam(a,e,i)}else{if("get"==s)return this.handleCssParam(o,e);this.handleCssParam(o,e,i)}}}},this.data=function(t,e,i){if(null==t||null==e)return!1;if(""!=e.trim()){e="data_"+e;var r="get",s=(t=this.handleDomList(t)).length;"get"==(r=3<=arguments.length?"set":r)&&(s=1);for(var n=0;n<s;n++){var l=this.htmlArr[t[n].x];if(l){if("get"==r)return l[e];l[e]=i}}}},this.removeAttr=function(t,e){if(null==t||null==e)return!1;if(""==e.trim())return!1;t=this.handleDomList(t);for(var i=e.split(" "),r=0;r<i.length;r++){var s=i[r];""!=s&&this.attr(t,s,"")}return!0},this.val=function(t,e){if(null!=t){var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.val(r[s],r[s].value);return!1}t=this.handleDomList(t);var n="get";if(2<=arguments.length){if(n="set","undefined"==i)return;null==e?e="":e+=""}if("get"==n){if(o=0<t.length?this.htmlArr[t[0].x]:o){if("textarea"==o.label)return this.html(t[0]);if("select"!=o.label)return this.handleLabelParam(o,"value");for(var l=(m=this.getDocument("option",a,u)).length,h=0;h<l;h++)m[h].x==m[h].y||null==this.attr(m[h],"selected")&&null!=f||(f=this.attr(m[h],"value"));return f}}else for(s=0;s<t.length;s++)if(null!=t[s]){var o,a=t[s].x,u=t[s].y;if(o=this.htmlArr[a])if(a!=u)if("textarea"==o.label)this.html(t[s],e);else if("select"==o.label)for(var f,m=this.getDocument("option",a,u),h=0;h<m.length;h++)m[h].x!=m[h].y&&(this.attr(m[h],"value")==e?this.attr(m[h],"selected","selected"):this.attr(m[h],"selected",null));else this.attr(t[s],"value",e);else this.attr(t[s],"value",e)}}},this.remove=function(t,e,i){var r="",s=!1;if(2==arguments.length?"string"==typeof e?r=e:"boolean"==typeof e&&(s=e):3==arguments.length&&("string"==typeof e&&(r=e),"boolean"==typeof i&&(s=i)),null!=t){if(null==(t=this.handleDomList(t)))return"";null==r||-1!=(e=r.indexOf(":"))&&(h=i="",e=(r=r.substr(e+1)).indexOf("("),l=r.indexOf(")"),-1!=e&&-1!=l?(i=r.substr(0,e).toLowerCase(),l=(h=r.substr(e+1)).indexOf(")"),("'"==(e=(h=h.substr(0,l).replace(/-Space-/g," ").trim()).trim()).substr(0,1)&&"'"==e.substr(e.length-1,1)||'"'==e.substr(0,1)&&'"'==e.substr(e.length-1,1))&&(h=e.substr(1,e.length-2))):i=r.toLowerCase(),"contains"==i&&(n=h));var n,l,h,o=[];if(null!=n){for(var a=0;a<t.length;a++)(u=t[a]).x!=u.y&&-1!=this.text(u).indexOf(n)&&o.push(u);t=o}for(a=0;a<t.length;a++)for(var u,f=t[a].x,m=t[a].y,d=f;d<=m;d++)(u=this.htmlArr[d])&&(d==f?(u.html="",u.label="",s&&(u.upHtml="")):delete this.htmlArr[d]);return t}},this.addClass=function(t,e){var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.addClass(r[s],r[s].value);return!1}if(null!=t){if(t=this.handleDomList(t),"number"==i)return!1;if(null==t||null==e)return!1;if(this.common.isArray(e))var n=e;else{if(""==(e=(e+"").trim()))return!1;n=e.split(" ")}for(s=0;s<t.length;s++){for(var l=t[s],h=null!=(h=this.attr(l,"class"))?h.trim():"",o=0;o<n.length;o++)""!=n[o]&&-1==(" "+h+" ").indexOf(" "+n[o]+" ")&&(""!=h&&(h+=" "),h+=n[o]);this.attr(l,"class",h)}}},this.hasClass=function(t,e){if("number"==typeof e)return!1;if(null==t||null==e)return!1;if(""==(e=e.trim()))return!1;if(null==t)return!1;t=this.handleDomList(t);for(var i=0;i<t.length;i++){var r=null!=(r=this.attr(t[i],"class"))?r.trim():"";if(""!=r&&-1!=(" "+r+" ").indexOf(" "+e+" "))return!0}return!1},this.removeClass=function(t,e){if("function"==this.toType(e)){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.removeClass(i[r],i[r].value);return!1}if(null!=t){if(t=this.handleDomList(t),"array"==this.toType(e))var s=e;else{if(null==t||null==e)return!1;if(""==(e=(e+"").trim()))return!1;s=e.split(" ")}for(r=0;r<t.length;r++){var n=t[r];if(null!=(l=this.attr(n,"class"))){for(var l=" "+(l=l.trim())+" ",h=0;h<=s.length-1;h++)""!=s[h]&&(l=l.replace(" "+s[h]+" "," "));this.attr(n,"class",l.trim())}}}},this.wrap=function(t,e,i){if(null!=t){t=this.handleDomList(t);for(var r=0;r<t.length;r++){var s=t[r].x,n=t[r].y;this.htmlArr[s].upHtml+=e,this.htmlArr[n].downHtml+=i}return this}},this.unwrap=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){for(var i=t[e].x,r=t[e].y,s=this.htmlArr[i].lv-1,n=i;0<=n;n--){var l=this.htmlArr[n];if("object"==typeof l&&this.htmlArr[n].lv==s){l.html="";break}}for(n=r;n<=this.htmlArr.length-1;n++){l=this.htmlArr[n];if("object"==typeof l&&this.htmlArr[n].lv==s){l.html="";break}}}return this}},this.append=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.append(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++){var s=t[r].x,n=t[r].y;s!=n?this.htmlArr[n].upHtml+=e:this.htmlArr[s].downHtml+=e}return this},this.prepend=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.prepend(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++){var s=this.htmlArr[t[r].x];s.downHtml=e+s.downHtml}return this},this.after=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.after(i[r],i[r].value);return!1}"object"==this.toType(t)&&(t=[t]);for(r=0;r<t.length;r++){var s=this.htmlArr[t[r].y];s.downHtml=e+s.downHtml}return this},this.before=function(t,e){if(null==t||null==e)return!1;if("function"==typeof e){for(var i=this.each(t,e),r=0;r<i.length;r++)i[r]&&this.before(i[r],i[r].value);return!1}t=this.handleDomList(t);for(r=0;r<t.length;r++)this.htmlArr[t[r].x].upHtml+=e;return this},this.next=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var i=this.htmlArr[t[e].x],r=-1,s=i._index+1;s<=this.htmlArr.length-1;s++){var n=this.htmlArr[s];if(n){if(n.lv<i.lv)break;if(-1!=r){if(i.lv==n.lv&&"/"==n.label.substr(0,1))return{index:0,x:r,y:n._index}}else if(i.lv==n.lv&&"/"!=n.label.substr(0,1)){if(1==n.tagpair)return{index:0,x:n._index,y:n._index};r=n._index}}}return[]},this.nextAll=function(t){t=this.handleDomList(t);for(var e=[],i=-1,r=0;r<t.length;r++)for(var s=this.htmlArr[t[r].x],n=-1,l=s._index+1;l<=this.htmlArr.length-1;l++){var h=this.htmlArr[l];if(h){if(h.lv<s.lv)break;-1!=n?s.lv==h.lv&&"/"==h.label.substr(0,1)&&(e.push({index:++i,x:n,y:h._index}),n=-1):s.lv==h.lv&&"/"!=h.label.substr(0,1)&&(1==h.tagpair?e.push({index:++i,x:h._index,y:h._index}):n=h._index)}}return e},this.prev=function(t){t=this.handleDomList(t);for(var e=0;e<t.length;e++)for(var i=this.htmlArr[t[e].x],r=-1,s=i._index-1;0<=s;s--){var n=this.htmlArr[s];if(n){if(n.lv<i.lv)break;if(-1!=r){if(i.lv==n.lv&&"/"!=n.label.substr(0,1))return{index:0,x:n._index,y:r}}else if(i.lv==n.lv&&"/"==n.label.substr(0,1)){if(1==n.tagpair)return{index:0,x:n._index,y:n._index};r=n._index}}}return[]},this.prevAll=function(t,e){t=this.handleDomList(t),null==e&&(e="desc");for(var i=[],r=0;r<t.length;r++)for(var s=this.htmlArr[t[r].x],n=-1,l=s._index-1;0<=l;l--){var h=this.htmlArr[l];if(h){if(h.lv<s.lv)break;-1!=n?s.lv==h.lv&&"/"!=h.label.substr(0,1)&&(i.push({index:0,x:h._index,y:n}),n=-1):s.lv==h.lv&&"/"==h.label.substr(0,1)&&(1==h.tagpair?i.push({x:h._index,y:h._index}):n=h._index)}}return i="asc"==e?this.domListAsc(i):i},this.parent=function(t){t=this.handleDomList(t);for(var e=[],i=0;i<t.length;i++){for(var r=this.htmlArr[t[i].x],s=-1,n=-1,l=r._index-1;0<=l;l--){var h=this.htmlArr[l];if(h&&r.lv-1==h.lv&&"/"!=h.label.substr(0,1)){s=h._index;break}}for(l=r._index+1;l<=this.htmlArr.length-1;l++){h=this.htmlArr[l];if(h&&r.lv-1==h.lv&&"/"==h.label.substr(0,1)){n=h._index;break}}-1!=s&&e.push({x:s,y:n})}return e},this.parents=function(t){t=this.handleDomList(t);for(var e=[],i=0;i<t.length;i++){for(var r=this.htmlArr[t[i].x],s=-1,n=-1,l=r._index-1;0<=l;l--){var h=this.htmlArr[l];if(h&&r.lv-1==h.lv&&"/"!=h.label.substr(0,1)){s=h._index;break}}for(l=r._index+1;l<=this.htmlArr.length-1;l++){h=this.htmlArr[l];if(h&&r.lv-1==h.lv&&"/"==h.label.substr(0,1)){n=h._index;break}}-1!=s&&(e.push({x:s,y:n}),e=e.concat(this.parents([{x:s,y:n}])))}return this.delDomListDuplicate(e)},this.children=function(t){t=this.handleDomList(t);for(var e,i=[],r=0,s=0;s<t.length;s++){var n=t[s].x,l=t[s].y;if(n!=l)for(var h=this.htmlArr[n],o=n+1;o<l;o++){var a=this.htmlArr[o];a.lv-h.lv==1&&(2!=a.tagpair||-1!=a.label.indexOf("/")?i.push({index:r++,x:e,y:a._index}):e=a._index)}}return i},this.closest=function(t,e){t=this.handleDomList(t);for(var i=[],r=0,s=0;s<t.length;s++){var n=t[s].x,l=(t[s].y,this.htmlArr[n]);if("string"==typeof e)for(var h=this.getDocument(e),o=h.length-1;0<=o;o--){var a=h[o].x,u=h[o].y;if(a!=u){var f=this.htmlArr[a];if(a<n&&f.lv-l.lv==-1){i.push({index:r++,x:a,y:u});break}}}}return i},this.filter=function(t,e){t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r].x,n=t[r].y;this.htmlArr[s];"string"==typeof e&&(s=this.getDocument(e,s,n),i=i.concat(s))}return this.delDomListDuplicate(i)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])},this.slice=function(t,e,i){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];if(null==e&&null==i)return t;if(isNaN(e)?e=0:(e=parseInt(e))<0&&(e=t.length- -1*e),null==i?i=t.length:isNaN(i)?i=-1:(i=parseInt(i))<0&&(i=t.length- -1*i),e+""=="NaN"||i+""=="NaN")return t;for(var r=[],s=0;s<t.length;s++)e<=s&&s<i&&r.push(t[s]);return r},this.show=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.x!=i.y&&this.css(i,"display","")}return this},this.hide=function(t){if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var e=0;e<t.length;e++){var i=t[e];i.x!=i.y&&this.css(i,"display","none")}return[]},this.dom=function(t,e,i,r){1!=(i=null==i?-1:i)&&2!=i&&(i=-1),""!=e&&(e="|"+e+"|");var s=(r=null==r?"":r).split(" ");if(t=this.handleDomList(t),"array"!=this.toType(t))return[];for(var n="",l=0;l<t.length&&!(0<l);l++){var h=t[l].x,o=t[l].y;if(h!=o)for(var a=h;a<=o;a++){var u=this.htmlArr[a];if(u){var f="";if(-1!=e.indexOf("label"))for(var m=0;m<=s.length-1;m++){var d,c=s[m];""==c||null!=(d=this.attr(u,c))&&(f+=" "+c+'="'+d+'"')}i!=u.tagpair&&-1!=i||(a==h||a==o?-1!=e.indexOf("all")&&(-1!=e.indexOf("label")?n+="<"+u.label+f+">":n+=u.html):a<o&&(-1!=e.indexOf("label")?n+="<"+u.label+f+">":n+=u.html))}}}return n},this.getlv=function(t){if(t=this.handleDomList(t),"array"==this.toType(t)&&1<=t.length){t=this.htmlArr[t[0].x];if(t)return t.lv}},this.getLabel=function(t){if(t=this.handleDomList(t),"array"==this.toType(t)&&1<=t.length){t=this.htmlArr[t[0].x];if(t)return t.label}},this.printHTML=function(t){for(var e="",i=0,r=-1!=(t=","+(t=null==t?"":t).replace(/\|/g,",").replace(/\s/g,"")+",").indexOf(",color,")?"<br>":"\n",s=-1!=t.indexOf(",color,")?"&nbsp;&nbsp;&nbsp;&nbsp;":"    ",n=0;n<=this.htmlArr.length-1;n++){var l,h,o,a,u=this.htmlArr[n];u&&(-1!=t.indexOf(",format,")?(l=u.upHtml.trim(),h=u.downHtml.trim(),o=u.html.trim(),-1!=t.indexOf(",color,")&&(l=this.htmlColor(l),h=this.htmlColor(h),o=this.htmlColor(o)),"html"==u.label?i=-1:"head"!=u.label&&"body"!=u.label||(l+=r),""!=o&&(a=!0,2==u.tagpair?"/"==u.label.substr(0,1)&&(a=this.upCheckThisLabel(u)):-1!=this.singleLabelList.indexOf("|"+u.label+"|")&&(a=!1),a&&(o=r+this.common.copyStr(s,u.lv-1+i)+o)),e+=l+o+h):-1!=t.indexOf(",zip,")?e+=u.upHtml.trim()+u.html.trim()+u.downHtml.trim():-1!=t.indexOf(",color,")?e+=this.htmlColor(u.upHtml)+this.htmlColor(u.html)+this.htmlColor(u.downHtml):e+=u.upHtml+u.html+u.downHtml)}return-1!=t.indexOf(",format,")&&(e=e.trim()),e=-1!=t.indexOf(",color,")?"<div style='font-family: Menlo, Monaco, Consolas, \"Courier New\", monospace;padding: 0.2em;margin: 0;font-size: 14px;'>"+e+"</div>":e},this.upCheckThisLabel=function(t){if("/head"==t.label||"/body"==t.label)return!0;for(var e=t._index-1;0<=e;e--){var i=this.htmlArr[e];if(i){if(i.lv==t.lv)return!1;if(2==i.tagpair||"img"==i.label)return!0;if(-1!=(i.upHtml+i.downHtml).indexOf("\n"))return!0}}return!1},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.htmlArr)},this.info=function(){console.log("%c xiyueta%c v"+_xyt.version+" website: www.xiyueta.com ","font-size:22px;color:#00bbee","color:#000")}},_xyt=new _XIYUETA,xiyueta=(_xyt.info(),function(t,e,i){return new xiyueta.fn.init(t,e,i)}),init=(xiyueta.fn=xiyueta.prototype={length:0,selector:"",domList:void 0,x:null,y:null,domListIndex:0},xiyueta.extend=xiyueta.fn.extend=function(){var t,e,i,r=arguments[0]||{},s=1,n=arguments.length;for(s===n&&(r=this,s--);s<n;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&void 0!==i&&(r[e]=i);return r},xiyueta.fn.init=function(t,e,i){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=i,this.domListArray=[],0<_xyt.htmlArr.length&&("string"==typeof t?(this.domList=_xyt.getDocument(t,e,i),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector="")),null==this.selector&&(this.selector="")}),_XIYUETACSS=(init.prototype=xiyueta.fn,($=$xyt=xiyueta).fn.extend({parse:function(t,e){return _xyt.parseHTML(t),1==(e=null!=e||0==_xyt.lv&&1!=_xyt.isHtmlErr?e:!0)&&0<(t=this.repair(!1)).err&&""!=t.errList&&1==t.state&&(_xyt.parseHTML(this.print()),this.repairHTML=!0),0<_xyt.htmlArr.length&&"string"==typeof this.selector&&(this.domList=_xyt.getDocument(this.selector,this.x,this.y),this.length=this.domList.length),this},find:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.find(this.domList,t),this.length=this.domList.length,this.selector="",this},add:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.add(this.domList,t),this.length=this.domList.length,this.selector="",this},not:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.not(this.domList,t),this.length=this.domList.length,this.selector="",this},is:function(t){return _xyt.is(this.domList,t)},text:function(t){return 1<=arguments.length?(_xyt.text(this.domList,t),this):_xyt.text(this.domList)},html:function(t){return 1<=arguments.length?(_xyt.html(this.domList,t),this):_xyt.html(this.domList)},attr:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.attr(this.domList,t,e),this):""!=t.trim()?_xyt.attr(this.domList,t):void 0},prop:function(t,e){if(null!=t)return null!=e||"object"==typeof t?(_xyt.prop(this.domList,t,e),this):""!=t.trim()?_xyt.prop(this.domList,t):void 0},data:function(t,e){if(null!=t)return 2<=arguments.length?(_xyt.data(this.domList,t,e),this):_xyt.data(this.domList,t)},removeAttr:function(t){return _xyt.removeAttr(this.domList,t),this},val:function(t){return null==t?_xyt.val(this.domList):(_xyt.val(this.domList,t),this)},remove:function(t){t=_xyt.remove(this.domList,t);return t!=this.domList&&(this.domList=t,this.length=this.domList.length),this},each:function(t){return _xyt.each(this.domList,t),this},css:function(t,e){return null==e&&"object"!=typeof t?_xyt.css(this.domList,t):(_xyt.css(this.domList,t,e),this)},print:function(t){return _xyt.printHTML(t)},debug:function(t){return _xyt.debug(t),this}}),xiyueta.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==0&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==1&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this},addClass:function(t){return _xyt.addClass(this.domList,t),this},hasClass:function(t){return _xyt.hasClass(this.domList,t)},removeClass:function(t){return _xyt.removeClass(this.domList,t),this},wrap:function(t,e){if("function"==typeof t){for(var i=_xyt.each(this.domList,t),r=0;r<=i.length-1;r++)(u=i[r])&&this.wrap(u.value,u.domList);return this}var s=new _XIYUETA,n=0,l=(s.parseHTML(t),s.repairHTML(!1),s.printHTML());t!=l&&s.parseHTML(l);for(r=0;r<=s.htmlArr.length-1;r++)(u=s.htmlArr[r]).lv>n&&2==u.tagpair&&(n=u.lv);for(var h="",o="",a=!1,r=0;r<=s.htmlArr.length-1;r++){var u,f=(u=s.htmlArr[r]).upHtml;"/"==u.label.substr(0,1)&&u.lv==n&&(a=!0,h+=f,f=""),0==a?h+=f+u.html:o+=f+u.html}return null==e&&(e=this.domList),_xyt.wrap(e,h,o),this},unwrap:function(){return _xyt.unwrap(this.domList),this},append:function(t){return _xyt.append(this.domList,t),this},prepend:function(t){return _xyt.prepend(this.domList,t),this},after:function(t){return _xyt.after(this.domList,t),this},before:function(t){return _xyt.before(this.domList,t),this},show:function(){return _xyt.show(this.domList),this},hide:function(){return _xyt.hide(this.domList),this},next:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.next(this.domList),this.length=this.domList.length,this},nextAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.nextAll(this.domList),this.length=this.domList.length,this},prev:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prev(this.domList),this.length=this.domList.length,this},prevAll:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList),this.length=this.domList.length,this},siblings:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.prevAll(this.domList,"asc").concat(_xyt.nextAll(this.domList)),this.length=this.domList.length,this},parent:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parent(this.domList),this.length=this.domList.length,this},parents:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.parents(this.domList),this.length=this.domList.length,this},children:function(){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.children(this.domList),this.length=this.domList.length,this},closest:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.closest(this.domList,t),this.length=this.domList.length,this},filter:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.filter(this.domList,t),this.length=this.domList.length,this},replaceWith:function(t){var e;return"object"==typeof(t=null==t?"":t)&&null!=t.domList&&(e=t.domList,t=_xyt.htmlwrap(t.domList,""),_xyt.remove(e)),this.htmlwrap(t),this},index:function(){return("array"==_xyt.toType(this.domList)?this.domList[0]:this.domList).index},get:function(t){var e;return 1<=arguments.length?(e=[],"array"==_xyt.toType(this.domList)?e=this.domList:e.push(this.domList),e[t=t<0?e.length+t:t]):0!=this.domList.length?this.domList:void 0},toArray:function(){return this.domList},empty:function(){return this.html("")},htmlwrap:function(t){return 1<=arguments.length?(_xyt.htmlwrap(this.domList,t),this):_xyt.htmlwrap(this.domList)},dom:function(t){return _xyt.dom(this.domList,"",t)},domwrap:function(t){return _xyt.dom(this.domList,"all",t)},domlabel:function(t,e){return _xyt.dom(this.domList,"label|",t,e)},domlabelwrap:function(t,e){return _xyt.dom(this.domList,"all|label",t,e)},getlabel:function(){return _xyt.getLabel(this.domList)},getlv:function(){return _xyt.getlv(this.domList)},findlv:function(t){return this.find(":lv("+t+")"),this}}),function(t){"use strict";this.cssSource=t=null==t?"":t,this.cssArr=[],this.common=new XiyuetaCommon,this.lv=0,this.config={parentdir:"../",imagesdir:"images/"};for(var e={},i="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),r=0;r<i.length;r++){var s=i[r];e["[object "+s+"]"]=s.toLowerCase()}this.toType=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?e[Object.prototype.toString.call(t)]||"object":typeof t},this.cssParse=function(t){null!=t&&(this.cssSource=t,this.cssArr=[]);for(var e,i="",r="",s="",n="",l=!1,h=!1,o=!1,a=!1,u=!1,f=0,m=-1,d=0;d<=this.cssSource.length-1;d++)e=i,i=this.cssSource.substr(d,1),l?(s+=i,o?"/"==i&&"*"==e&&(l=o=!1,this.cssArr.push({_index:++m,lv:1,label:"/*",upHtml:n,downHtml:"",html:s}),n=s=""):h&&"*"==i&&"/"==e?o=!0:a?!u||";"!=i&&"\n"!=i?" "==i&&h?"@charset "==s.toLowerCase()||"@import "==s.toLowerCase()?h=!(u=!0):"@font-face "==s.toLowerCase()&&(a=!1):"{"==i&&("@font-face{"==s.toLowerCase()?a=!1:(a=l=h=!1,this.cssArr.push({_index:++m,lv:1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),f++,n=s="")):(a=l=h=u=!1,this.cssArr.push({_index:++m,lv:1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),n=s=""):"{"==i&&h?h=!1:"}"==i&&(l=h=!1,this.cssArr.push({_index:++m,lv:f+1,label:r.toLowerCase().replace(/ /g,"").trim(),upHtml:n,downHtml:"",html:s}),n=s=""),h&&(r+=i)):" "!=i&&";"!=i&&"\n"!=i&&"\t"!=i?"}"==i&&1==f?(this.cssArr.push({_index:++m,lv:f,label:"}",upHtml:n,downHtml:"",html:"}"}),n=s="",f--):(n=s,h=l=!0,"@"==(r=s=i)&&(a=!0)):s+=i;""!=s&&this.cssArr.push({_index:++m,lv:f,label:"",upHtml:"",downHtml:"",html:s}),this.lv=f},this.handleLabelParam=function(t,e,i){if(null==e&&(e="(all)"),null==i&&null!=t[e])return t[e];var r,s="";-1!=e.indexOf("|")&&(e=(r=e.split("|"))[0],s=r[1],""==e&&(e="(all)"));for(var n=!1,l="",h="",o=!1,a="",u=!1,f=!0,m=0,d=0,c=!1,g="",p=t.html.indexOf("{")+1;p<=t.html.length-1;p++){var x=t.html.substr(p,1);if(o)if(u){if(0!=(c=1==c&&")"==x?!1:c)||x!=a&&"}"!=x&&p!=t.html.length-1)h+=x,"("==x&&(c=!0);else if(t[l=l.toLowerCase().trim()]=h,u=o=!1,a="",e==l||"(all)"==e)if(null==i){if("url"!=s)return h;""!=(h=this.cssSrcUrl(h))&&(""!=g&&(g+="\n"),g+=h)}else{if(""==i)return v=t.html.substr(0,d),L=-1<(L=t.html.substr(p).indexOf(";"))?t.html.substr(p+L+1):t.html.substr(p),t.html=v+L,t;var y=m,b=m+h.length,v=(f&&(y++,b++),t.html.substr(0,y)),L=t.html.substr(b);if("url"!=s)return t.html=v+i+L,t[l]=i,t;y=this.cssSrcUrl(h,i);if(""!=y)return""!=g&&(g+="\n"),g+=y,t.html=v+y+L,p=(v+(t[l]=y)).length,t}}else" "!=x&&(a=";",m=p,f=!(u=!0),h=x);else n?":"==x?(o=!(n=!1),a=h=""):" "!=x&&(l+=x):" "!=x&&(n=!0,l=x,d=p)}if(null!=i&&""!=i&&""==s){for(var _=e+": "+i+";",A=t.html.length-1;0<=A;A--)if(" "!=(x=t.html.substr(A,1))&&"}"!=x){if(";"==x)break;if("{"==x)break;_="; "+_;break}t.html=t.html.replace("}",_+"}")}return g=""==g?void 0:g},this.getDocument=function(t,e,i){null==e&&(e=0),null==i&&(i=this.cssArr.length-1);var r=-1.1,s=-1.1,n=-1.1,l=-1.1,h="",o="",a="",u="",f="";if(t=(t=null==t?"":t).trim(),0==this.cssArr.length)return console.log("%c 需要先解析一段css文本","font-size:14px;color:#FF3300"),"";if(-1!=t.indexOf("'")||-1!=t.indexOf('"')||-1!=t.indexOf("(")){for(var m=!1,d="",c=0;c<=t.length;c++){var g=t.substr(c,1);0!=m||"'"!=g&&'"'!=g&&"("!=g&&")"!=g?1==m?" "==g?g="-Space-":"'"!=g&&'"'!=g&&"("!=g&&")"!=g||(m=!1,"'"!=g&&'"'!=g||(g="")):" "==g&&(g=""):(m=!0,"'"!=g&&'"'!=g||(g="")),d+=g}t=d}var p=t.indexOf(":");-1!=p&&(b=v="",y=(g=t.substr(p+1)).indexOf("("),x=g.indexOf(")"),-1!=y&&-1!=x?(v=g.substr(0,y).toLowerCase(),x=(b=g.substr(y+1)).indexOf(")"),b=b.substr(0,x).replace(/-Space-/g," ").trim()):v=g.toLowerCase(),"first"==v?r=0:"last"==v?r=-1:"even"==v?s=1:"odd"==v?s=0:"eq"==v?(r=0,(r=""!=b?parseInt(b):r)+""=="NaN"&&(r=-.1,t="")):"gt"==v?""!=b&&(n=parseInt(b)):"lt"==v?""!=b&&(l=parseInt(b)):"contains"==v?h=b:console.log(t,"没有动作 "+v),""==(t=t.substr(0,p))&&-.1!=r&&(t="(all)"));-1!=(p=t.indexOf("["))&&(x=(g=t.substr(p+1)).indexOf("]"),-1==(g=g.substr(0,x)).indexOf("=")?(o=g,a="*"):(o=(y=g.split("="))[0],a=y[1].replace(/-Space-/g," "),b=o.substr(o.length-1),-1!="!^$*~|".indexOf(b)&&(o=o.substr(0,o.length-1),u=b)),-1!=o.indexOf("|")&&(o=(v=o.split("|"))[0],"NOUL"==v[1]&&(a=a.toLowerCase(),f=v[1])),""==(t=t.substr(0,p))&&(t="(all)")),t=t.replace(/ /g,"");for(var x,y,b,v,d="",c=e;c<=i;c++){var L=this.cssArr[c];null!=L&&(t==L.label||"(all)"==t&&""!=L.label)&&(d+=","+c)}if(""!=d&&-1.1!=r){var _=d.split(",");""!=(d=r<0?_[_.length+r]:_[r+1])&&(d=","+d)}else if(""!=d&&-1.1!=s){_=d.split(",");d="";for(c=1;c<=_.length-1;c++)c%2==s&&(d+=","+_[c])}else if(""!=d&&-1.1!=n){_=d.split(",");d="";for(c=n+2;c<=_.length-1;c++)d+=","+_[c]}else if(""!=d&&-1.1!=l){_=d.split(",");d="",l>_.length-1&&(l=_.length-1);for(c=1;c<=l;c++)d+=","+_[c]}else if(""!=d&&""!=h){_=d.split(",");d="";for(c=1;c<=_.length-1;c++){g=_[c];-1!=this.text(","+g).indexOf(h)&&(d+=","+_[c])}}else if(""!=o){_=d.split(",");d="";for(c=1;c<=_.length-1;c++){var A=_[c],w=!0,g=this.css(domList=","+A);"NOUL"==f&&null!=g&&(g=g.toLowerCase()),"^"==u?null!=g&&g.substr(0,a.length)==a||(w=!1):"|"==u?null!=g&&(g+"-").substr(0,a.length+1)==a+"-"||(w=!1):"$"==u?null!=g&&g.substr(-1*a.length)==a||(w=!1):"~"==u?null!=g&&-1!=(" "+g+" ").indexOf(" "+a+" ")||(w=!1):"*"==u?null!=g&&-1!=g.indexOf(a)||(w=!1):"!"==u?g==a&&(w=!1):null!=g&&"*"==a?w=!0:g!=a&&(w=!1),w&&(d+=","+A)}}for(var C=d.split(","),O=[],c=0;c<C.length;c++)""!=C[c]&&O.push({index:C[c],x:C[c],y:C[c]});return O},this.handleDomList=function(t){return"object"==this.toType(t)?null!=t.domList?t.domList:null!=t._index?[{index:t._index,x:t._index,y:t._index}]:[t]:"string"==this.toType(t)?this.getDocument(t):t},this.each=function(t,e){if("function"!=typeof e)return!1;t=this.handleDomList(t);for(var i=[],r=0;r<t.length;r++){var s=t[r],n=e.call(s,r,s);if(s.value=n,i.push(s),"boolean"==typeof n&&0==n)break}return i},this.text=function(t,e){var i="get",t=this.handleHtmlText(t,e,"text",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.html=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"html",i)},this.htmlwrap=function(t,e){var i=2<=arguments.length?"set":"get";return this.handleHtmlText(t,e,"htmlwrap",i)},this.getBackground=function(t,e){var i="get",t=this.handleHtmlText(t,e,"background",i=2<=arguments.length?"set":i);return t=null==t?"":t},this.handleHtmlText=function(t,e,i,r){if(null!=t){t=this.handleDomList(t);var s=this.toType(e);if("function"==s){for(var n=this.each(t,e),l=0;l<n.length;l++)n[l]&&this.handleHtmlText(n[l],n[l].value,i,r);return!1}if("set"==r){if("undefined"==s)return;null==e?e="":e+=""}for(var h="",l=0;l<t.length;l++){var o=this.cssArr[t[l].index];if(null!=o)if("htmlwrap"==i){if("get"==r)return o.html;o.html=e}else if("background"==i){var a,u=this.css(o,"background");"get"==r?null!=u&&(a=this.cssSrcUrl(u),h+=this.handleClearBackground(a)):null!=u&&(a=u,"server="==e.substr(0,7)?(a=this.handleClearBackground(a),e=this.common.fullHttpUrl(e.substr(7),a)):"dir="==e.substr(0,4)&&(a=this.handleClearBackground(a),e=e.substr(4)+this.common.getUrlFileName(a)),e=this.cssSrcUrl(u,e),this.css(o,"background",e))}else if("@charset"==o.label)if("get"==r){if(h+=o.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim(),"html"==i)return h}else o.html='@charset "'+e+'";';else if("@import"==o.label)if("get"==r){u=(u=o.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim();if(h+=u=this.handleClearBackground(u),"html"==i)return h}else o.html='@import url("'+e+'");';else{var f=o.html.indexOf("{"),m=o.html.indexOf("}");if("get"==r){if(-1!=f&&-1!=m&&(h+=o.html.substr(f+1,m-f-1)),"html"==i)return h}else o.html=o.html.substr(0,f+1)+e+"}"}}return h}},this.css=function(t,e,i){if(null!=t){t=this.handleDomList(t);var r=this.toType(i);if("function"==r){for(var s=this.each(t,i),n=0;n<s.length;n++)s[n]&&this.css(s[n],e,s[n].value);return!1}var l=3<=arguments.length?"set":"get";if("set"==l){if("undefined"==r)return;null==i?i="":i+=""}for(n=0;n<t.length;n++){var h=this.cssArr[t[n].index];if(null!=h){if("get"==l)return this.handleLabelParam(h,e);this.handleLabelParam(h,e,i)}}}},this.remove=function(t){if(null!=t){t=this.handleDomList(t);for(var e=0;e<t.length;e++){var i=this.cssArr[t[e].index];null!=i&&(i.html="",i.label="<del>")}return this}},this.getsrc=function(t,e){if(null!=t){t=this.handleDomList(t);for(var i="",r=0;r<t.length;r++){var s=this.cssArr[t[r].index];if(null!=s){var s=this.text(s),n=this.cssSrcUrl(s),n=this.handleClearBackground(n);if(null!=e)for(var l=n.split(","),h=0;h<=l.length-1;h++)""!=(n=l[h])&&("server="==e.substr(0,7).toLowerCase()?n=this.common.fullHttpUrl(e.substr(7),n):"dir="==e.substr(0,4).toLowerCase()?n=e.substr(4)+this.common.getUrlFileName(n):"filename"==e.substr(0,8).toLowerCase()&&(n=this.common.getUrlFileName(n)),""!=i&&(i+=","),i+=n);else""!=n&&(""!=i&&(i+=","),i+=n)}}return i}},this.setsrc=function(t,e,i){if(null!=t){t=this.handleDomList(t);var r=this.toType(e);if("function"==r){for(var s=this.each(t,e),n=0;n<s.length;n++)s[n]&&this.setsrc(s[n],s[n].value);return!1}if("undefined"!=r){null==e?e="":e+="";for(n=0;n<t.length;n++){var l=this.cssArr[t[n].index];if(null!=l){for(var h="",o=this.text(l),a=o.split(";"),u=0;u<=a.length-1;u++){var f=a[u];""!=h&&(h+=";"),h+=this.cssSrcUrl(f,e)}o!=h&&this.text(l,h)}}return this}}},this.handleClearBackground=function(t){var e=t.indexOf("(");if(-1==(t=-1!=(e=(t=-1!=e?t.substr(e+1):t).indexOf(")"))?t.substr(0,e):t).indexOf("'")&&-1==t.indexOf('"')&&-1==t.indexOf("("))return t;for(var i=!1,r="",s=0;s<=t.length;s++){var n=t.substr(s,1);0!=i||"'"!=n&&'"'!=n&&"("!=n&&")"!=n?1==i?"'"!=n&&'"'!=n&&"("!=n&&")"!=n||(i=!1,"'"!=n&&'"'!=n||(n="")):" "==n&&(n=""):(i=!0,"'"!=n&&'"'!=n||(n="")),r+=n}return r.trim()},this.cssSrcUrl=function(t,e){if(-1==t.indexOf(","))return this.handleCssSrcUrl(t,e);for(var i=t.split(","),r="",s=0;s<i.length;s++){var n=i[s];""!=(n=this.handleCssSrcUrl(n,e))&&(""!=r&&(r+=","),r+=n)}return r},this.handleCssSrcUrl=function(t,e){if(null==t)return"";if(null==e){if(-1==t.indexOf("(")||-1==t.indexOf(")"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:"";if(-1==t.toLowerCase().indexOf("url"))return null!=e&&"dir="!=e.substr(0,4)&&"server="!=e.substr(0,7)?t:""}for(var i="",r=!1,s=!1,n="",l=-1,h=0;h<=t.length-1;h++){var o=t.substr(h,1);if(r)if(s){if(n==o){var a=t.substr(l,h-l);if(null!=e)if("server="==e.substr(0,7)){if(-1!=a.indexOf("data:"))return t;a=t.substr(0,l)+this.common.fullHttpUrl(e.substr(7),a)+t.substr(h)}else if("dir="==e.substr(0,4)){if(-1!=a.indexOf("data:"))return t;a=t.substr(0,l)+e.substr(4)+xiyueta.getUrlToFileName(a)+t.substr(h)}else-1==a.indexOf("data:")&&(a=t.substr(0,l)+e+t.substr(h));return a}}else""!=o&&('"'==o||"'"==o?(s=!0,n=o,-1==l&&(l=h+1)):" "!=o&&(s=!0,n=")",-1==l&&(l=h)));else if("("==o){a=i.trim().toLowerCase();if("url"==a.substr(a.length-3,3))r=!0;else if(null==e)return""}else i+=o}return t},this.after=function(t,e){if(null!=t){t=this.handleDomList(t);var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.after(r[s],r[s].value);return!1}if("undefined"!=i){null==e?e="":e+="";for(s=0;s<t.length;s++){var n=this.cssArr[t[s].index];null!=n&&null!=e&&(n.downHtml+=e)}return this}}},this.before=function(t,e){if(null!=t){t=this.handleDomList(t);var i=this.toType(e);if("function"==i){for(var r=this.each(t,e),s=0;s<r.length;s++)r[s]&&this.before(r[s],r[s].value);return!1}if("undefined"!=i){null==e?e="":e+="";for(s=0;s<t.length;s++){var n=this.cssArr[t[s].index];null!=n&&null!=e&&(n.upHtml+=e)}return this}}},this.handleCssCharset=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var i=this.cssArr[e];if(null!=i)if("@charset"==i.label)return null!=t?(i.html='@charset "'+t+'";',""):i.html.substr(9).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase()}return""},this.handleCssImport=function(t){for(var e=0;e<=this.cssArr.length-1;e++){var i=this.cssArr[e];if(null!=i&&"@import"==i.label){if(null!=t)return i.html='@import url("'+t+'");',"";i=(i=i.html.substr(8)).replace(/"/g,"").replace(/'/g,"").replace(/;/g,"").trim().toLowerCase();return i=this.handleClearBackground(i)}}return""},this.setConfig=function(t){if(null==t)return this.config;if(null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir,null!=t.cssdir)){for(var e=t.cssdir.split("/"),i="",r=0;r<=e.length-2;r++)i+="../";this.config.parentdir=i}null!=t.parentdir&&(this.config.parentdir=t.parentdir)},this.printCss=function(t){for(var e="",i=0;i<=this.cssArr.length-1;i++){var r,s=this.cssArr[i];null!=s&&(r=s.upHtml+s.html+s.downHtml,"zip"==t?r="/*"==s.label?"":r.replace(/  /g," ").replace(/  /g," ").replace(/{ /g,"{").replace(/ {/g,"{").replace(/\n/g,"").trim():"format"==t&&(r=r.trim()+"\n"),""!=r&&(e+=r))}return e},this.debug=function(t){((t=null==t?!1:t)?xiyueta:console).log(this.cssArr)},this.eq=function(t,e){return t=this.handleDomList(t),"array"!=this.toType(t)?[]:(null==e||""==e?e=0:(e=parseInt(e))+""=="NaN"&&(e=-1.1),-1.1!=e?(e=e<0?t.length+e:e)>t.length?"":[t[e]]:[])}}),_xytcss=new _XIYUETACSS,xiyuetaCss=function(t,e,i){return new xiyuetaCss.fn.init(t,e,i)};function XiyuetaCommon(){this.copyStr=function(t,e){for(var i="",r=1;r<=e;r++)i+=t;return i},this.timeFormat=function(t,e){var i,r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return e},this.secondToDate=function(t){t=parseFloat(t)/1e3;return t=null!=t&&""!=t?60<t&&t<3600?parseInt(t/60)+" 分钟 "+parseInt(60*(parseFloat(t/60)-parseInt(t/60)))+" 秒 ":3600<=t&&t<86400?parseInt(t/3600)+" 小时 "+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+" 分钟 "+parseInt(60*(parseFloat(60*(parseFloat(t/3600)-parseInt(t/3600)))-parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))))+" 秒 ":parseInt(t)+" 秒 ":t},this.bystesLength=function(t){for(var e=0,i=0;i<t.length;i++)255<t.charCodeAt(i)?e+=2:e++;return e},this.getFileSize=function(t){return t<1048576?(t/1024).toFixed(2)+"KB":1048576==t?"1MB":1048576<t&&t<1073741824?(t/1048576).toFixed(2)+"MB":1048576<t&&1073741824==t?"1GB":1073741824<t&&t<1099511627776?(t/1073741824).toFixed(2)+"GB":"文件超过1TB"},this.renderSize=function(t){if(null==t||""==t)return"0 Bytes";var e=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),t=parseFloat(t),i=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,i)).toFixed(2)+e[i]},this.isArray=function(t){return"object"==typeof t&&t.constructor==Array}}xiyuetaCss.fn=xiyuetaCss.prototype={length:0,selector:"",docList:void 0,x:null,y:null},xiyuetaCss.extend=xiyuetaCss.fn.extend=function(){var t,e,i,r=arguments[0]||{},s=1,n=arguments.length;for(s===n&&(r=this,s--);s<n;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&void 0!==i&&(r[e]=i);return r},(init=xiyuetaCss.fn.init=function(t,e,i){this.length=0,this.selector=t,this.domList=void 0,this.x=e,this.y=i,this.domListArray=[],0<_xytcss.cssArr.length&&("string"==typeof t?(this.domList=_xytcss.getDocument(t,e,i),this.length=this.domList.length):"object"==typeof t&&(this.domList=t,this.length=1,this.selector="")),null==this.selector&&(this.selector="")}).prototype=xiyuetaCss.fn,(xiyuetaCSS=$xytcss=$css=xiyuetaCss).fn.extend({parse:function(t){return _xytcss.cssParse(t),0<_xytcss.cssArr.length&&"string"==typeof this.selector&&(this.domList=_xytcss.getDocument(this.selector,this.x,this.y),this.length=this.domList.length),this},each:function(t){return _xytcss.each(this.domList,t),this},text:function(t){return 1<=arguments.length?(_xytcss.text(this.domList,t),this):_xytcss.text(this.domList)},html:function(t){return 1<=arguments.length?(_xytcss.html(this.domList,t),this):_xytcss.html(this.domList)},htmlwrap:function(t){return 1<=arguments.length?(_xytcss.htmlwrap(this.domList,t),this):_xytcss.htmlwrap(this.domList)},css:function(t,e){return 2<=arguments.length?(_xytcss.css(this.domList,t,e),this):_xytcss.css(this.domList,t)},background:function(t){return 1<=arguments.length?(_xytcss.getBackground(this.domList,t),this):_xytcss.getBackground(this.domList)},remove:function(){return _xytcss.remove(this.domList),this},getsrc:function(t){return _xytcss.getsrc(this.domList,t)},setsrc:function(t){return _xytcss.setsrc(this.domList,t),this},after:function(t){return _xytcss.after(this.domList,t),this},before:function(t){return _xytcss.before(this.domList,t),this},print:function(t){return _xytcss.printCss(t)},debug:function(t){return _xytcss.debug(t)}}),xiyuetaCSS.fn.extend({eq:function(t){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.eq(this.domList,t),this.selector="",this.length=0,""!=this.domList&&(this.length=1),this},first:function(){return this.eq(0),this},last:function(){return this.eq(-1),this},even:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==0&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},odd:function(){this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector});for(var t,e=-1,i=[],r=0;r<this.domList.length;r++)r%2==1&&((t=this.domList[r]).index=++e,i.push(t));return this.domList=i,this.length=i.length,this},slice:function(t,e){return this.domListArray.push({domList:this.domList,length:this.length,selector:this.selector}),this.domList=_xyt.slice(this.domList,t,e),this.length=this.domList.length,this},end:function(){var t;return this.domListArray.length<=0?(this.domList="",this.length=0,this.selector=""):(t=this.domListArray[this.domListArray.length-1],this.domList=t.domList,this.length=t.length,this.selector=t.selector,this.domListArray.pop()),this}}),xiyuetaCSS.debug=function(t){return xiyuetaCSS().debug(t)},xiyuetaCSS.load=function(t,e){return xiyuetaCSS().parse(t,e),this},xiyuetaCSS.html=function(t){return _xytcss.printCss(t)},xiyuetaCSS.charset=function(t){return _xytcss.handleCssCharset(t)},xiyuetaCSS.config=function(t){return _xytcss.setConfig(t)},xiyuetaCSS.lv=function(){return _xytcss.lv},_XIYUETA.prototype.checkTagAttrExist=function(t,e){null==this.tagNameAttrArr&&(this.tagNameAttrArr=[{name:"|a|",value:"|id|class|name|style|href|title|type|shape|coords|target|",count:1},{name:"|map|",value:"|id|class|name|style|title|",count:1},{name:"|area|",value:"|id|class|style|href|title|alt|shape|coords|target|",count:1},{name:"|img|",value:"|id|class|name|style|src|title|alt|width|height|border|",count:1},{name:"|audio|",value:"|id|class|style|src|title|loop|",count:1},{name:"|base|",value:"|id|class|style|href|title|target|",count:1},{name:"|body|",value:"|id|class|style|title|background|",count:1},{name:"|basefont|",value:"|id|class|style|title|color|size|",count:1},{name:"|button|",value:"|id|class|name|style|title|type|",count:1},{name:"|video|",value:"|id|class|style|src|title|loop|width|height|",count:1},{name:"|input|",value:"|id|class|name|style|src|title|alt|type|width|height|",count:1},{name:"|select|",value:"|id|class|name|style|title|size|",count:1},{name:"|form|",value:"|id|class|name|style|title|action|method|target|",count:1},{name:"|table|table|",value:"|id|class|style|title|width|border|",count:2},{name:"|ol|ul|li|",value:"|id|class|style|title|type|",count:3},{name:"|td|canvas|th|td|",value:"|id|class|style|title|width|height|",count:4},{name:"|abbr|acronym|address|div|span|b|p|br|tr|article|h1|h2|h3|h4|h5|h6|h7|h8|h9|aside|head|title|bdi|bdo|big|blockquote|caption|center|cite|em|strong|dfn|code|samp|kbd|var|wbr|",value:"|id|class|style|title|",count:37}]);for(var i=0;i<this.tagNameAttrArr.length;i++){var r=this.tagNameAttrArr[i];if(-1<r.name.indexOf("|"+t+"|")&&-1<r.value.indexOf("|"+e+"|"))return!0}return-1<"|id|class|title|style|".indexOf("|"+e+"|")},_XIYUETA.prototype.swap=function(t,e){if(null==t||null==e)return!1;"object"==this.toType(t)&&(t=[t]);var i=[],i="object"==this.toType(i)?null!=i.domList?i.domList:[i]:this.getDocument(e);if(0==t.length||0==i.length||t==i)return!1;var e=t[0],t=i[0],i=this.htmlwrap(e),r=this.htmlwrap(t);return this.htmlwrap(e,r),this.htmlwrap(t,i),!0},_XIYUETA.prototype.getItem=function(t,e){if(null==t)return"";null==e&&(e=""),"object"==this.toType(t)&&(t=[t]);for(var i=[],r=0;r<t.length;r++){obj=t[r];var s=!0;""!=e?(obj.value=this.handleLabelParam(this.htmlArr[obj.x],e),null==obj.value&&(s=!1)):obj.value=this.htmlwrap(obj),s&&i.push(obj)}return i},_XIYUETA.prototype.setConfig=function(t){if(null==t)return this.config;null!=t.httpurl&&(this.config.httpurl=t.httpurl),null!=t.serverurl&&(this.config.serverurl=t.serverurl),null!=t.jsdir&&(this.config.jsdir=t.jsdir),null!=t.cssdir&&(this.config.cssdir=t.cssdir),null!=t.imagesdir&&(this.config.imagesdir=t.imagesdir),null!=t.urlToNameList&&(this.config.urlToNameList=t.urlToNameList),null!=t.urlDefaultFileName&&(this.config.urlDefaultFileName=t.urlDefaultFileName)},_XIYUETA.prototype.charset=function(t){for(var e=0;e<=this.htmlArr.length-1;e++){var i=this.htmlArr[e];if(null!=i)if("meta"==i.label)if(-1!=i.html.toLowerCase().indexOf("charset=")){var r=this.handleLabelParam(i,"charset");if(null!=(r=null!=r?r.toLowerCase().trim():r))return null!=t&&this.handleLabelParam(i,"charset",t),r;if(-1!=(r=null!=(r=this.handleLabelParam(i,"content"))?r.toLowerCase().trim():r).indexOf("utf-8"))return null!=t?(this.handleLabelParam(i,"content","text/html; charset="+t),""):"utf-8";if(-1!=r.indexOf("gb2312"))return null!=t?(this.handleLabelParam(i,"content","text/html; charset="+t),""):"gb2312"}}},_XIYUETA.prototype.getHandleSrc=function(t,e,i,r){for(var s="",n=!0,l=0;l<=this.htmlArr.length-1;l++){var h,o,a,u=this.htmlArr[l];null!=u&&-1!=("|"+t+"|").indexOf("|"+u.label+"|")&&(null==(h=this.handleLabelParam(u,e))&&(h=""),"link"!=u.label||"dns-prefetch"!=(o=(o=null==(o=this.handleLabelParam(u,"rel"))?"":o).trim().toLowerCase())&&"alternate"!=o||(h=""),-1!=("|"+i+"|").indexOf("clean")?(n=!0,""!=h&&-1==h.indexOf("apps.bdimg.com/")&&(a=h=this.common.fullHttpUrl(r,h),-1!=("|"+i+"|").indexOf("web")&&""!=(h=this.common.getUrlFileName(h,u.label))&&("img"==u.label?h=this.config.imagesdir+h:"script"==u.label?h=this.config.jsdir+h:"link"==u.label?-1!=(o=(o=null==(o=this.handleLabelParam(u,"rel"))?"":o).trim().toLowerCase()).indexOf("shortcut icon")?h=this.config.imagesdir+h:-1!=o.indexOf("stylesheet")?h=this.config.cssdir+h:(h="",n=!1):(n=!1,h="")),n&&""!=h&&(-1!=("|"+i+"|").indexOf("down")?(""!=s&&(s+="[,]"),s+=a+"[|]"+h):(""!=s&&(s+="[,]"),s+=h)),this.handleLabelParam(u,e,h))):""!=h&&(""!=s&&(s+="[,]"),s+=h))}return s},_XIYUETA.prototype.replace=function(t,e,i,r){for(var s,n=this.getDocument(t),l=n.split(","),h=1;h<=l.length-1;h++)s=-1!=(n=l[h]).indexOf("|")?(s=n.split("|"),this.htmlArr[s[0]]):this.htmlArr[n],""!=e&&(n=this.handleLabelParam(s,e))==i&&this.handleLabelParam(s,e,r)},_XIYUETA.prototype.repairHTML=function(t,e){null==t&&(t=!1),null==e&&(e=0);var i=0,r=!1,s="",n=0,l=",";if(1<=this.htmlArr.length&&"no"==(h=this.htmlArr[0]).isFindDom)return!1;for(var h,o=0;o<=this.htmlArr.length-1;o++)(h=this.htmlArr[o])&&2==h.tagpair&&("/"==h.label.substr(0,1)?(f=h.label.substr(1),-1!=(","+l+",").indexOf(","+f+",")?l=l.replace(","+f+",",","):l+=h.label+","):l+=h.label+",");for(var a=l,o=0;o<this.htmlArr.length;o++)if((h=this.htmlArr[o])&&2==h.tagpair&&"/"==h.label.substr(0,1)){var u,f=h.label.substr(1),r=!0;if(null!=(u=this.upFindSameLvObj(o,h))&&(h.label=="/"+u.label?(r=!1,this.setNoFindDom(u._index,h._index),1==e&&console.log(" 找(Lv1) "+h.label+" "+u.label+"("+h._index+"-"+u._index+")")):0==this.lv||1==u.lv&&1==h.lv&&-1==l.indexOf(","+h.label+",")?1==r&&(s="",t&&(s="\x3c!--xiyueta提示: 原标签(LV) "+h.label+" 替换成 /"+u.label+"--\x3e"),h.html="</"+u.label+">"+s,i+=2,n+=2,r=!1,this.setNoFindDom(u._index,h._index),1!=e&&2!=e||console.log(" 找(Lv2) LV整体层级正确或两标签都为第一层  "+h.label+" 替换成 /"+u.label+" ("+h._index+"-"+u._index+")")):1==e&&console.log(" 找(Lv else) 没找到，交给下面找同名 "+h.label+" ("+h._index+")")),1==r)if(null==(u=this.upFindSameNameObj(o,h)))h.html=t?"\x3c!---xiyueta提示: 有多余结束标签 "+h.label+" --\x3e":"",n++,i++,this.setNoFindDom(h._index,h._index),this.reairHtmlLv(h,1),1!=e&&2!=e||console.log(" 找(Name 出错) 有多余结束标签 "+h.label+" ("+h._index+")"),r=!1,l=l.replace(","+h.label+",",",");else{s="",t&&(u.html+="\x3c!---xiyueta提示: 有问题标签开始位置--\x3e",h.html="\x3c!---xiyueta提示: 有问题标签结束位置--\x3e"+h.html),1!=e&&2!=e||console.log(" 找(Name2 有问题) "+h.label+" 与 "+u.label+"("+h._index+"-"+u._index+") 之间有问题 ");var m="",d=(this.setNoFindDom(u._index,h._index),u.lv-h.lv);this.reairHtmlLv(h,d);for(var c=u._index+1;c<=h._index;c++){var g=this.htmlArr[c];if(g&&"/"!=g.label.substr(0,1)&&2==g.tagpair){var x=!1;for(p=g._index+1;p<=h._index;p++){var y=this.htmlArr[p];if(y&&2==y.tagpair&&"/"==y.label.substr(0,1)&&y.lv==g.lv){x=!0;break}}0==x&&(m+="</"+g.label+">",t&&(m+="\x3c!--xiyueta提示: 追加 /"+g.label+" --\x3e"),1!=e&&2!=e||console.log(" 找(Name3)  追加结束标签 /"+g.label+" ("+g._index+")"),n++,i++,l=l.replace(","+g.label+",",","))}}h.upHtml+=m}}var b=l.split(",");if(b.length>i){m="";for(o=0;o<b.length;o++)""!=b[o]&&"/"!=b[o].substr(0,1)&&(s="",t&&(s="\x3c!--xiyueta提示: 追加 /"+b[o]+" --\x3e"),m="</"+b[o]+">"+s+m,n++,i++,1!=e&&2!=e||console.log(" 最后  追加结束标签 /"+b[o]));this.htmlArr[this.htmlArr.length-1].downHtml+=m}return{lv:this.lv,err:n,repair:i,state:n==i,errList:a=","==a?"":a}},_XIYUETA.prototype.setNoFindDom=function(t,e){for(var i=t;i<=e;i++){var r=this.htmlArr[i];r&&(r.isFindDom="no")}return null},_XIYUETA.prototype.upFindSameLvObj=function(t,e){for(var i=t-1;0<=i;i--){var r=this.htmlArr[i];if(r&&"no"!=r.isFindDom&&e.lv==r.lv)return r}return null},_XIYUETA.prototype.upFindSameNameObj=function(t,e){for(var i=t-1;0<=i;i--){var r=this.htmlArr[i];if(r&&"no"!=r.isFindDom&&e.label=="/"+r.label)return r}return null},_XIYUETA.prototype.reairHtmlLv=function(t,e){for(var i=t._index;i<=this.htmlArr.length-1;i++)(t=this.htmlArr[i])&&(t.lv+=e)},_XIYUETA.prototype.htmlColor=function(t){if("</"==t.substr(0,2))return"<font color='#800000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";if("<"!=t.substr(0,1))return"<font color='#000000'>"+t+"</font>";if("\x3c!--"==t.substr(0,4))return"<font color='#008000'>"+t.replace("<","&lt;").replace(">","&gt;")+"</font>";for(var e="",i="",r="",s=!1,n="",l="",h="",o=0;o<=t.length-1;o++){var a=t.substr(o,1);"findValueStart"==n?(s?a==r||">"==a?(l+=h+"<font color='#0000FF'>"+i+h+"</font>",s=!1,h=r=h="",n="findParamStart"):i+=a:'"'==a||"'"==a?(h+=a,r=a,s=!0):" "!=a?(r=" ",i=a,s=!0):h+="&nbsp;",">"==a&&(l+="<font color='#800000'>&gt;</font>")):"<"==a?(h="&lt;",n="findLabel"):"findLabel"==n?" "==a?(l+="<font color='#800000'>"+h+"</font> ",h="",n="findParamStart"):">"==a?l+="<font color='#800000'>"+h+"&gt;</font>":h+=a:">"==a?l+="<font color='#800000'>&gt;</font>":"findParamEnd"==n?"="==a?(n="findValueStart",l+="<font color='#FF0000'>"+e+"</font><font color='#000000'>=</font>",e=r=i=""):e+=a=" "==a?"&nbsp;":a:(n="findParamEnd",e+=a=" "==a?"&nbsp;":a)}return l},xiyueta.fullurl=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.resolve=function(t,e){return _xyt.common.fullHttpUrl(t,e)},xiyueta.getUrlDir=function(t,e){return _xyt.common.getUrlDir(t,e)},xiyueta.getUrlFileName=function(t,e){return _xyt.common.getUrlFileName(t,e)},xiyueta.getUrlToFileName=function(t,e,i){return _xyt.common.getUrlToFileName(t,e,i)},xiyueta.bystesLength=function(t){return _xyt.common.bystesLength(t)},xiyueta.renderSize=function(t){return _xyt.common.renderSize(t)},xiyueta.secondToDate=function(t){return _xyt.common.secondToDate(t)},xiyueta.timeFormat=function(t,e){var i=new Date,r="yyyy-MM-dd hh:mm:ss";return 1==arguments.length?"object"==typeof t?i=t:"string"==typeof t&&(r=t):2==arguments.length&&("object"==typeof t&&(i=t),"string"==typeof e&&(r=e)),_xyt.common.timeFormat(i,r)},xiyueta.getDomain=function(t){return _xyt.common.getDomain(t)},xiyueta.htmlColor=function(t){return _xyt.htmlColor(t)},xiyueta.lv=function(){return _xyt.lv},xiyueta.htmlerr=function(){return _xyt.isHtmlErr},xiyueta.config=function(t){t=_xyt.setConfig(t);return null==t?this:t},xiyueta.charset=function(t){return null==t?_xyt.charset():(_xyt.charset(t),this)},xiyueta.toType=function(t){return _xyt.toType(t)},xiyueta.debug=function(t){return xiyueta().debug(t)},xiyueta.load=function(t,e){return xiyueta().parse(t,e),this},xiyueta.html=function(t){return _xyt.printHTML(t)},xiyueta.log=function(t,e){if(null==e&&(e="<br>"),"object"==typeof t)for(var i in t){var r;-1==(t[i]+"").indexOf("function")&&(r=(r=t[i]+"").replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),void 0===(r="object"==typeof t[i]?xiyueta.log(t[i]," , "):r)?document.write(i+e):document.write(i+":  "+r+e))}else t+="",document.write(t.replace(/</g,"&lt;").replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")+e)},xiyueta.fn.extend({swap:function(t){return _xyt.swap(this.domList,t),this},item:function(t){return _xyt.getItem(this.domList,t)},handle:function(t,e,i){return _xyt.getHandleSrc(this.selector,t,e,i)},replace:function(t,e,i){return _xyt.replace(this.selector,t,e,i)},clear:function(){return this},repair:function(t,e){return _xyt.repairHTML(t,e)}}),_XIYUETA.prototype.scan=function(t){t="|"+(t=null==t?"":t)+"|";for(var e=0,i=[],r=!1,s="",n="",l=[],t=this.charset(),s=(s+="网页编码="+(t=null==t?"":t)+"\n")+("网页大小="+this.common.getFileSize(this.common.bystesLength(this.htmlSource))+"\n"),h=0;h<=this.htmlArr.length-1;h++)(f=this.htmlArr[h])&&"/"!=f.label.substr(0,1)&&""!=f.label&&(-1==("|"+n+"|").indexOf("|"+f.label+"|")?(""!=n&&(n+="|"),n+=f.label,l[f.label]=1):l[f.label]++);for(var o=n.split("|"),a="",h=0;h<=o.length-1;h++){var u=o[h];a+=u+"("+l[u]+") "}for(var f=this.repairHTML(),m=(s=(s=(s=(s=(s+="网页LV="+this.lv+"\n")+("网页错误标签数="+f.err+"\n"))+("网页错误标签为="+f.errList+"\n"))+("网页错误标签是否可修复="+f.state+"\n"))+("网页类型标签数="+o.length+"种 "+a+"\n"),this.config.downcss=0,xiyueta("link[rel|NOUL=stylesheet]").item("href")),d=xiyueta("script").item("src"),h=0;h<=this.htmlArr.length-1;h++)null!=(f=this.htmlArr[h])&&("body"==f.label?(e=f.lv,r=!0):0==r&&-1!="|div|span|table|ul|".indexOf("|"+f.label+"|")?(i.push(f.html),r=!0):r&&f.lv-e==1&&2==f.tagpair&&"/"!=f.label.substr(0,1)&&"!--"!=f.label&&"script"!=f.label.substr(0,6)&&i.push(f.html),"link"==f.label&&"stylesheet"==this.attr(f,"rel").toLowerCase().trim()&&this.common.fullHttpUrl(this.config.httpurl,f.href));if(s=(s=(s+="共有CSS文件 "+m.length+" 条\n")+("共有JS文件 "+d.length+" 条\n"))+("一层标签共 "+i.length+" 条\n")+"\n",""!=m){s+="CSS列表:\n";for(h=0;h<m.length;h++)s+=m[h].value+"\n"}if(""!=d){s+="\n\nJS列表:\n";for(h=0;h<=d.length-1;h++)s+=d[h].value+"\n"}if(""!=i){s+="\n\n一层标签列表:\n";for(h=0;h<=i.length-1;h++)s+=i[h]+"\n"}return s},xiyueta.fn.extend({scan:function(t){return _xyt.scan(t)}}),_XIYUETA.prototype.cutLabel=function(t,e){t=this.handleDomList(t);for(var i="",r=0;r<this.htmlArr.length;r++)(l=this.htmlArr[r])&&("/style"==l.label?i+=l.upHtml:"link"==l.label&&"stylesheet"==(this.attr(l,"rel")+"").toLowerCase().trim()&&(i+=l.content));if(0<t.length){var s="",n=new _XIYUETACSS;n.cssParse(i);for(var l,r=0;r<n.cssArr.length;r++)(l=n.cssArr[r])&&this.checkCssInHtml(t,l.label)&&1==l.lv&&(s+=l.html+"\n");xiyuetaCSS().parse(s),""!=(s=xiyuetaCSS().print("format"))&&(s="<style>"+s+"\n</style>\n");var h=xiyueta(t).htmlwrap();return xiyueta.load(h),s+this.printHTML("format")}return""},_XIYUETA.prototype.checkCssInHtml=function(t,e){var i=(t=this.handleDomList(t))[0].x,r=t[0].y,t=e.indexOf("{");e=","+(e=-1<t?e.substr(0,t):e)+",";for(var s=i;s<r;s++){var n=this.htmlArr[s];if(n&&"/"!=n.label.substr(0,1)){var l=",*,",h=",* ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;l=",body,",h=",body ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;l=","+n.label+",",h=","+n.label+" ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0;var o=this.handleLabelParam(n,"id");if(null!=o){l=",#"+o+",",h=",#"+o+" ";if(-1!=e.indexOf(l)||-1!=e.indexOf(h))return!0}if(null!=(f=this.handleLabelParam(n,"class")))for(var a=f.split(" "),u=0;u<a.length;u++){var f,l=",."+(f=a[u])+",",h=",."+f+" ",m=",."+f+"[";if(-1!=e.indexOf(l)||-1!=e.indexOf(h)||-1!=e.indexOf(m))return!0}}return!1}},xiyueta.fn.extend({cutlabel:function(t){return _xyt.cutLabel(this.domList,t)}}),XiyuetaCommon.prototype.handleFileUrl=function(t){var e="",i=t.indexOf("://");if(-1!=i&&(e=t.substr(0,i+3),t=t.substr(i+3)),-1!=(t=-1!=(t=t.replace(/\/\//g,"/")).indexOf("/./")?t.replace(/\/.\//g,"/"):t).indexOf("/../")){for(var r=[],s=0,n=t.split("/"),l=0;l<=n.length-1;l++)".."==(h=n[l])?(0==s?s=l-1:--s,0<=s&&delete r[s]):(r.push(h),s=0);for(t="",l=0;l<=r.length-1;l++){var h=r[l];null!=r[l]&&(""!=t&&(t+="/"),t+=r[l])}}return e+t},XiyuetaCommon.prototype.fullHttpUrl=function(t,e){if(null==e)return"";if(""==(e=(e+="").replace(/\\/g,"/").trim())||"./"==e)return"";var i,r="",s="",n="",l=t.indexOf("://");return s=-1!=l?(r=t.substr(0,l+3),l=(i=t.substr(l+3)).lastIndexOf("/"),n=r+i.substr(0,l+1),l=i.indexOf("/"),r+i.substr(0,l+1)):(l=t.lastIndexOf("/"),n=t.substr(0,l+1),l=t.indexOf("/"),t.substr(0,l+1)),"//"==e.substr(0,2)?e="http:"+e:-1==e.indexOf("://")&&(e="/"==e.substr(0,1)?s+e:n+e),this.handleFileUrl(e)},XiyuetaCommon.prototype.getUrlDir=function(t,e){return"string"!=typeof t?"":(-1<(t=t.trim()).indexOf("://")&&(i=t.indexOf("://",1),-1!=(t=t.substring(i+3,t.length)).indexOf("/")&&(t=t.substr(t.indexOf("/")+1))),-1!=(t=-1!=(t=-1!=(t="/"==t.substr(0,1)?t.substr(1):t).indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")?t.substr(0,t.indexOf("#")):t).indexOf("/")?"fz"==e?(t=t.substr(0,t.lastIndexOf("/"))).replace(/\//g,"_")+"_":t.substr(0,t.lastIndexOf("/")+1):"");var i},XiyuetaCommon.prototype.getUrlFileName=function(t,e){if(null==e&&(e=""),""==t||null==t)return"";var i,t=(t=t.replace(/\\/g,"/").trim()).split("/"),t=t[t.length-1],r="",s="";return-1!=(t=-1!=(t=-1!=t.indexOf("?")?t.substr(0,t.indexOf("?")):t).indexOf("#")?t.substr(0,t.indexOf("#")):t).indexOf(".")?(i=t.lastIndexOf("."),r=t.substr(0,i),s=t.substr(i+1).toLowerCase()):r=t,""==r?"":("image"==e?""==s?t+=".jpg":-1=="|bmp|jpg|jpeg|gif|png|".indexOf("|"+s+"|")&&(t=r+".jpg"):"css"==e?""==s?t+=".css":-1=="|css|".indexOf("|"+s+"|")&&(t=r+".css"):"js"==e?""==s?t+=".js":-1=="|js|".indexOf("|"+s+"|")&&(t=r+".js"):(t=r,""!=s&&(t+="."+s)),t)},XiyuetaCommon.prototype.setFileNameA=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"pie")).replace(/\//g,"la")).replace(/:/g,"maohao")).replace(/\*/g,"xin")).replace(/\?/g,"wen")).replace(/"/g,"yinhao")).replace(/</g,"zou")).replace(/>/g,"you")).replace(/\|/g,"heng")).replace(/\./g,"juhao")).replace(/,/g,"douhao")).replace(/&nbsp;/g," ")).replace(/&quot;/g,"shuang")).replace(/\n/g,"")},XiyuetaCommon.prototype.checkUrl=function(t){return!!/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i.test(t=null==t?"":t)},XiyuetaCommon.prototype.getDomain=function(t){return"string"==typeof t&&-1<t.indexOf("//")?(e=t.indexOf("//",1),t=(e=t.substring(e+1,t.length)).indexOf("/",1),e.substring(1,t)):"";var e},XiyuetaCommon.prototype.getUrlToFileName=function(t,e){var i=xiyueta.config().urlToNameList,r=(null!=e&&""!=e||(e="txt"),t.indexOf("?")),s=(-1!=(r=(t=-1!=r?t.substr(0,r):t).indexOf("#"))&&(t=t.substr(0,r)),""),n="\r\n"+i+"|";if(""==(s=-1!=(r=n.indexOf("\r\n"+t+"|"))?n.substr(r).split("|")[1]:s)){""==(s=this.getUrlFileName(t,e))&&(s=xiyueta.config().urlDefaultFileName+"."+e),""!=e&&-1==s.indexOf(".")&&(s+="."+e);for(var l=s,h=1;h<9&&-1!=i.indexOf("|"+s+"|");h++)s=l.substr(0,l.length-e.length-1)+"_"+h+"."+e}return s},_XIYUETA.prototype.replaceTplLabel=function(t,e){if(null==t)return!1;var i,r=xiyueta(t).domlabel(2);"<a></a>"==r?((i=xiyueta(t).find("a")).attr("href",e.url),null!=i.attr("title")&&i.attr("title",e.title),i.html(e.title)):""==r?"a"==xiyueta(t).getlabel()?(xiyueta(t).attr("href",e.url),null!=xiyueta(t).attr("title")&&xiyueta(t).attr("title",e.title),xiyueta(t).html(e.title)):console.log("sDom(子)",r):"<a></a><span></span>"==r?((i=xiyueta(t).find("a")).attr("href",e.url),null!=i.attr("title")&&i.attr("title",e.title),i.html(e.title),this.replaceTplTime(xiyueta(t).find("span"),e)):console.log("sDom(主)",r)},_XIYUETA.prototype.replaceTplTime=function(t,e){var i=xiyueta(t).text().trim(),r="",s="",n=!1,l=-1;""!=i&&("["==i.substr(0,1)&&(r="[",i=i.substr(1)),"]"==i.substr(i.length-1,1)&&(s="]",i=i.substr(0,i.length-1)));new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/).test(i)&&(n=!0,l=2),n&&(i=e.time,i=r+(i=0<l?e.time1:i)+s,xiyueta(t).html(i))},_XIYUETA.prototype.setTplConfig=function(t){if(null==t)return this.tplConfig;"object"==typeof t&&(null!=t.type&&(this.tplConfig.type=t.type),null!=t.minrow&&(this.tplConfig.minrow=t.minrow),this.tplConfig.nav={},this.tplConfig.news={},"dedecms"==this.tplConfig.type?(this.tplConfig.webTitle="{dede:global.cfg_webname/}",this.tplConfig.webKeywords="{dede:global.cfg_keywords/}",this.tplConfig.webDescription="{dede:global.cfg_description/}",this.tplConfig.nav.for="{dede:channel type='top' row='{%row%}'}\n",this.tplConfig.nav.title="[field:typename/]",this.tplConfig.nav.url="[field:typeurl/]",this.tplConfig.nav.end="{/dede:channel}",this.tplConfig.news.for="{dede:arclist titlelen='60' row='{%row%}'}\n",this.tplConfig.news.title="[field:title/]",this.tplConfig.news.url="[field:arcurl/]",this.tplConfig.news.image="[field:image/]",this.tplConfig.news.about="[field:title/]",this.tplConfig.news.body="[field:title/]",this.tplConfig.news.time="[field:pubdate function=\"MyDate('Y-m-d H:i',@me)\"/]",this.tplConfig.news.time1="[field:pubdate function=\"MyDate('Y-m-d',@me)\"/]",this.tplConfig.news.end="{/dede:arclist}"):(this.tplConfig.webTitle="<%=webTitle%>",this.tplConfig.webKeywords="<%=webKeywords%>",this.tplConfig.webDescription="<%=webDescription%>",this.tplConfig.nav.for='<%rs.open "select * from " & db_PREFIX & "WebColumn where parentId=-1 and isThrough=1 order by sortRank asc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.nav.focus="<%if isFocusNav(rs) then%>\n",this.tplConfig.nav.title='<%=rs("columnName")%>',this.tplConfig.nav.url='<%=getNavUrl(rs("id"),rs("columnType"))%>',this.tplConfig.nav.end="<%rs.movenext:next:rs.close%>",this.tplConfig.news.for='<%rs.open "select * from " & db_PREFIX & "ArticleDetail where parentId in("& getNameToAllId("{%did%}") &") order by sortRank desc" ,conn,1,1\nfor i=1 to {%row%}\nif rs.eof then exit for\n%>\n',this.tplConfig.news.focus="<%if i=1 then%>\n",this.tplConfig.news.title='<%=rs("title")%>',this.tplConfig.news.url='detail.asp?id=<%=rs("id")%>',this.tplConfig.news.image='<%=rs("smallimage")%>',this.tplConfig.news.about='<%=rs("aboutContent")%>',this.tplConfig.news.body='<%=cutStr(rs("bodyContent"),260,"...")%>',this.tplConfig.news.time='<%=rs("addDateTime")%>',this.tplConfig.news.time1='<%=format_Time(rs("addDateTime"),2)%>',this.tplConfig.news.end="<%rs.movenext:next:rs.close%>"))},xiyueta.tplconfig=function(t){return _xyt.setTplConfig(t)},xiyueta.findNav=function(){var e="";return xiyueta("a").each(function(){var t;if(-1<xiyueta(this).text().trim().indexOf("首页"))return 0<xiyueta(this).parent().children().findWithItem(4).length?console.log("相连","<a href=>首页</a><a href=>新闻</a>"):0<xiyueta(this).parent().parent().children().findWithItem(4).length&&(console.log("上一级","<li><a></a></li>"),t=xiyueta(this).parent().parent().parent().domList[0],e+="xiyueta({x:"+t.x+",y:"+t.y+"}).cutlabel()\n",console.log("xiyueta({x:"+t.x+",y:"+t.y+"}).cutlabel()")),!1}),e},xiyueta.autoFindTpl=function(t,e,i){null!=t&&xiyueta.tplconfig(t),"number"!=typeof e&&(e=6);var r,s,t=xiyueta.tplconfig().minrow;return"object"!=this.toType(i)?(r=xiyueta("body").getlv(),0<xiyueta(r=null!=r?"body :lv("+(r+1)+")":":lv(1)").findWithItem(t).length?-1<(s=xiyueta(r).findWithItem(t).find("a").text()).indexOf("首页")?xiyueta(r).findWithItem(t).nav():xiyueta(r).findWithItem(t).news():0<e&&xiyueta(r).each(function(){xiyueta.autoFindTpl(void 0,--e,this)})):(s=xiyueta(i).children().findWithItem(t).find("a").text(),0<xiyueta(i).children().findWithItem(t).length?-1<s.indexOf("首页")?xiyueta(i).children().findWithItem(t).nav():xiyueta(i).children().findWithItem(t).news():0<e&&xiyueta(i).children().each(function(){xiyueta.autoFindTpl(void 0,--e,this)})),r},xiyueta.fn.extend({findWithItem:function(t,e){for(var i,r,s,n="|div|span|ul|li|tr|a|",l=_xyt.tplConfig.minrow,h=(1==arguments.length?"string"==typeof t?n="|"+t.replace(/\s+/g,"").replace(/,/g,"|")+"|":"number"==typeof t&&(l=t):2==arguments.length&&("string"==typeof t&&(n="|"+t.replace(/\s+/g,"").replace(/,/g,"|")+"|"),"number"==typeof e&&(l=e)),[]),o=0;o<this.domList.length;o++)(a=this.domList[o]).x!=a.y&&(r=xiyueta(a).getlabel(),-1!=n.indexOf("|"+r+"|")&&(r=xiyueta(a).domlabel(2),null==i?(i=r,h.push({count:1,domList:[a]})):i==r?(h[h.length-1].count++,h[h.length-1].domList.push(a)):(h.push({count:1,domList:[a]}),i=r)));for(o=0;o<h.length;o++){var a=h[o];(null==s||a.count>s.count)&&(s=a)}return this.domList=[],this.length=0,null==s||s.domList.length<l||(this.domList=s.domList,this.length=this.domList.length),this},news:function(t){return this.nav(t,"news")},nav:function(t,e){var i,r,s,n,l,h="新闻资讯",o=("object"==typeof t?(xiyueta.tplconfig(t),null!=i&&(i=t.row),null!=t.did&&(h=t.did)):null==xiyueta.tplconfig().webTitle&&xiyueta.tplconfig([]),t="news"==e?xiyueta.tplconfig().news:xiyueta.tplconfig().nav,0),a=(this.each(function(t,e){var i=xiyueta(this).domlabelwrap(2,"id class");0==t?((n=this).html=i,n.count=1,this.x):n.html==i?n.count++:null==l?((l=this).html=i,l.count=1):l.html==i?l.count++:alert(i),this.y,o++}),null==l?r=n:s=n.count>l.count?(r=n,l):(r=l,n),_xyt.replaceTplLabel(r,t),null==i&&(i=o),t.for.replace("{%row%}",i).replace("{%did%}",h));return null!=s?(_xyt.replaceTplLabel(s,t),a+=t.focus+xiyueta(s).htmlwrap()+"\n<%else%>\n"+xiyueta(r).htmlwrap()+"\n<%end if%>"):a+=xiyueta(r).htmlwrap(),a+="\n"+t.end,this.each(function(t,e){0==t?xiyueta(this).htmlwrap(a):xiyueta(this).remove(!0)}),a},webtpl:function(t,e){var i,r;1==arguments.length?"object"==typeof t?i=t:"number"==typeof t&&(r=t):2==arguments.length&&("object"==typeof t&&(i=t),"number"==typeof e&&(r=e));for(var s=0;s<this.domList.length;s++){var n=this.domList[s];n.x,n.y;xiyueta.autoFindTpl(i,r,n)}}});
>>>>>>> 7789d7899ca7a7576e82ff4abfe2b907ed83043b
